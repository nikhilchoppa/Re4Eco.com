var lfb_lastStepID=0,lfb_lastSteps=new Array,lfb_plannedSteps,lfb_gmapService=!1,tld_selectionMode=!1,lfb_calendars=new Array,lfb_stripe;function lfb_clearFixedElements(){jQuery("*:not(#lfb_bootstraped)").each(function(){0==jQuery(this).closest("#lfb_bootstraped").length&&"static"!=jQuery(this).css("position")&&jQuery(this).css("position","static"),0==jQuery(this).closest("#lfb_bootstraped").length&&jQuery(this).css("will-change","unset")})}function wpe_getForm(t){for(var e=!1,a=0;a<wpe_forms.length;a++)if(wpe_forms[a].formID==t){e=wpe_forms[a];break}return e}function lfb_onResize(){jQuery("#estimation_popup.wpe_fullscreen").css({minHeight:jQuery(window).height()}),jQuery(window).width()<=768?(jQuery("#estimation_popup .lfb_stepDescription").each(function(){jQuery(this).css({top:jQuery(this).closest(".genSlide").find(".stepTitle").height()+60})}),jQuery("#estimation_popup .genContent ").each(function(){var t=0;0<jQuery(this).closest(".genSlide").find(".lfb_stepDescription").length&&(t=jQuery(this).closest(".genSlide").find(".lfb_stepDescription").height()),jQuery(this).css({paddingTop:jQuery(this).closest(".genSlide").find(".stepTitle").height()+t+70})})):(jQuery("#estimation_popup .lfb_stepDescription").each(function(){jQuery(this).css({top:jQuery(this).closest(".genSlide").find(".stepTitle").height()+60})}),jQuery("#estimation_popup .genContent ").each(function(){var t=0;0<jQuery(this).closest(".genSlide").find(".lfb_stepDescription").length&&(t=jQuery(this).closest(".genSlide").find(".lfb_stepDescription").height()),jQuery(this).css({paddingTop:jQuery(this).closest(".genSlide").find(".stepTitle").height()+t+70})}))}function wpe_updatePlannedSteps(t){var e=parseInt(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"]  #mainPanel .genSlide[data-start="1"]').attr("data-stepid"));(lfb_plannedSteps=new Array).push(e),lfb_plannedSteps=wpe_scanPlannedSteps(e,t)}function wpe_scanPlannedSteps(t,e){new Array;var a=wpe_findPotentialsSteps(t,e);return 0<a.length&&"final"!=a[0]&&(lfb_plannedSteps.push(a[0]),wpe_scanPlannedSteps(a[0],e)),lfb_plannedSteps}function wpe_getStepQuantities(t,e,a){var r,i=wpe_getForm(t),o=0;return(-1<jQuery.inArray(parseInt(e),lfb_lastSteps)||e==i.step)&&(r=wpe_getFormContent(t,!0,e)[2],jQuery.each(r,function(){this.itemid!=a&&(isNaN(this.quantity)?o++:o+=parseInt(this.quantity))})),o}function wpe_getTotalQuantities(t,e,a){wpe_getForm(t);var r=wpe_getFormContent(t,!0)[2],i=0,o=!0;!isNaN(e)&&0!=e||(o=!1);var p=!1;return jQuery.each(r,function(){var t;this.itemid!=a&&(t=this,o&&!p&&t.stepid==e&&(p=!0),p&&t.stepid!=e||(isNaN(t.quantity)?i++:i+=parseInt(t.quantity)))}),i}function wpe_itemClick(t,e,a){var r,i,o,p=wpe_getForm(a),s=t;e&&(jQuery('#estimation_popup[data-form="'+p.formID+'"] .quantityBtns').removeClass("open"),jQuery('#estimation_popup[data-form="'+p.formID+'"] .quantityBtns').fadeOut(250),navigator.userAgent.toLowerCase().match(/(iPad|iPhone|iPod)/i)&&(jQuery("body :not(.ui-slider-handle) > .tooltip").remove(),jQuery("body > .tooltip").remove(),jQuery('#estimation_popup[data-form="'+p.formID+'"] > .tooltip').remove())),e&&s.addClass("action"),!e&&s.is(".action")||("zoom"!=p.imgIconStyle&&s.find("span.icon_select").animate({bottom:160,opacity:0},200),s.is(".checked")?e&&s.data("required")||("zoom"==p.imgIconStyle?(s.delay(200).css("transition-delay","0.2s"),s.find("span.icon_select").css("transition-delay","0s")):s.css("transition-delay","0s"),r=220,"zoom"==p.imgIconStyle&&(r=0),s.delay(r).removeClass("checked"),"zoom"!=p.imgIconStyle?s.delay(220).find("span.icon_select").removeClass("fui-check").addClass("fui-cross"):s.find("span.icon_select").css("transition-delay","0s"),s.delay(400).css("transition-delay","0s"),s.find(".icon_quantity").delay(300).fadeOut(200)):(s.css("transition-delay","0s"),0!=p.disableTipMobile&&wpe_is_touch_device()||t.is('[data-type="slider"]')||t.is(".lfb_button")||""!=p.imgTitlesStyle||t.b_tooltip("show"),"zoom"==p.imgIconStyle&&s.find("span.icon_select").css("transition-delay",".5s"),s.is('[type="checkbox"][data-checkboxstyle="checkbox"]')||s.delay(220).addClass("checked"),"zoom"!=p.imgIconStyle&&s.delay(220).find("span.icon_select").removeClass("fui-cross").addClass("fui-check"),0<s.find(".quantityBtns").length&&!s.is("[data-distanceqt]")&&(s.find(".icon_quantity").delay(300).fadeIn(200),s.find(".quantityBtns").delay(500).addClass("open"),s.find(".quantityBtns").delay(500).fadeIn("200")),s.data("urltarget")&&""!=s.data("urltarget")&&("_self"!=(i=s.data("urltargetmode"))&&"_blank"!=i&&(i="_blank"),"null"!=typeof(o=window.open(s.data("urltarget"),i))&&null!=o&&o.focus())),"zoom"!=p.imgIconStyle&&s.find("span.icon_select").delay(300).animate({bottom:0,opacity:1},200),e&&s.data("group")&&(s.closest(".genSlide").find('div.selectable.checked[data-group="'+s.data("group")+'"]:not([data-itemid="'+s.attr("data-itemid")+'"])').each(function(){wpe_itemClick(jQuery(this),!1,a),jQuery(this).removeClass("checked")}),s.closest(".genSlide").find('input[type=checkbox][data-group="'+s.data("group")+'"]:checked:not([data-itemid="'+s.attr("data-itemid")+'"])').trigger("click.auto"),s.closest(".genSlide").find('a.lfb_button.checked[data-group="'+s.data("group")+'"]:not([data-itemid="'+s.attr("data-itemid")+'"])').each(function(){wpe_itemClick(jQuery(this),!1,a),jQuery(this).removeClass("checked")}),"1"==p.groupAutoClick&&s.is(".checked")&&s.closest(".genSlide").is("[data-required=true]")&&setTimeout(function(){0==s.closest(".genSlide").find("[data-itemid]").not('[data-itemtype="separator"]').not(".lfb_richtext").not('[data-group="'+s.data("group")+'"]').not(".lfb_disabled").length&&0==s.closest(".genSlide").find('[data-group="'+s.data("group")+'"] .quantityBtns').length&&0==s.closest(".genSlide").find('[data-group="'+s.data("group")+'"] .wpe_qtfield').length&&wpe_nextStep(p.formID)},500)),setTimeout(function(){wpe_updatePrice(a),s.removeClass("action")},420)),setTimeout(function(){s.is('[data-usedistance="true"]')&&lfb_removeDistanceError(s.attr("data-itemid"),a)},200)}function wpe_nl2br(t,e){return((t=t.replace(/\n\n/g,"\n"))+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1"+(e||void 0===e?"<br />":"<br>")+"$2")}function wpe_initForms(){jQuery.each(wpe_forms,function(){var p=this;p.price=0,p.priceSingle=0,p.priceMax=0,p.step=0,p.gFormDesignCheck=0,p.timer_gFormSubmit=null,p.timer_gFormDesign=null,p.animationsSpeed*=1e3,p.reductionResult=0,p.reduction=0,p.discountCode="",p.discountCodeDisplayed=!1,p.initialPrice=parseFloat(p.initialPrice),p.contactSent=0,p.gravitySent=!1,p.shineFxIndex=0,p.subscriptionText=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #finalPrice span:eq(1)').html(),p.richtextsContent=new Array,p.emailSent=!1,p.autoStart=!1,p.urlVariables="",p.useRazorpay=!1,p.razorpayReady=!1,p.stripeToken="",p.itemsData=new Array,p.signature=!1,jQuery('#estimation_popup[data-form="'+p.formID+'"]').is(".lfb_visualEditing")&&lfb_clearFixedElements(),jQuery('#estimation_popup[data-form="'+p.formID+'"]').is(".wpe_fullscreen")&&jQuery('#estimation_popup[data-form="'+p.formID+'"]').closest("#lfb_bootstraped").parents().css({position:"static",display:"block"}),1==p.useSignature&&(p.signature=jQuery("#lfb_signature").signature({thickness:4,guideline:!0,guidelineOffset:26}),jQuery("#lfb_resetSignature").on("click",function(){p.signature.signature("clear")}),setTimeout(function(){jQuery('#estimation_popup[data-form="'+p.formID+'"] #lfb_signature canvas').attr("width",jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #lfb_signature').width()),jQuery('#estimation_popup[data-form="'+p.formID+'"] #lfb_signature canvas').css("width",jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #lfb_signature').width())},500));for(var t=0;t<p.variables.length;t++)p.variables[t].value=p.variables.defaultValue;jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #lfb_btnPayStripe').on("click",function(){lfb_showWinStripePayment(p)}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] .lfb_richtext[data-itemid]').each(function(){p.richtextsContent[jQuery(this).attr("data-itemid").toString()]=jQuery(this).html()}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] [data-tooltiptext][data-tooltipimg!=""]').each(function(){jQuery(this).attr("data-tooltiptext",jQuery(this).attr("data-tooltiptext")+"<br/><img src='"+jQuery(this).attr("data-tooltipimg")+"' alt='"+jQuery(this).attr("data-tooltiptext")+"'/>")}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] [data-type="numberfield"]:not([value])').each(function(){var t=0;jQuery(this).is("[min]")&&(t=parseInt(jQuery(this).attr("min"))),jQuery(this).val(t)});var o=p.formID;1==p.save_to_cart?p.save_to_cart=!0:p.save_to_cart=!1,1==p.save_to_cart_edd?p.save_to_cart_edd=!0:p.save_to_cart_edd=!1,0<p.gravityFormID&&jQuery.ajax({url:p.ajaxurl,type:"post",data:{action:"get_currentRef",formID:o},success:function(t){p.current_ref=t}});var n=new Array;jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"]  #mainPanel .genSlide .lfb_timepicker').each(function(){jQuery(this).timepicker({showMeridian:parseInt(p.timeModeAM),appendWidgetTo:'#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"]'}),jQuery(this).click(function(){jQuery(this).timepicker("showWidget")}),jQuery(this).timepicker().on("changeTime.timepicker",function(t){var e,a,r,i,o,p=jQuery(this).attr("data-mintime"),s=jQuery(this).attr("data-maxtime");""!=p&&0<p.indexOf(":")&&(e=parseInt(p.substr(0,p.indexOf(":"))),a=parseInt(p.substr(p.indexOf(":")+1,2)),0<p.indexOf("PM")&&12!=e&&(e+=12),o=t.time.hours,"PM"==t.time.meridian&&(o+=12),(o<e||o==e&&t.time.minutes<a)&&jQuery(this).val("")),""!=s&&0<s.indexOf(":")&&(r=parseInt(s.substr(0,s.indexOf(":"))),i=parseInt(s.substr(s.indexOf(":")+1,2)),0<s.indexOf("PM")&&12!=r&&(r+=12),o=t.time.hours,"PM"==t.time.meridian&&(o+=12),(r<o||o==r&&t.time.minutes>i)&&jQuery(this).val(""))})});var d=(d=wpe_forms[0].dateFormat).replace(/\\\//g,"/");jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"]  #mainPanel .genSlide .lfb_datepicker:not(.lfb_datepickerReady)').each(function(){var t,e=new Date;jQuery(this).addClass("lfb_datepickerReady"),jQuery(this).is('[data-allowpast="1"]')||jQuery(this).is('[data-datetype="time"]')?e=null:jQuery(this).is('[data-allowpast="0"]')&&0<parseInt(jQuery(this).attr("data-startdays"))&&(t=parseInt(jQuery(this).attr("data-startdays")),e.setDate(e.getDate()+t));var a=new Array;jQuery(this).is("[data-daysweek]")&&""!=jQuery(this).attr("data-daysweek")&&jQuery.each(jQuery(this).attr("data-daysweek").split(","),function(){a.push(parseInt(this))});var r={daysOfWeekDisabled:a,language:p.datePickerLanguage,timeZone:"",startDate:e,showMeridian:parseInt(p.timeModeAM),container:".lfb_itemContainer_"+jQuery(this).attr("data-itemid")},i=jQuery(this).attr("data-datetype");"date"==i?(r.format=d,r.minView=2,e&&(e.setHours(0),e.setMinutes(0)),jQuery(this).attr("data-disableminutes","0")):"time"==i?(1==parseInt(p.timeModeAM)?r.format="H:ii P":r.format="hh:ii",r.startView=1,jQuery(this).is('[data-disableminutes="1"]')&&(r.minView=1,e&&e.setMinutes(0))):(1==parseInt(p.timeModeAM)?r.format=d+" H:ii P":r.format=d+" hh:ii",jQuery(this).is('[data-disableminutes="1"]')&&(r.minView=1)),jQuery(this).datetimepicker(r).on("show",function(t){jQuery(this).data("lastdate",jQuery(this).val()),jQuery(this).val("")}).on("hide",function(t){""==jQuery(this).val()&&""!=jQuery(this).data("lastdate")&&jQuery(this).val(jQuery(this).data("lastdate"))}).on("changeDay",function(t){jQuery(this).val("");var e=moment.utc(t.date).format("YYYY-MM-DD"),a=jQuery(this).attr("data-eventduration"),r=jQuery(this).attr("data-eventdurationtype"),i=lfb_getDisabledHours(jQuery(this).attr("data-calendarid"),e,a,r);jQuery(this).data("date",e),jQuery(this).datetimepicker("setHoursDisabled",i)}).on("changeHour",function(t){var e,a,r,i,o,p,s;jQuery(this).is('[data-datetype="time"]')&&jQuery(this).is('[data-disableminutes="1"]')?((e=moment(t.date).utc()).subtract(moment(t.date).minutes(),"minutes"),a=this,setTimeout(function(){jQuery(a).datetimepicker("setDate",new Date(e.format("YYYY-MM-DD HH:mm")))},1)):(r=moment.utc(t.date).format("YYYY-MM-DD"),i=moment.utc(t.date).format("HH"),o=jQuery(this).attr("data-eventduration"),p=jQuery(this).attr("data-eventdurationtype"),s=lfb_getDisabledMinutes(jQuery(this).attr("data-calendarid"),r,i,o,p),jQuery(this).data("date",moment.utc(t.date).format("YYYY-MM-DD HH:mm")),jQuery(this).datetimepicker("setMinutesDisabled",s))});var s=this;jQuery(this).closest(".form-group").next(".datetimepicker").find(".datetimepicker-hours thead tr:first-child th").click(function(){var p=this;setTimeout(function(){var t=jQuery(p).closest(".datetimepicker").prev(".form-group").find(".lfb_datepicker"),e=jQuery(s).datetimepicker("getViewDate");t.val("");var a=moment(e).format("YYYY-MM-DD"),r=t.attr("data-eventduration"),i=t.attr("data-eventdurationtype"),o=lfb_getDisabledHours(t.attr("data-calendarid"),a,r,i);t.data("date",a),t.is("[data-daysweek]")&&""!=jQuery(this).attr("data-daysweek")&&jQuery.each(t.attr("data-daysweek").split(","),function(){if(this==e.getDay()){o=new Array;for(var t=0;t<24;t++)o.push(t)}}),t.datetimepicker("setHoursDisabled",o)},10)}),"date"!=i&&"time"==i?jQuery(this).on("show",function(){jQuery(".datetimepicker .table-condensed .prev").hide(),jQuery(".datetimepicker .table-condensed .switch").hide(),jQuery(".datetimepicker .table-condensed .next").hide()}):jQuery(this).on("show",function(){jQuery(".datetimepicker .table-condensed .prev").show(),jQuery(".datetimepicker .table-condensed .switch").show(),jQuery(".datetimepicker .table-condensed .next").show()}),0!=jQuery(this).attr("data-calendarid")&&0<parseInt(jQuery(this).attr("data-calendarid"))&&-1==jQuery.inArray(jQuery(this).attr("data-calendarid"),n)&&n.push(jQuery(this).attr("data-calendarid")),0==jQuery(this).attr("placeholder").length&&0==jQuery(this).val().length&&(jQuery(this).is('[data-disableminutes="1"]')||"0"!=jQuery(this).attr("data-calendarid")||jQuery(this).datetimepicker("setDate",new Date)),jQuery(this).keypress(function(t){t.preventDefault()})}),0<n.length&&lfb_getBusyDates(p.formID,n),navigator.userAgent.toLowerCase().match(/(iPad|iPhone|iPod)/i)&&jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] [data-flipfx="1"]').removeAttr("data-flipfx"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"]').is('[data-emaillaststep="1"]')&&(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #finalSlide .linkPrevious').addClass("lfb-hidden"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #wpe_btnOrder').addClass("lfb-hidden")),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] .form-control').on("focus",function(){0==p.disableTipMobile&&wpe_is_touch_device()&&jQuery(this).b_tooltip("show")}).on("focusout",function(){0==p.disableTipMobile&&wpe_is_touch_device()&&(jQuery("#estimation_popup :not(.ui-slider-handle) > .tooltip").remove(),jQuery("body > .tooltip").remove(),jQuery('#estimation_popup[data-form="'+p.formID+'"] > .tooltip').remove())}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #mainPanel .genSlide .genContent div.selectable span.icon_select.lfb_fxZoom').css({textShadow:"-2px 0px "+jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #mainPanel').css("background-color")}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"]').is(".wpe_popup")&&!jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"]').closest("#lfb_bootstraped").parent().is("body")&&jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"]').closest("#lfb_bootstraped").detach().appendTo("body"),jQuery('#estimation_popup[data-form="'+p.formID+'"]').is(".wpe_fullscreen")&&jQuery("html,body").css("overflow-y","hidden"),0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #wtmt_paypalForm').length&&jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #wtmt_paypalForm').attr("target","_self"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] [data-lazy-src]').each(function(){jQuery(this).parent().on("click",function(t){wpe_itemClick(jQuery(this),!0,p.formID)})}),0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #lfb_paymentMethodBtns').length&&(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #lfb_paymentMethodBtns [data-payment="paypal"]').click(function(t){t.preventDefault(),p.useRazorpay=!1,jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #lfb_razorPayCt').slideUp(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #btnOrderPaypal').trigger("click")}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #lfb_paymentMethodBtns [data-payment="razorpay"]').click(function(){lfb_checkStepItemsValid("final",p.formID)&&lfb_checkCaptcha(p,function(){setTimeout(function(){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"]').is(".wpe_fullscreen")?jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"]').animate({scrollTop:jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o+'"] #lfb_razorPayCt').offset().top-(80+parseInt(p.scrollTopMargin))},2*p.animationsSpeed):jQuery("body,html").animate({scrollTop:jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o+'"] #lfb_razorPayCt').offset().top-(80+parseInt(p.scrollTopMargin))},2*p.animationsSpeed)},350),0<lfb_lastSteps.length&&jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #mainPanel #lfb_razorPayCt .linkPrevious').fadeIn(),0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #btnOrderRazorpay').length&&jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #btnOrderRazorpay').trigger("click")})}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #lfb_paymentMethodBtns [data-payment="stripe"]').click(function(){p.useRazorpay=!1,jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #lfb_razorPayCt').slideUp(),lfb_checkStepItemsValid("final",p.formID)&&(0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #lfb_captcha').length?jQuery.ajax({url:p.ajaxurl,type:"post",data:{action:"lfb_checkCaptcha",formID:o,captcha:jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #lfb_captchaField').val()},success:function(t){"1"==t?(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #lfb_captchaPanel').slideUp(100),lfb_showWinStripePayment(p)):jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #lfb_captchaField').closest(".form-group").addClass("has-error")}}):(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #lfb_captchaPanel').slideUp(100),lfb_showWinStripePayment(p)))})),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #btnOrderRazorpay').click(function(){p.useRazorpay=!0,wpe_order(o)}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] input:not([type=checkbox])').change(function(){wpe_updatePrice(o,jQuery(this).attr("data-itemid"))}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] textarea').change(function(){wpe_updatePrice(o,jQuery(this).attr("data-itemid"))}),1==p.enableShineFxBtn&&(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"]').find("a.btn-primary").append('<canvas class="lfb_shineCanvas"></canvas>'),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"]').find("a.btn-primary").mouseover(function(){0==p.shineFxIndex&&lfb_shineBtn(o,jQuery(this).find(".lfb_shineCanvas"))})),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] .lfb_dropzone').each(function(){var t=null;0<jQuery(this).attr("data-maxfiles")&&(t=jQuery(this).attr("data-maxfiles"));var i=jQuery(this);jQuery(this).dropzone({url:p.ajaxurl+"?form="+o,paramName:"file",maxFilesize:jQuery(this).attr("data-filesize"),maxFiles:t,addRemoveLinks:!0,dictRemoveFile:"",dictCancelUpload:"",acceptedFiles:jQuery(this).attr("data-allowedfiles"),dictDefaultMessage:p.filesUpload_text,dictFileTooBig:p.filesUploadSize_text,dictInvalidFileType:p.filesUploadType_text,dictMaxFilesExceeded:p.filesUploadLimit_text,init:function(){this.on("thumbnail",function(t,e){var a=jQuery(t.previewElement),r=t.name.replace(/\//g,"");r=(r=(r=(r=r.replace(/ /g,"_")).replace(/'/g,"_")).replace(/"/g,"_")).replace(/[^a-zA-Z0-9._-]/g,""),a.attr("data-file",r+"_"+i.data("currentFileIndex"))}),this.on("sending",function(t,e,a){i.closest(".genSlide").find(".btn-next").fadeOut(),i.closest(".genSlide").find(".btn-primary").fadeOut(),a.append("action","lfb_upload_form"),a.append("formSession",jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"]').attr("data-formsession")),a.append("itemID",i.attr("data-itemid"))}),this.on("complete",function(t,e){0!=i.find(".dz-preview:not(.dz-complete)").length&&0!=i.find(".dz-preview").length||(i.closest(".genSlide").find(".btn-next").fadeIn(),i.closest(".genSlide").find(".btn-primary").fadeIn()),wpe_updatePrice(p.formID)}),this.on("success",function(t,e){var a,r,i=jQuery(t.previewElement),o=t.name.replace(/\//g,"");o=(o=(o=(o=o.replace(/ /g,"_")).replace(/'/g,"_")).replace(/"/g,"_")).replace(/[^a-zA-Z0-9._-]/g,""),1==p.emailCustomerLinks&&(r=(a=e.split("||"))[0],i.attr("data-url",r),e=a[1]),i.attr("data-file",e+"_"+o)}),this.on("removedfile",function(t,e){wpe_updatePrice(p.formID)})}})}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"]').find(".lfb_rate").each(function(){var t=parseInt(jQuery(this).closest(".itemBloc").attr("data-max")),e=parseInt(jQuery(this).closest(".itemBloc").attr("data-value"));isNaN(e)&&(e=5);var a="#bdc3c7";""!=jQuery(this).closest(".itemBloc").attr("data-color")&&(a=jQuery(this).closest(".itemBloc").attr("data-color")),-1==a.indexOf("#")&&(a="#"+a);jQuery(this).closest(".itemBloc").attr("data-interval");jQuery(this).rate({initial_value:e,max_value:t,step_size:1,cursor:"pointer"}).on("change",function(t,e){jQuery(this).closest(".itemBloc").addClass("checked"),jQuery(this).closest(".itemBloc").addClass("lfb_changed"),wpe_updatePrice(o,jQuery(this).closest(".itemBloc").attr("data-itemid"))}).css({color:a})}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"]').find('.form-control[data-validation="mask"][data-mask]').each(function(){0<jQuery(this).attr("data-mask").trim().length&&jQuery(this).mask(jQuery(this).attr("data-mask"),{clearIfNotMatch:!0})}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"]').find('input[type="text"][data-itemid],textarea[data-itemid]').each(function(){jQuery(this).attr("data-initialvalue",jQuery(this).val())}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] [data-itemid][data-type="slider"]').each(function(){var t=parseInt(jQuery(this).attr("data-min"));isNaN(t)&&(t=0);var e=parseInt(jQuery(this).attr("data-max"));0==e&&(e=30);var r=jQuery('<div class="tooltip top" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner">'+t+"</div></div>").css({position:"absolute",top:-55,left:-20,opacity:1}).hide(),a=1;jQuery(this).is("[data-stepslider]")&&0<parseInt(jQuery(this).attr("data-stepslider"))&&(a=parseInt(jQuery(this).attr("data-stepslider")));jQuery(this).slider({min:t,max:e,value:t,step:a,disabled:!1,orientation:"horizontal",range:"min",change:function(t,e){tld_selectionMode||(r.find(".tooltip-inner").html(wpe_formatPrice(e.value,p.formID)),t.originalEvent&&wpe_updatePrice(o,jQuery(this).attr("data-itemid")))},start:function(t,e){if(tld_selectionMode)return!1},slide:function(t,e){if(tld_selectionMode)return!1;r.find(".tooltip-inner").html(wpe_formatPrice(e.value,p.formID));var a=this;t.originalEvent&&(setTimeout(function(){wpe_updatePrice(o,jQuery(a).attr("data-itemid")),jQuery(a).addClass("lfb_changed")},30),r.show()),wpe_updatePrice(o,jQuery(a).attr("data-itemid"))},stop:function(t,e){r.find(".tooltip-inner").html(wpe_formatPrice(e.value,p.formID)),wpe_updatePrice(o,jQuery(this).attr("data-itemid")),r.hide()}}).find(".ui-slider-handle").append(r).hover(function(){tld_selectionMode||r.show()},function(){r.hide()})}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] .lfb_colorpicker').each(function(){jQuery(this);jQuery(this).prev(".lfb_colorPreview").click(function(){tld_selectionMode||jQuery(this).next(".lfb_colorpicker").trigger("click")}),jQuery(this).prev(".lfb_colorPreview").css({backgroundColor:p.colorA}),jQuery(this).colpick({color:p.colorA,layout:"hex",onSubmit:function(){jQuery("body > .colpick").fadeOut()},onChange:function(t,e,a,r,i){jQuery(r).val("#"+e),jQuery(r).prev(".lfb_colorPreview").css({backgroundColor:"#"+e})}})}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"]').find('.lfb_colorPreview[data-urltarget],input[type="text"][data-itemid]:not(.lfb_colorpicker)[data-urltarget],textarea[data-itemid][data-urltarget],select[data-itemid][data-urltarget],input[type="number"][data-urltarget]').each(function(){jQuery(this).click(function(){var t;tld_selectionMode||"null"!=typeof(t=window.open(jQuery(this).attr("data-urltarget"),"_blank"))&&null!=t&&t.focus()})}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"]').find('[data-autocomplete="1"]').each(function(){var t={};"city"==jQuery(this).attr("data-fieldtype")?t.types=["(cities)"]:"address"==jQuery(this).attr("data-fieldtype")?0<jQuery(this).closest(".genContent").find('[data-fieldtype="city"]').length&&(t.types=["address"]):"country"!=jQuery(this).attr("data-fieldtype")&&"zip"!=jQuery(this).attr("data-fieldtype")||(t.types=["(regions)"]);var r=new google.maps.places.Autocomplete(jQuery(this).get(0),t);r.field=jQuery(this),"zip"==jQuery(this).attr("data-fieldtype")?google.maps.event.addListener(r,"place_changed",function(){for(var t=r.getPlace(),e=0;e<t.address_components.length;e++)for(var a=0;a<t.address_components[e].types.length;a++)"postal_code"==t.address_components[e].types[a]&&r.field.val(t.address_components[e].long_name)}):"country"==jQuery(this).attr("data-fieldtype")&&google.maps.event.addListener(r,"place_changed",function(){for(var t=r.getPlace(),e=0;e<t.address_components.length;e++)for(var a=0;a<t.address_components[e].types.length;a++)"country"==t.address_components[e].types[a]&&r.field.val(t.address_components[e].long_name)})}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"]  #mainPanel .genSlide [data-group]').each(function(){var t=jQuery(this);"1"==p.groupAutoClick&&""!=t.prop("data-group")&&t.closest(".genSlide").is("[data-required=true]")&&0==t.closest(".genSlide").find("[data-itemid]:not(.lfb_disabled)").not(".lfb_richtext").not('[data-group="'+t.data("group")+'"]').not(".lfb_disabled").length&&0==t.closest(".genSlide").find('[data-group="'+t.data("group")+'"] .quantityBtns').length&&0==t.closest(".genSlide").find('[data-group="'+t.data("group")+'"] .wpe_qtfield').length&&t.closest(".genSlide").find(".btn-next").addClass("lfb-hidden")}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"]  #mainPanel .genSlide div.selectable.prechecked,#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"]  #mainPanel .genSlide a.lfb_button.prechecked,#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #mainPanel .genSlide input[type=checkbox][data-price].prechecked').each(function(){wpe_itemClick(jQuery(this),!1,o)}),wpe_initPrice(o),wpe_updatePrice(o),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #btnStart').click(function(){tld_selectionMode||wpe_openGenerator(o)}),wpe_initGform(o),0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #wtmt_paypalForm').length&&jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #wtmt_paypalForm').attr("target","_self"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] .quantityBtns > a').click(function(){tld_selectionMode||("less"==jQuery(this).attr("data-btn")?wpe_quantity_less:wpe_quantity_more)(this,o)}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] .linkPrevious').click(function(){tld_selectionMode||wpe_previousStep(o)}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] .btn-next').click(function(){tld_selectionMode||wpe_nextStep(o)}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #btnOrderPaypal').click(function(){tld_selectionMode||wpe_order(o)}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #finalSlide [data-toggle="switch"]').change(function(){wpe_toggleField(jQuery(this).attr("data-fieldid"),o)});var e=!1;jQuery(".gform_wrapper").each(function(){jQuery(this).attr("id").substr(jQuery(this).attr("id").lastIndexOf("_")+1,jQuery(this).attr("id").length)==p.gravityFormID&&(e?jQuery(this).remove():(e=!0,jQuery(this).detach().insertAfter('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #finalPrice')))}),setTimeout(function(){var t;1<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #finalSlide .gform_wrapper').length&&(t=!1,jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #finalSlide .gform_wrapper').each(function(){t?jQuery(this).remove():t=!0}))},500),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] .wpe_qtfield').attr("type","number"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] .wpe_qtfield').focusout(function(){-1<jQuery(this).val().indexOf("-")&&(!jQuery(this).is("[min]")||jQuery(this).attr("min").indexOf("-")<0)&&jQuery(this).val(parseInt(jQuery(this).attr("min"))),parseFloat(jQuery(this).val())<parseInt(jQuery(this).attr("min"))&&jQuery(this).val(jQuery(this).attr("min")),parseFloat(jQuery(this).val())>parseInt(jQuery(this).attr("max"))&&jQuery(this).val(jQuery(this).attr("max")),wpe_updatePrice(p.formID),wpe_updateSummary(p.formID)}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] input[type="number"][data-itemid]').keydown(function(t){return 69!=t.keyCode}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] input[type="number"][data-itemid]').on("focusin",function(){0==jQuery(this).val()&&jQuery(this).val("")}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] input[type="number"][data-itemid]').on("keyup change",function(){wpe_updatePrice(p.formID),wpe_updateSummary(p.formID)}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] input[type="number"][data-itemid]').focusout(function(){""==jQuery(this).val()&&jQuery(this).val(0),0==jQuery(this).val()&&!jQuery(this).is('[data-required="true"]')||(-1<jQuery(this).val().indexOf("-")&&(!jQuery(this).is("[min]")||jQuery(this).attr("min").indexOf("-")<0)&&jQuery(this).val(parseInt(jQuery(this).attr("min"))),parseFloat(jQuery(this).val())<parseFloat(jQuery(this).attr("min"))&&jQuery(this).val(jQuery(this).attr("min")),parseFloat(jQuery(this).val())>parseFloat(jQuery(this).attr("max"))&&jQuery(this).val(jQuery(this).attr("max")),""!=jQuery(this).val()&&!isNaN(parseInt(jQuery(this).val()))||jQuery(this).val(0),""!=jQuery(this).val()&&(jQuery(this).is('[data-valueasqt="0"]')||0<jQuery(this).val())?jQuery(this).addClass("checked"):jQuery(this).removeClass("checked")),wpe_updatePrice(p.formID),wpe_updateSummary(p.formID)}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] .wpe_sliderQt').each(function(){var t=parseInt(jQuery(this).closest(".quantityBtns").attr("data-min"));0==t&&(t=1);var a=jQuery('<div class="tooltip top" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner">'+t+"</div></div>").css({position:"absolute",top:-55,left:-20,opacity:1}).hide(),e=1;jQuery(this).closest(".quantityBtns").is("[data-stepslider]")&&0<parseInt(jQuery(this).closest(".quantityBtns").attr("data-stepslider"))&&(e=parseInt(jQuery(this).closest(".quantityBtns").attr("data-stepslider")));jQuery(this).slider({min:t,max:parseInt(jQuery(this).closest(".quantityBtns").attr("data-max")),value:parseInt(jQuery(this).closest(".quantityBtns").next(".icon_quantity").html()),orientation:"horizontal",range:"min",disabled:!1,step:e,change:function(t,e){a.find(".tooltip-inner").html(e.value),jQuery(this).closest(".quantityBtns").next(".icon_quantity").html(e.value),t.originalEvent&&wpe_updatePrice(o,jQuery(this).attr("data-itemid"))},slide:function(t,e){jQuery(this).closest(".quantityBtns").next(".icon_quantity").html(e.value),a.find(".tooltip-inner").html(e.value),t.originalEvent&&wpe_updatePrice(o,jQuery(this).attr("data-itemid"))}}).find(".ui-slider-handle").append(a).hover(function(){a.show()},function(){a.hide()})}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"]').is(".lfb_visualEditing")||lfb_loadStoredForm(p.formID),lfb_initRichTextValues(p.formID),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"]').is(".lfb_visualEditing")||"0"==p.intro_enabled&&(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] .lfb_btnFloatingSummary').css({display:"inline-block"}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] .lfb_btnSaveForm').css({display:"inline-block"}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #btnStart,#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #startInfos').hide(),"2"!=p.showSteps?jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] .genPrice').fadeIn(500):jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] .genPrice').hide(),3==p.showSteps&&jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #lfb_stepper').fadeIn(500),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #mainPanel').fadeIn(p.animationsSpeed,function(){p.autoStart||jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"]').is(".lfb_visualEditing")||wpe_nextStep(p.formID)})),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"]  #lfb_loader').fadeOut()})}function lfb_replaceAllBackSlash(t){for(var e=t.indexOf("\\");0<=e;)e=(t=t.replace("\\","")).indexOf("\\");return t}function lfb_shineBtn(t,e){var a=wpe_getForm(t);e.attr({width:e.width(),height:e.height()}),e.css({borderRadius:e.parent().css("border-radius")});var r=e.get(0).getContext("2d");r.clearRect(0,0,e.width(),e.height());var i,o,p,s=r.createLinearGradient(0,0,e.width(),e.height());a.shineFxIndex+=.08,1<a.shineFxIndex?(r.clearRect(0,0,e.width(),e.height()),a.shineFxIndex=0):((o=(i=a.shineFxIndex)-.1)<0&&(o=0),1<(p=i+.1)&&(p=1),s.addColorStop(0,"transparent"),s.addColorStop(o,"rgba(255,255,255,0)"),s.addColorStop(i,"rgba(255,255,255,0.3)"),s.addColorStop(p,"rgba(255,255,255,0)"),s.addColorStop(1,"rgba(255,255,255,0)"),r.fillStyle=s,r.fillRect(0,0,e.width(),e.height()),setTimeout(function(){lfb_shineBtn(t,e)},30))}function lfb_updateLayerImages(i){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] .genSlide[data-stepid="'+form.step+'"] .lfb_layeredImage').each(function(){var r=parseInt(jQuery(this).closest(".genSlide").attr("data-stepid"));jQuery(this).find("img:not(.lfb_baseLayer)").each(function(){var t=lfb_replaceAllBackSlash(jQuery(this).attr("data-showconditions"));if(0<(t=t.replace(/'/g,'"')).length)try{var e=lfb_checkConditions(t=JSON.parse(t),i,r),a=jQuery(this).attr("data-showconditionsoperator");"OR"==a&&!e.errorOR||"OR"!=a&&!e.error?jQuery(this).fadeIn():jQuery(this).fadeOut()}catch(t){jQuery(this).fadeIn()}else jQuery(this).fadeIn()})})}function lfb_updateShowSteps(t){for(var e=0;e<lfb_plannedSteps.length;e++){var a=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"] .genSlide[data-stepid="'+lfb_plannedSteps[e]+'"]');if(a.is("[data-useshowconditions]")){var r=lfb_replaceAllBackSlash(a.attr("data-showconditions"));if(""!=(r=r.replace(/'/g,'"')))try{var i=lfb_checkConditions(r=JSON.parse(r),t,parseInt(jQuery(this).attr("data-stepid"))),o=a.attr("data-showconditionsoperator");"OR"==o&&!i.errorOR||"OR"!=o&&!i.error?a.is(".lfb_disabled")&&(a.css({opacity:0}),a.removeClass("lfb_disabled")):a.is(".lfb_disabled")||a.addClass("lfb_disabled")}catch(t){}}}jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"] .genSlide[data-useshowconditions]').each(function(){})}function lfb_updateShowItems(r){var t=wpe_getForm(r),e=lfb_lastSteps.slice();"final"!=t.step&&-1==jQuery.inArray(parseInt(t.step),e)?e.push(parseInt(t.step)):"final"==t.step&&e.push("final");for(var a=0;a<e.length;a++){var i=e[a];jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r+'"] .genSlide[data-stepid="'+i+'"] [data-useshowconditions]').each(function(){var t=lfb_replaceAllBackSlash(jQuery(this).attr("data-showconditions"));if(""!=(t=t.replace(/'/g,'"')))try{var e=lfb_checkConditions(t=JSON.parse(t),r,i),a=jQuery(this).attr("data-showconditionsoperator");"OR"==a&&!e.errorOR||"OR"!=a&&!e.error?(jQuery(this).is(".itemBloc")&&jQuery(this).is(".lfb_disabled")||0<jQuery(this).closest(".itemBloc").length&&jQuery(this).closest(".itemBloc").is(".lfb_disabled"))&&(jQuery(this).removeClass("lfb_disabled"),jQuery(this).closest(".itemBloc").removeClass("lfb_disabled"),jQuery(this).stop().animate({opacity:1},300),jQuery(this).is("input.prechecked")&&!jQuery(this).is(":checked")&&wpe_itemClick(jQuery(this),!1,r),jQuery(this).is(".selectable.prechecked")&&!jQuery(this).is(".checked")&&wpe_itemClick(jQuery(this),!1,r),jQuery(this).is(".lfb_button.prechecked")&&!jQuery(this).is(".checked")&&wpe_itemClick(jQuery(this),!1,r),(jQuery(this).is('input[type="text"]')||jQuery(this).is("textarea"))&&jQuery(this).is("[data-initialvalue]")&&jQuery(this).val(jQuery(this).attr("data-initialvalue")),jQuery(this).closest(".itemBloc").stop().fadeIn(100)):jQuery(this).is(".lfb_disabled")||(jQuery(this).css({opacity:1}),jQuery(this).is(":checked")&&wpe_itemClick(jQuery(this),!1,r),jQuery(this).is(".checked")&&wpe_itemClick(jQuery(this),!1,r),jQuery(this).is(".lfb_dropzone")&&jQuery(this).find(".dz-preview").remove(),jQuery(this).addClass("lfb_disabled"),jQuery(this).closest(".itemBloc").addClass("lfb_disabled"),jQuery(this).stop().animate({opacity:0},300),jQuery(this).closest(".itemBloc").stop().fadeOut(300))}catch(t){}})}}function lfb_removeFile(t,e){var a=wpe_getForm(t);jQuery.ajax({url:a.ajaxurl,type:"post",data:{action:"lfb_removeFile",formSession:jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a.formID+'"]').attr("data-formsession"),file:e}})}function wpe_disablesThemeScripts(){var t=!1;jQuery("script").each(function(){t&&(jQuery(this).attr("src")&&0<jQuery(this).attr("src").indexOf("WP_Helper_Creator")||jQuery(this).attr("src")&&0<jQuery(this).attr("src").indexOf("VisitorsTracker")||jQuery(this).attr("src")&&0<jQuery(this).attr("src").indexOf("WP_Visual_Chat")||jQuery(this).attr("src")&&0<jQuery(this).attr("src").indexOf("gravityforms")||(this.innerText||this.textContent).indexOf("analytics")<0&&0==jQuery(this).parents(".gform_wrapper").length&&jQuery(this).attr("disabled","disabled")),jQuery(this).attr("src")&&0<jQuery(this).attr("src").indexOf("estimation_popup")&&(t=!0)})}function wpe_initGform(e){var a=wpe_getForm(e);0<a.gravityFormID&&(a.gravitySent=!1,a.gFormDesignCheck++,a.timer_gFormDesign&&jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a.formID+'"] #finalSlide').delay(100).animate({opacity:1},1e3),jQuery("#gform_wrapper_"+a.gravityFormID+" input[type=radio]").not('[data-toggle="radio"]').attr("data-toggle","radio"),jQuery("#gform_wrapper_"+a.gravityFormID+"  .ginput_container input,#gform_wrapper_"+a.gravityFormID+"  .ginput_container select,#gform_wrapper_"+a.gravityFormID+" .ginput_container textarea").attr("title","control"),jQuery("#gform_wrapper_"+a.gravityFormID+"  .ginput_container input,#gform_wrapper_"+a.gravityFormID+"  .ginput_container textarea, #gform_wrapper_"+a.gravityFormID+" .ginput_container select").not("[type=checkbox]").not("[type=radio]").not("[type=submit]").addClass("form-control"),jQuery("#gform_wrapper_"+a.gravityFormID+"  .ginput_container").addClass("form-group"),jQuery("#gform_wrapper_"+a.gravityFormID+"  .gform_button").attr("class","btn btn-wide btn-primary"),jQuery("#gform_wrapper_"+a.gravityFormID+'  .gform_wrapper input[type="radio"]:not(.ready)').each(function(){jQuery(this).addClass("ready");jQuery("#gform_wrapper_"+a.gravityFormID+' .gform_wrapper label[for="'+jQuery(this).attr("id")+'"]').html();jQuery("#gform_wrapper_"+a.gravityFormID+'  .gform_wrapper label[for="'+jQuery(this).attr("id")+'"]').parent("li").css("display","inline-block"),jQuery("#gform_wrapper_"+a.gravityFormID+'  .gform_wrapper label[for="'+jQuery(this).attr("id")+'"]').append(jQuery(this)),jQuery("#gform_wrapper_"+a.gravityFormID+'  .gform_wrapper label[for="'+jQuery(this).attr("id")+'"]').addClass("radio"),jQuery("#gform_wrapper_"+a.gravityFormID+'  .gform_wrapper label[for="'+jQuery(this).attr("id")+'"]').prepend('<span class="icons"><span class="first-icon fui-radio-unchecked"></span><span class="second-icon fui-radio-checked"></span></span>'),jQuery("#gform_wrapper_"+a.gravityFormID+'  .gform_wrapper label[for="'+jQuery(this).attr("id")+'"]').parent("li").next().is("br")||jQuery("#gform_wrapper_"+a.gravityFormID+'  .gform_wrapper label[for="'+jQuery(this).attr("id")+'"]').parent("li").after("<br/>"),jQuery(this).is(":checked")&&jQuery(this).trigger("click")}),jQuery("#gform_wrapper_"+a.gravityFormID+'  .gform_wrapper input[type="checkbox"]:not(.ready)').each(function(){jQuery(this).addClass("ready");jQuery("#gform_wrapper_"+a.gravityFormID+'  .gform_wrapper label[for="'+jQuery(this).attr("id")+'"]').html();jQuery("#gform_wrapper_"+a.gravityFormID+'  .gform_wrapper label[for="'+jQuery(this).attr("id")+'"]').parent("li").css("display","inline-block"),jQuery("#gform_wrapper_"+a.gravityFormID+'  .gform_wrapper label[for="'+jQuery(this).attr("id")+'"]').append(jQuery(this)),jQuery("#gform_wrapper_"+a.gravityFormID+'  .gform_wrapper label[for="'+jQuery(this).attr("id")+'"]').addClass("checkbox"),jQuery(this).before('<span class="icons"><span class="first-icon fui-checkbox-unchecked"></span><span class="second-icon fui-checkbox-checked"></span></span>'),jQuery("#gform_wrapper_"+a.gravityFormID+'  .gform_wrapper label[for="'+jQuery(this).attr("id")+'"]').parent("li").next().is("br")||jQuery("#gform_wrapper_"+a.gravityFormID+'  .gform_wrapper label[for="'+jQuery(this).attr("id")+'"]').parent("li").after("<br/>")}),jQuery("#gform_wrapper_"+a.gravityFormID+"  .gform_wrapper label.checkbox").each(function(){0<jQuery(this).find("[type=checkbox]").length&&jQuery(this).find("[type=checkbox]").eq(1).remove(),jQuery(this).find("[type=checkbox]").is(":checked")&&jQuery(this).find("[type=checkbox]").trigger("click")}),0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a.formID+'"] #wtmt_paypalForm').length&&jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a.formID+'"] #wtmt_paypalForm  #btnOrderPaypal').hide(),jQuery(" #gform_submit_button_"+a.gravityFormID).click(function(t){t.preventDefault(),tld_selectionMode||a.gravitySent||(a.gravitySent=!0,jQuery(this).addClass("anim"),a.gFormDesignCheck=0,jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a.formID+'"] #finalSlide').delay(1e3).animate({opacity:0},1e3),jQuery(this),setTimeout(function(){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a.formID+'"] #finalSlide .gform_wrapper form').trigger("submit",[!0]),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a.formID+'"] #finalSlide .gform_wrapper form').submit(),a.timer_gFormDesign=setTimeout(function(){wpe_initGform(e)},2e3)},1e3))}))}function wpe_initPrice(t){var e=wpe_getForm(t);0<e.max_price?e.priceMax=e.max_price:(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e.formID+'"] #mainPanel .genSlide [data-price]').each(function(){var t;jQuery(this).data("price")&&0<jQuery(this).data("price")&&(0<jQuery(this).find(".icon_quantity").length?(t=10<(t=parseFloat(jQuery(this).find(".icon_quantity").html()))&&100<parseFloat(jQuery(this).data("price"))?10:30<t?30:parseFloat(jQuery(this).find(".quantityBtns").data("max")),"-"==jQuery(this).data("operation")||"/"==jQuery(this).data("operation")||(e.priceMax+=parseFloat(jQuery(this).data("price"))*t)):0<jQuery(this).find(".wpe_qtfield").length?(t=10<(t=parseFloat(jQuery(this).find(".wpe_qtfield").val()))&&100<parseFloat(jQuery(this).data("price"))?10:!(30<t)&&parseFloat(0<jQuery(this).find(".wpe_qtfield").attr("max").length)?parseFloat(jQuery(this).find(".wpe_qtfield").attr("max")):30,"-"==jQuery(this).data("operation")||"/"==jQuery(this).data("operation")||(e.priceMax+=parseFloat(jQuery(this).data("price"))*t)):"+"==jQuery(this).data("operation")&&(e.priceMax+=parseFloat(jQuery(this).data("price"))))}),e.priceMax+=e.initialPrice,jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+e.formID+'"] #mainPanel .genSlide [data-price][data-operation="x"]').each(function(){if(0<jQuery(this).find(".icon_quantity").length)for(var t=0;t<parseFloat(jQuery(this).find(".icon_quantity").html());t++)e.priceMax=e.priceMax+e.priceMax*parseFloat(jQuery(this).data("price"))/100;else e.priceMax=e.priceMax+e.priceMax*parseFloat(jQuery(this).data("price"))/100}))}function initFlatUI(){jQuery("#estimation_popup.wpe_bootstraped .input-group").on("focus",".form-control",function(){jQuery(this).closest(".input-group, .form-group").addClass("focus")}).on("blur",".form-control",function(){jQuery(this).closest(".input-group, .form-group").removeClass("focus")}),jQuery("#estimation_popup.wpe_bootstraped .pagination").on("click","a",function(){jQuery(this).parent().siblings("li").removeClass("active").end().addClass("active")}),jQuery("#estimation_popup.wpe_bootstraped .btn-group").on("click","a",function(){jQuery(this).siblings().removeClass("active").end().addClass("active")}),jQuery('#estimation_popup.wpe_bootstraped [data-toggle="switch"][data-checkboxstyle="switch"]').wrap('<div class="switch"  data-on-label="<i class=\'fui-check\'></i>" data-off-label="<i class=\'fui-cross\'></i>" />').parent().bootstrapSwitch(),jQuery('#estimation_popup.wpe_bootstraped [data-toggle="switch"][data-checkboxstyle="switch"]').on("change",function(){jQuery(this).is(":checked")||jQuery(this).removeClass("checked")}),jQuery("#estimation_popup.wpe_bootstraped input[type=checkbox][data-urltarget]").each(function(){jQuery(this).closest(".switch.has-switch").click(function(){var t;tld_selectionMode||0<jQuery(this).find(".switch-on").length&&("null"!=typeof(t=window.open(jQuery(this).find("input[type=checkbox][data-urltarget]").attr("data-urltarget"),"_blank"))&&null!=t&&t.focus())})}),0<jQuery("#estimation_popup.wpe_bootstraped .lfb_selectpicker").length&&(jQuery("#estimation_popup.wpe_bootstraped .lfb_selectpicker").selectpicker(),jQuery("#estimation_popup.wpe_bootstraped .lfb_selectpicker").each(function(){jQuery(this).closest(".itemBloc").find(".btn-group.lfb_bootstrap-select").attr("data-originaltitle",jQuery(this).attr("data-originaltitle")),jQuery(this).closest(".itemBloc").find(".btn-group.lfb_bootstrap-select").attr("data-original-title",jQuery(this).attr("data-original-title")),jQuery(this).closest(".itemBloc").find(".btn-group.lfb_bootstrap-select").attr("data-tooltiptext",jQuery(this).attr("data-tooltiptext")),jQuery(this).closest(".itemBloc").find(".btn-group.lfb_bootstrap-select").attr("data-tooltipimg",jQuery(this).attr("data-tooltipimg")),jQuery(this).closest(".itemBloc").find(".btn-group.lfb_bootstrap-select").attr("data-toggle",jQuery(this).attr("data-toggle")),jQuery(this).closest(".itemBloc").find(".btn-group.lfb_bootstrap-select").attr("data-placement",jQuery(this).attr("data-placement"))})),jQuery("#estimation_popup .input-group-addon").click(function(){jQuery(this).next("input").trigger("focus")})}function lfb_updateItemData(t,e){for(var a=!1,r=-1,i=0;i<t.itemsData.length;i++)if(t.itemsData[i].itemid==e){a=t.itemsData[i],r=i;break}var o,p,s,n,d,l,u,m,f,c,_,y,b,h=new Array,g=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t.formID+'"] .lfb_itemContainer_'+e);g.is(".lfb_disabled")?a&&(t.itemsData=jQuery.grep(t.itemsData,function(t){return t.itemid!=e})):(o=g.closest(".genSlide").attr("data-stepid"),p={},s=!0,0<g.find("div.selectable.checked").length&&(y=g.find("div.selectable.checked").get(0),jQuery(y).is("[data-resqt]")&&jQuery(y).data("resqt",jQuery(y).attr("data-resqt")),jQuery(y).is("[data-resprice]")&&jQuery(y).data("resprice",jQuery(y).attr("data-resprice")),!$panel.is('[data-showstepsum="0"]')&&jQuery(y).is('[data-showinsummary="true"]')||(s=!1),u=parseFloat(jQuery(y).data("resqt")),n=parseFloat(jQuery(y).data("resprice")),0==u&&(u=1),jQuery(y).data("price")&&("+"==jQuery(y).data("operation")?"left"==t.currencyPosition?n=t.currency+n:n+=t.currency:"-"==jQuery(y).data("operation")?"left"==t.currencyPosition?n="-"+t.currency+n:n+="-"+t.currency:n="/"==jQuery(y).data("operation")?"-"+jQuery(y).data("price")+"%":"+"+jQuery(y).data("price")+"%"),c=parseFloat(jQuery(y).data("resprice")),isNaN(c)&&(c=parseFloat(jQuery(y).data("price"))),_=!1,jQuery(y).is('[data-singleprice="true"]')&&(_=!0),-1==jQuery.inArray(jQuery(y).attr("data-itemid"),h)&&(h.push(jQuery(y).attr("data-itemid")),b=jQuery(y).attr("data-title"),jQuery(y).is("[data-original-title]")&&jQuery(y).is("[data-reducqt]")&&(b=jQuery(y).attr("data-original-title")),jQuery(y).is("[data-originaltitle]")&&jQuery(y).is('[data-showprice="1"]')&&(b=jQuery(y).attr("data-originaltitle")),jQuery(y).is("[data-originallabel]")&&(b=jQuery(y).attr("data-originallabel")),p={label:b,itemid:jQuery(y).attr("data-itemid"),price:c,quantity:u,step:$panel.attr("data-title"),stepid:o,showInSummary:s,isSinglePrice:_,image:jQuery(y).find(".img").attr("src")})),0<g.find("a.lfb_button.checked").length&&(y=g.find("a.lfb_button.checked").get(0),n=parseFloat(jQuery(y).data("price")),!$panel.is('[data-showstepsum="0"]')&&jQuery(y).is('[data-showinsummary="true"]')||(s=!1),jQuery(y).data("price")?("+"==jQuery(y).data("operation")?"left"==t.currencyPosition?n=t.currency+n:n+=t.currency:"-"==jQuery(y).data("operation")?"left"==t.currencyPosition?n="-"+t.currency+n:n+="-"+t.currency:n="/"==jQuery(y).data("operation")?"-"+n+"%":"+"+n+"%",jQuery(y).attr("data-originaltitle"),jQuery(y).is("select")&&jQuery(y).val()):(jQuery(y).attr("data-originaltitle"),jQuery(y).is("select")&&jQuery(y).val()),b=jQuery(y).attr("data-title"),jQuery(y).is("[data-originaltitle]")&&jQuery(y).is('[data-showprice="1"]')&&(b=jQuery(y).attr("data-originaltitle")),jQuery(y).is("[data-originallabel]")&&(b=jQuery(y).attr("data-originallabel")),jQuery(y).is("select")&&(b+=" : "+jQuery(y).val()),_=!1,jQuery(y).is('[data-singleprice="true"]')&&(_=!0),-1==jQuery.inArray(jQuery(y).attr("data-itemid"),h)&&(h.push(jQuery(y).attr("data-itemid")),p={label:b,itemid:jQuery(y).attr("data-itemid"),type:g.attr("data-itemtype"),price:parseFloat(jQuery(y).data("resprice")),quantity:1,step:$panel.attr("data-title"),stepid:o,showInSummary:s,isSinglePrice:_})),0<g.find("input[type=checkbox]:checked").length&&(y=g.find("input[type=checkbox]:checked").get(0),n=parseFloat(jQuery(y).data("price")),!$panel.is('[data-showstepsum="0"]')&&jQuery(y).is('[data-showinsummary="true"]')||(s=!1),jQuery(y).data("price")?("+"==jQuery(y).data("operation")?"left"==t.currencyPosition?n=t.currency+n:n+=t.currency:"-"==jQuery(y).data("operation")?"left"==t.currencyPosition?n="-"+t.currency+n:n+="-"+t.currency:n="/"==jQuery(y).data("operation")?"-"+n+"%":"+"+n+"%",jQuery(y).attr("data-originaltitle"),jQuery(y).is("select")&&jQuery(y).val()):(jQuery(y).attr("data-originaltitle"),jQuery(y).is("select")&&jQuery(y).val()),b=jQuery(y).attr("data-title"),jQuery(y).is("[data-originaltitle]")&&jQuery(y).is('[data-showprice="1"]')&&(b=jQuery(y).attr("data-originaltitle")),jQuery(y).is("[data-originallabel]")&&(b=jQuery(y).attr("data-originallabel")),jQuery(y).is("select")&&(b+=" : "+jQuery(y).val()),_=!1,jQuery(y).is('[data-singleprice="true"]')&&(_=!0),-1==jQuery.inArray(jQuery(y).attr("data-itemid"),h)&&(h.push(jQuery(y).attr("data-itemid")),p={label:b,itemid:jQuery(y).attr("data-itemid"),type:g.attr("data-itemtype"),price:parseFloat(jQuery(y).data("resprice")),quantity:1,step:$panel.attr("data-title"),stepid:o,showInSummary:s,isSinglePrice:_})),g.is(".lfb_richtext")&&!g.is(".lfb_shortcode")&&(y=g.get(0),!$panel.is('[data-showstepsum="0"]')&&jQuery(y).is('[data-showinsummary="true"]')||(s=!1),-1==jQuery.inArray(jQuery(y).attr("data-itemid"),h)&&(h.push(jQuery(y).attr("data-itemid")),p={label:jQuery(y).attr("data-title"),itemid:jQuery(y).attr("data-itemid"),type:g.attr("data-itemtype"),value:jQuery(y).html(),step:$panel.attr("data-title"),stepid:o,showInSummary:s})),0<g.find('div[data-type="slider"][data-itemid]').length&&(y=g.find('div[data-type="slider"]').get(0),n=parseFloat(jQuery(y).data("price")),!$panel.is('[data-showstepsum="0"]')&&jQuery(y).is('[data-showinsummary="true"]')||(s=!1),0==(u=parseFloat(jQuery(y).slider("value")))&&(u=1),jQuery(y).data("price")?("+"==jQuery(y).data("operation")?"left"==t.currencyPosition?n=t.currency+n:n+=t.currency:"-"==jQuery(y).data("operation")?"left"==t.currencyPosition?n="-"+t.currency+n:n+="-"+t.currency:n="/"==jQuery(y).data("operation")?"-"+n+"%":"+"+n+"%",jQuery(y).attr("data-originaltitle"),jQuery(y).is("select")&&jQuery(y).val()):(jQuery(y).attr("data-originaltitle"),jQuery(y).is("select")&&jQuery(y).val()),b=jQuery(y).attr("data-title"),jQuery(y).is("[data-originaltitle]")&&jQuery(y).is('[data-showprice="1"]')&&(b=jQuery(y).attr("data-originaltitle")),jQuery(y).is("[data-originallabel]")&&(b=jQuery(y).attr("data-originallabel")),jQuery(y).is("select")&&(b+=" : "+jQuery(y).val()),_=!1,jQuery(y).is('[data-singleprice="true"]')&&(_=!0),-1==jQuery.inArray(jQuery(y).attr("data-itemid"),h)&&(h.push(jQuery(y).attr("data-itemid")),p={label:b,itemid:jQuery(y).attr("data-itemid"),type:g.attr("data-itemtype"),price:parseFloat(jQuery(y).data("resprice")),quantity:parseFloat(jQuery(y).slider("value")),step:$panel.attr("data-title"),stepid:o,showInSummary:s,isSinglePrice:_})),0<g.find("select[data-itemid]").length&&(y=g.find("select[data-itemid]").get(0),n=parseFloat(jQuery(y).data("price")),!$panel.is('[data-showstepsum="0"]')&&jQuery(y).is('[data-showinsummary="true"]')||(s=!1),jQuery(y).data("price")&&0<jQuery(y).data("price")?("+"==jQuery(y).data("operation")?"left"==t.currencyPosition?n=t.currency+n:n+=t.currency:"-"==jQuery(y).data("operation")?"left"==t.currencyPosition?n="-"+t.currency+n:n+="-"+t.currency:n="/"==jQuery(y).data("operation")?"-"+n+"%":"+"+n+"%",jQuery(y).attr("data-originaltitle"),jQuery(y).is("select")&&jQuery(y).val()):(jQuery(y).attr("data-originaltitle"),jQuery(y).is("select")&&jQuery(y).val()),b=jQuery(y).attr("data-title"),jQuery(y).is("[data-originallabel]")&&(b=jQuery(y).attr("data-originallabel")),_=!1,jQuery(y).is('[data-singleprice="true"]')&&(_=!0),-1==jQuery.inArray(jQuery(y).attr("data-itemid"),h)&&(h.push(jQuery(y).attr("data-itemid")),p={label:b,itemid:jQuery(y).attr("data-itemid"),type:g.attr("data-itemtype"),price:parseFloat(jQuery(y).data("resprice")),value:jQuery(y).val(),quantity:1,step:$panel.attr("data-title"),stepid:o,showInSummary:s,isSinglePrice:_})),0<g.find("input[type=file]").length&&(y=g.find("input[type=file]").get(0),!$panel.is('[data-showstepsum="0"]')&&jQuery(y).is('[data-showinsummary="true"]')||(s=!1),!$panel.is('[data-showstepsum="0"]')&&jQuery(y).is('[data-showinsummary="true"]')||(s=!1),b=jQuery(y).data("title"),jQuery(y).is("[data-originallabel]")&&(b=jQuery(y).attr("data-originallabel")),-1==jQuery.inArray(jQuery(y).attr("data-itemid"),h)&&(h.push(jQuery(y).attr("data-itemid")),p={label:b,itemid:jQuery(y).attr("data-itemid"),type:g.attr("data-itemtype"),value:jQuery(y).val(),step:$panel.attr("data-title"),stepid:o,showInSummary:s,isFile:!0})),0<g.find(".lfb_dropzone").length&&(y=g.find(".lfb_dropzone").get(0),!$panel.is('[data-showstepsum="0"]')&&jQuery(y).is('[data-showinsummary="true"]')||(s=!1),d="",l=new Array,jQuery(y).find(".dz-preview[data-file]:not(.dz-error)").each(function(){l.push(jQuery(this).attr("data-file").replace(/ /g,"_")),d+=' - <span class="lfb_file">'+jQuery(this).attr("data-file").replace(/ /g,"_")+"</span><br/>",jQuery(this).attr("data-file").replace(/ /g,"_")}),b=jQuery(y).data("title"),jQuery(y).is("[data-originallabel]")&&(b=jQuery(y).attr("data-originallabel")),-1==jQuery.inArray(jQuery(y).attr("data-itemid"),h)&&(h.push(jQuery(y).attr("data-itemid")),p={label:b,itemid:jQuery(y).attr("data-itemid"),type:g.attr("data-itemtype"),value:d,step:$panel.attr("data-title"),stepid:o,showInSummary:s,isFile:!0,files:l})),0<g.find("input[type=text][data-itemid]:not(.lfb_colorpicker)").length&&(y=g.find("input[type=text]:not(.lfb_colorpicker)").get(0),!$panel.is('[data-showstepsum="0"]')&&jQuery(y).is('[data-showinsummary="true"]')||(s=!1),b=jQuery(y).data("title"),jQuery(y).is("[data-originallabel]")&&(b=jQuery(y).attr("data-originallabel")),-1==jQuery.inArray(jQuery(y).attr("data-itemid"),h)&&(h.push(jQuery(y).attr("data-itemid")),p={label:b,itemid:jQuery(y).attr("data-itemid"),type:g.attr("data-itemtype"),value:jQuery(y).val(),step:$panel.attr("data-title"),stepid:o,showInSummary:s})),0<g.find("input[type=number][data-itemid]:not(.lfb_colorpicker)").length&&(y=g.find("input[type=number]:not(.lfb_colorpicker)").get(0),!$panel.is('[data-showstepsum="0"]')&&jQuery(y).is('[data-showinsummary="true"]')||(s=!1),u=parseFloat(jQuery(y).val()),m=jQuery(y).val(),c=f=void 0,jQuery(y).is('[data-valueasqt="1"]')&&(m=void 0,f=jQuery(y).val(),c=parseFloat(jQuery(y).data("resprice")),isNaN(c)&&(c=parseFloat(jQuery(y).data("price")))),_=!1,jQuery(y).is('[data-singleprice="true"]')&&(_=!0),b=jQuery(y).data("title"),jQuery(y).is("[data-originallabel]")&&(b=jQuery(y).attr("data-originallabel")),-1==jQuery.inArray(jQuery(y).attr("data-itemid"),h)&&(h.push(jQuery(y).attr("data-itemid")),p={label:b,itemid:jQuery(y).attr("data-itemid"),type:g.attr("data-itemtype"),value:m,quantity:f,price:c,step:$panel.attr("data-title"),stepid:o,showInSummary:s,isSinglePrice:_})),0<g.find(".lfb_colorPreview").length&&(y=g.find(".lfb_colorPreview").get(0),!$panel.is('[data-showstepsum="0"]')&&jQuery(y).is('[data-showinsummary="true"]')||(s=!1),b=jQuery(y).data("title"),jQuery(y).is("[data-originallabel]")&&(b=jQuery(y).attr("data-originallabel")),-1==jQuery.inArray(jQuery(y).attr("data-itemid"),h)&&(h.push(jQuery(y).attr("data-itemid")),p={label:b,itemid:jQuery(y).attr("data-itemid"),type:g.attr("data-itemtype"),value:jQuery(y).next(".lfb_colorpicker").val(),step:$panel.attr("data-title"),stepid:o,showInSummary:s})),0<g.find("textarea").length&&(y=g.find("textarea").get(0),!$panel.is('[data-showstepsum="0"]')&&jQuery(y).is('[data-showinsummary="true"]')||(s=!1),b=jQuery(y).data("title"),jQuery(y).is("[data-originallabel]")&&(b=jQuery(y).attr("data-originallabel")),-1==jQuery.inArray(jQuery(y).attr("data-itemid"),h)&&(h.push(jQuery(y).attr("data-itemid")),p={label:b,itemid:jQuery(y).attr("data-itemid"),type:g.attr("data-itemtype"),value:wpe_nl2br(jQuery(y).val()),step:$panel.attr("data-title"),stepid:o,showInSummary:s})),0<g.find(".lfb_rate").length&&(y=g.get(0),!$panel.is('[data-showstepsum="0"]')&&jQuery(y).is('[data-showinsummary="true"]')||(s=!1),b=jQuery(y).data("title"),jQuery(y).is("[data-originallabel]")&&(b=jQuery(y).attr("data-originallabel")),-1==jQuery.inArray(jQuery(y).attr("data-itemid"),h)&&(h.push(jQuery(y).attr("data-itemid")),p={label:b,itemid:jQuery(y).attr("data-itemid"),type:g.attr("data-itemtype"),value:g.find(".lfb_rate").rate("getValue"),step:$panel.attr("data-title"),stepid:o,showInSummary:s})),a?t.itemsData[r]=p:t.itemsData.push(p))}function lfb_getItemData(t,e){for(var a=!1,r=0;r<t.itemsData.length;r++)if(t.itemsData[r].itemid==e){a=t.itemsData[r];break}return a}function wpe_getFormContent(t,e,a){var r=wpe_getForm(t),i="",o="",p="",s=new Array;o+="Ref : "+r.current_ref+" \n";var n=lfb_lastSteps.slice();e&&"final"!=r.step&&n.push(r.step),"final"==r.step&&n.push("final"),void 0!==a&&0!=a&&(n=new Array).push(a);new Array;for(var d=0;d<n.length;d++){var l=n[d];if($panel=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"] #mainPanel .genSlide[data-stepid="'+l+'"]'),("final"==$panel.attr("data-stepid")||0<=jQuery.inArray(parseInt($panel.attr("data-stepid")),lfb_plannedSteps))&&!jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"] #mainPanel .genSlide[data-title][data-stepid="'+l+'"]').is(".lfb_disabled")){var u=$panel.attr("data-stepid");"final"!=u&&(u=parseInt(u)),i+="<br/><p><u><b>"+$panel.data("title")+" :</b></u></p><br/>",o+="\n\n---------"+$panel.data("title")+" :---------\n";var m=new Array;$panel.find(".itemBloc:not(.lfb_disabled)").each(function(){var t=0,t=0<jQuery(this).find("[data-itemid]").length?jQuery(this).find("[data-itemid]").attr("data-itemid"):jQuery(this).attr("data-itemid"),e=lfb_getItemData(r,t);e&&(s.push(e),m.push(e))});for(var f=0;f<m.length;f++)"richtext"!=m[f].type&&m[f].showInSummary&&void 0!==m[f].label&&(void 0!==m[f].price&&0<m[f].price?void 0!==m[f].value?(i+="    - "+m[f].label+" : "+m[f].value+" ("+m[f].price+")<br/>",o+=" - "+m[f].label+" : "+m[f].value+" ("+m[f].price+")\n"):void 0!==m[f].quantity&&1<m[f].quantity?(i+="    - "+m[f].label+" : "+m[f].quantity+" ("+m[f].price+")<br/>",o+=" - "+m[f].label+" : "+m[f].quantity+" ("+m[f].price+")\n"):(i+="    - "+m[f].label+" : "+m[f].price+"<br/>",o+=" - "+m[f].label+" : "+m[f].price+"\n"):void 0!==m[f].value?(i+="    - "+m[f].label+" : "+m[f].value+"<br/>",o+=" - "+m[f].label+" : "+m[f].value+"\n"):void 0!==m[f].quantity&&1<m[f].quantity?(i+="    - "+m[f].label+" : "+m[f].quantity+"<br/>",o+=" - "+m[f].label+" : "+m[f].quantity+"\n"):(i+="    - "+m[f].label+"<br/>",o+=" - "+m[f].label+"\n"))}}(!r.price||r.price<0)&&(r.price=0);var c;return/^\d+(\.\d{2})?$/.test(r.price)||(r.price=parseFloat(r.price).toFixed(2)),""!=r.discountCode&&(0<r.reductionResult?(c=parseFloat(r.reductionResult).toFixed(2)+r.currency,"left"==r.currencyPosition&&(c=r.currency+parseFloat(r.reductionResult).toFixed(2)),i+="<br/> Coupon : "+r.discountCode+" ("+c+")"):i+="<br/> Coupon : "+r.discountCode),"left"==r.currencyPosition?(p+=r.currency+wpe_formatPrice(parseFloat(r.price).toFixed(2),t),o+="\n\nTotal : "+r.currency+wpe_formatPrice(parseFloat(r.price).toFixed(2),t)):(p+=wpe_formatPrice(parseFloat(r.price).toFixed(2),t)+r.currency,o+="\n\nTotal : "+wpe_formatPrice(parseFloat(r.price).toFixed(2),t)+r.currency),new Array(i,p,s,o)}function wpe_check_gform_response(t){var e,a,r=wpe_getForm(t);0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #gforms_confirmation_message').length&&(clearInterval(r.timer_gFormSubmit),0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #wtmt_paypalForm').length&&0<r.price?(e=r.price,"percent"==r.payMode?e=parseFloat(e)*(parseFloat(r.percentToPay)/100):"fixed"==r.payMode&&(e=parseFloat(r.fixedToPay)),e=parseFloat(e).toFixed(2),0<r.priceSingle?(a=r.priceSingle,"percent"==r.payMode?a=parseFloat(a)*(parseFloat(r.percentToPay)/100):"fixed"==r.payMode&&(a=parseFloat(r.fixedToPay)),0==jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #wtmt_paypalForm [name=a1]').length&&(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #wtmt_paypalForm').append('<input type="hidden" name="a1" value="0">'),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #wtmt_paypalForm').append('<input type="hidden" name="p1" value="1">'),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #wtmt_paypalForm').append('<input type="hidden" name="t1" value="M">')),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #wtmt_paypalForm [name=a1]').val(a),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #wtmt_paypalForm [name=p1]').val(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #wtmt_paypalForm [name=p3]').val())):(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #wtmt_paypalForm [name=a1]').remove(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #wtmt_paypalForm [name=t1]').remove(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #wtmt_paypalForm [name=p1]').remove()),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #wtmt_paypalForm [name=amount]').val(e),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #wtmt_paypalForm [name=a3]').val(e),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #wtmt_paypalForm [name=item_number]').val(r.current_ref),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #wtmt_paypalForm [name=item_name]').val(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #wtmt_paypalForm [name=item_name]').val()+" - "+r.current_ref),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #wtmt_paypalForm [type="submit"]').trigger("click")):(jQuery("#finalText").html(jQuery("#gform_wrapper_"+r.gravityFormID+" .gforms_confirmation_message").html()),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #finalSlide #gforms_confirmation_message').fadeIn(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #finalSlide #lfb_summary').fadeOut(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #finalSlide #lfb_couponContainer').fadeOut(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #finalSlide #lfb_legalNoticeContent').fadeOut(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #finalSlide .linkPrevious').fadeOut(),wpe_finalStep(t)))}function wpe_quantity_less(t,e){var a=jQuery(t).parent().parent().find(".icon_quantity"),r=parseFloat(jQuery(t).parent().data("min")),i=parseInt(a.html());1<i&&r<i&&(i--,a.html(i),wpe_updatePrice(e))}function wpe_quantity_more(t,e){var a=jQuery(t).parent().parent().find(".icon_quantity"),r=parseFloat(jQuery(t).parent().data("max")),i=parseFloat(a.html());(i<r||0==r)&&(i++,a.html(i),wpe_updatePrice(e))}function wpe_checkEmail(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}function wpe_isIframe(){try{return window.self!==window.top}catch(t){return!0}}function wpe_cloneSummary(t,e){var a=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] #lfb_summary').clone();"table-row"!=a.find("#lfb_summaryDiscountTr").css("display")&&a.find("#lfb_summaryDiscountTr").remove(),jQuery("body").is(".rtl")&&(a.css({textAlign:"right",direction:"rtl"}),a.find("table").css({textAlign:"right",direction:"rtl"})),a.addClass("lfb-hidden"),a.uniqueId();var r=4;return"1"==form.summary_showAllPricesEmail&&a.find(".lfb_hidePrice").removeClass("lfb_hidePrice").removeClass("lfb-hidden"),a.find("thead th").each(function(){jQuery(this).is(".lfb-hidden")&&r--}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] #lfb_summary').after(a),a.children("h4").remove(),a.find("*:not(.lfb_value)").each(function(){jQuery(this).css({fontSize:jQuery(this).css("font-size"),padding:jQuery(this).css("padding"),textAlign:jQuery(this).css("text-align"),lineHeight:jQuery(this).css("line-height")})}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] #lfb_summary table thead > tr > th:eq(1)').is(".lfb-hidden")&&(a.find("table thead > tr > th:eq(1)").remove(),a.find("table tbody td.lfb_valueTd").remove()),a.find("th.sfb_summaryStep").attr("align","center"),a.find("table").attr("width","90%"),a.find("table").css("width","90%"),a.find("table").attr("border","1"),a.find("table").attr("bordercolor",lfb_rgb2hex(a.find("table").css("border-color"))),a.find("table").attr("style","width:90%;margin:0 auto;"),a.find("thead td, thead th").each(function(){jQuery(this).attr("bgcolor",lfb_rgb2hex(a.find("thead").css("background-color"))),jQuery(this).css("background",lfb_rgb2hex(a.find("thead").css("background-color")))}),a.find("th").each(function(){jQuery(this).attr("bgcolor",lfb_rgb2hex(jQuery(this).css("background-color")))}),a.find("td,th").each(function(){jQuery(this).attr("color",lfb_rgb2hex(jQuery(this).css("color"))),jQuery(this).html('<span style="color: '+lfb_rgb2hex(jQuery(this).css("color"))+"; font-size: "+jQuery(this).css("font-size")+'">'+jQuery(this).html()+"</span>")}),a.find("table .lfb-hidden").remove(),a.find("table").attr("cellspacing","0"),a.find("table").attr("cellpadding","8"),a.find("table").attr("bgcolor","#FFFFFF"),a.find("td,th").each(function(){jQuery(this).attr("align",jQuery(this).css("text-align")),jQuery(this).css("padding",jQuery(this).css("padding"))}),"1"==form.summary_showAllPricesEmail&&(a.find(".sfb_summaryStep").attr("colspan",r),a.find("#lfb_summaryDiscountTr>th:eq(0),#sfb_summaryTotalTr>th:eq(0)").attr("colspan",r-1)),3==r?(a.find("td:not(:first-child)").each(function(){jQuery(this).attr("width","164")}),a.find("th:not(:first-child)").each(function(){jQuery(this).attr("width","164")}),a.find("tr>td:first-child").each(function(){jQuery(this).attr("width","340")}),a.find("tr>th:first-child").each(function(){jQuery(this).attr("width","340")})):(a.find("td:not(:first-child)").each(function(){jQuery(this).attr("width","103")}),a.find("th:not(:first-child)").each(function(){jQuery(this).attr("width","103")}),a.find("tr>td:first-child").each(function(){jQuery(this).attr("width","332")}),a.find("tr>th:first-child").each(function(){jQuery(this).attr("width","332")})),a.find("*:not(.lfb_value)").each(function(){var t=lfb_rgb2hex(jQuery(this).css("color"));jQuery(this).css({color:""}),jQuery(this).attr("style",jQuery(this).attr("style")+";color:"+t),0<jQuery(this).attr("style").length?jQuery(this).attr("style",jQuery(this).attr("style")+";color:"+t):jQuery(this).attr("style","color:"+t)}),a.find("[data-tldinit]").removeAttr("data-tldinit"),a.find(".lfb_file").each(function(){jQuery(this).removeAttr("style"),jQuery(this).removeAttr("data-tldinit")}),a.html('<div id="lfb_summaryCt" style="padding-top: 24px;padding-bottom: 24px; text-align: center;">'+a.html()+"</div>"),a}function wpe_getContactInformations(t,e){var a;e?a={email:"",phone:"",firstName:"",lastName:"",address:"",city:"",state:"",zip:"",country:"",job:"",phoneJob:"",url:"",company:""}:((a=new Array).email="",a.phone="",a.firstName="",a.lastName="",a.address="",a.city="",a.state="",a.zip="",a.country="",a.job="",a.phoneJob="",a.url="",a.company=""),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"] [data-fieldtype="email"]').each(function(){0<jQuery(this).val().length&&wpe_checkEmail(jQuery(this).val())&&(a.email=jQuery(this).val())});jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"] [data-fieldtype="phone"]').each(function(){3<jQuery(this).val().length&&(a.phone=jQuery(this).val())});jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"] [data-fieldtype="firstName"]').each(function(){0<jQuery(this).val().length&&(a.firstName=jQuery(this).val())});jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"] [data-fieldtype="lastName"]').each(function(){0<jQuery(this).val().length&&(a.lastName=jQuery(this).val())});jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"] [data-fieldtype="address"]').each(function(){0<jQuery(this).val().length&&(a.address=jQuery(this).val())});jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"] [data-fieldtype="city"]').each(function(){0<jQuery(this).val().length&&(a.city=jQuery(this).val())});return jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"] [data-fieldtype="state"]').each(function(){0<jQuery(this).val().length&&(a.state=jQuery(this).val())}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"] [data-fieldtype="zip"]').each(function(){0<jQuery(this).val().length&&(a.zip=jQuery(this).val())}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"] [data-fieldtype="country"]').each(function(){0<jQuery(this).val().length&&(a.country=jQuery(this).val())}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"] [data-fieldtype="job"]').each(function(){0<jQuery(this).val().length&&(a.job=jQuery(this).val())}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"] [data-fieldtype="phoneJob"]').each(function(){0<jQuery(this).val().length&&(a.phoneJob=jQuery(this).val())}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"] [data-fieldtype="url"]').each(function(){0<jQuery(this).val().length&&(a.url=jQuery(this).val())}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"] [data-fieldtype="company"]').each(function(){0<jQuery(this).val().length&&(a.company=jQuery(this).val())}),a}function lfb_getUrlVariables(r,t){var e,i=wpe_getForm(r),o="";return jQuery.each(t,function(){var t,e,a;0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r+'"] [data-itemid="'+this.itemid+'"]').length&&((t=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r+'"] [data-itemid="'+this.itemid+'"]')).is('[data-urlvariable="1"]')&&(e="1",void 0!==this.price?e=this.price:void 0!==this.value&&(e=this.value.replace(/\+/g,"%2b")),void 0!==this.quantity&&0<this.quantity&&(void 0===this.price||0==this.price)&&void 0===this.value&&(e=this.quantity),void 0!==this.price&&void 0!==this.value&&0==this.price&&0<this.value.length&&(e=this.value.replace(/\+/g,"%2b")),t.is("select")&&0==this.price&&(e=this.value.replace(/\+/g,"%2b")),t.is(".lfb_dropzone")&&(e=(e=(e=(e="").replace(/<span class="lfb_file">/g,"")).replace(/<\/span>/g,"")).substr(3,e.length),1==i.emailCustomerLinks&&(e="",t.find(".dz-success.dz-complete").each(function(){e+=jQuery(this).attr("data-url")+","}),0<e.length&&(e=e.substr(0,e.length-1)))),a=0<(a=t.attr("data-variablename")).length&&0<a.replace(/ /g,"").length?lfb_formatForUrl(a):lfb_formatForUrl(this.label),"string"==typeof e&&(e=e.replace(/<br\s*[\/]?>/gi,"\n")),o+="&"+a+"="+e))}),0<o.length?(o="?"+o.substr(1,o.length),void 0!==i.orderRef&&(e=i.refVarName,o+="&"+e+"="+i.orderRef),""!=i.discountCode&&(o+="&coupon="+i.discountCode)):void 0!==i.orderRef?(e=i.refVarName,o+="?"+e+"="+i.orderRef,""!=i.discountCode&&(o+="&coupon="+i.discountCode)):""!=i.discountCode&&(o+="?coupon="+i.discountCode),o}function lfb_formatForUrl(t){return t=(t=t.replace(/ /g,"_")).replace(/[^\w\s]/gi,"")}function wpe_orderSend(n,t,e,a){var d=wpe_getForm(n),l=wpe_getFormContent(n),r=(r=l[0]).replace(/<br\/>/g,"[n]"),i=l[1],o=l[2];d.urlVariables="",1==d.sendUrlVariables&&(d.urlVariables=lfb_getUrlVariables(n,l[2],!0)),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+n+'"]').is("[data-subs]")&&(i+=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+n+'"]').attr("data-subs"));var p=0,u=!0;jQuery('#estimation_popup.wpe_bootstraped[data-form="'+n+'"] [data-activatePaypal="true"]:not(:checked):not(.checked)').each(function(){var t=jQuery(this).closest(".genSlide").attr("data-stepid");"final"!=t&&(t=parseInt(t)),-1==jQuery.inArray(t,lfb_lastSteps)||(u=!1)}),0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+n+'"]').find('[data-dontactivatepaypal="true"].checked,[data-dontactivatepaypal="true"]:checked').length&&(u=!1),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+n+'"] #wtmt_paypalForm').is('[data-useipn="1"]')&&(p=1);var m=wpe_cloneSummary(!1,n),s=m.html();m.remove();var f=wpe_getContactInformations(n);e=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+n+'"] .emailField').val(),wpe_checkEmail(f.email)&&(e=f.email);var c=parseFloat(d.price),_=0,y="",b=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+d.formID+'"]').attr("data-formtitle");jQuery('#estimation_popup.wpe_bootstraped[data-form="'+d.formID+'"]').is('[data-isSubs="true"]')&&(c=parseFloat(d.priceSingle),_=parseFloat(d.price),y=d.subscriptionText);var h=new Array;jQuery('#estimation_popup.wpe_bootstraped[data-form="'+d.formID+'"] #finalSlide input[type=text],#estimation_popup.wpe_bootstraped[data-form="'+d.formID+'"] #finalSlide input[type=email], #estimation_popup.wpe_bootstraped[data-form="'+d.formID+'"] #finalSlide textarea').each(function(){0==jQuery(this).closest("#wtmt_paypalForm").length&&h.push({fieldID:jQuery(this).prop("id").substr(6,9),value:wpe_nl2br(jQuery(this).val())})});u=!0;jQuery('#estimation_popup.wpe_bootstraped[data-form="'+n+'"] [data-activatePaypal="true"]:not(:checked):not(.checked)').each(function(){var t=jQuery(this).closest(".genSlide").attr("data-stepid");"final"!=t&&(t=parseInt(t)),-1==jQuery.inArray(t,lfb_lastSteps)||(u=!1)}),0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+n+'"]').find('[data-dontactivatepaypal="true"].checked,[data-dontactivatepaypal="true"]:checked').length&&(u=!1);if("undefined"!=typeof ga)try{ga("set","page",location.pathname+"#Form+sent"),ga("send","pageview")}catch(t){}d.emailSent=!0,null!==localStorage.getItem("lfb_savedFormID")&&parseInt(localStorage.getItem("lfb_savedFormID"))==n&&null!==localStorage.getItem("lfb_savedForm")&&(localStorage.removeItem("lfb_savedFormID"),localStorage.removeItem("lfb_formsession"),localStorage.removeItem("lfb_savedForm"),localStorage.removeItem("lfb_savedFormPastSteps"),localStorage.removeItem("lfb_savedFormStep")),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+n+'"] .lfb_btnSaveForm').fadeOut();var g=new Array;jQuery('#estimation_popup.wpe_bootstraped[data-form="'+n+'"] .lfb_datepicker[data-calendarid!="0"][data-registerevent="1"]').each(function(){var t,e;""!=jQuery(this).val()&&((t={}).calendarID=parseInt(jQuery(this).attr("data-calendarid")),t.duration=parseInt(jQuery(this).attr("data-eventduration")),t.durationType=jQuery(this).attr("data-eventdurationtype"),"mins"==t.durationType&&(t.durationType="minutes"),t.isBusy=parseInt(jQuery(this).attr("data-eventbusy")),t.categoryID=parseInt(jQuery(this).attr("data-eventcategory")),t.startDate=moment(jQuery(this).datetimepicker("getDate")).format("YYYY-MM-DD HH:mm"),t.endDate=moment(jQuery(this).datetimepicker("getDate")).add(t.duration,t.durationType).format("YYYY-MM-DD HH:mm"),t.title=jQuery(this).attr("data-eventtitle"),"date"==jQuery(this).attr("data-datetype")?(t.startDate=moment(jQuery(this).datetimepicker("getDate")).format("YYYY-MM-DD"),t.endDate=moment(jQuery(this).datetimepicker("getDate")).add(t.duration,t.durationType).format("YYYY-MM-DD"),t.startDate==t.endDate&&(t.fullDay=1)):t.fullDay=0,"1"==jQuery(this).attr("data-useasdaterange")&&(e=jQuery(this).attr("data-enddaterangeid"),0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+n+'"] [data-itemid="'+e+'"]').length&&(t.fullDay=0,"date"==jQuery(this).attr("data-datetype")?t.endDate=moment(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+n+'"] [data-itemid="'+e+'"]').datetimepicker("getDate")).format("YYYY-MM-DD"):t.endDate=moment(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+n+'"] [data-itemid="'+e+'"]').datetimepicker("getDate")).format("YYYY-MM-DD HH:mm"))),g.push(t))}),void 0!==d.verifiedEmail&&d.verifiedEmail?e=d.verifiedEmail:d.verifiedEmail="";var j="";1==d.useSignature&&(j=d.signature.signature("toDataURL","image/png")),jQuery.ajax({url:d.ajaxurl,type:"post",data:{action:"send_email",formID:d.formID,informations:t,email:e,customerInfos:wpe_getContactInformations(d.formID,!0),summary:s,stripeCustomerID:d.stripeCustomerID,stripeToken:d.stripeToken,stripeSrc:d.stripeSrc,totalTxt:i,email_toUser:d.email_toUser,usePaypalIpn:p,discountCode:d.discountCode,formSession:jQuery('#estimation_popup.wpe_bootstraped[data-form="'+d.formID+'"] #lfb_formSession').val(),totalText:jQuery('#estimation_popup.wpe_bootstraped[data-form="'+d.formID+'"] #finalPrice').text(),total:c,totalSub:_,subFrequency:y,formTitle:b,contactSent:d.contactSent,contentTxt:r,items:o,fieldsLast:h,activatePaypal:u,captcha:d.captcha,useRtl:jQuery("body").is(".rtl"),finalUrl:lfb_getRedirectionURL(d.formID),eventsData:JSON.stringify(g),razorpayReady:d.razorpayReady,variables:JSON.stringify(d.variables),verifiedEmail:d.verifiedEmail,signature:j},success:function(t){var e,a,r,i,o,p,s=!1;d.orderRef=t,1==d.sendUrlVariables&&(d.urlVariables=lfb_getUrlVariables(n,l[2])),"1"==d.enableZapier&&0<d.zapierWebHook.length&&(1<(e=lfb_getUrlVariables(n,l[2])).length&&(s=!0,e=e.substr(1,e.length),jQuery.ajax({url:d.zapierWebHook,type:"get",data:e,success:function(){wpe_finalStep(n)}}))),m.remove(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+n+'"] #lfb_loader').delay(1e3).fadeOut(),u&&void 0===d.stripePaid&&0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+d.formID+'"] #wtmt_paypalForm').length&&(0<d.price||0<d.priceSingle)&&(a=d.price,"percent"==d.payMode?a=parseFloat(a)*(parseFloat(d.percentToPay)/100):"fixed"==d.payMode&&(a=parseFloat(d.fixedToPay)),a=parseFloat(a).toFixed(2),0<d.priceSingle?(r=d.priceSingle,"percent"==d.payMode?r=parseFloat(r)*(parseFloat(d.percentToPay)/100):"fixed"==d.payMode&&(r=parseFloat(d.fixedToPay)),r=parseFloat(r).toFixed(2),0==jQuery('#estimation_popup.wpe_bootstraped[data-form="'+d.formID+'"] #wtmt_paypalForm [name=a1]').length&&(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+d.formID+'"] #wtmt_paypalForm').append('<input type="hidden" name="a1" value="0"/>'),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+d.formID+'"] #wtmt_paypalForm').append('<input type="hidden" name="p1" value="1"/>'),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+d.formID+'"] #wtmt_paypalForm').append('<input type="hidden" name="t1" value="M"/>')),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+d.formID+'"] #wtmt_paypalForm [name=a1]').val(r),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+d.formID+'"] #wtmt_paypalForm [name=p1]').val(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+d.formID+'"] #wtmt_paypalForm [name=p3]').val()),a<=0&&(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+d.formID+'"] #wtmt_paypalForm [name=cmd]').val("_xclick"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+d.formID+'"] #wtmt_paypalForm [name=a3]').remove(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+d.formID+'"] #wtmt_paypalForm [name=t3]').remove(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+d.formID+'"] #wtmt_paypalForm [name=p3]').remove(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+d.formID+'"] #wtmt_paypalForm [name=bn]').remove(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+d.formID+'"] #wtmt_paypalForm [name=no_note]').remove(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+d.formID+'"] #wtmt_paypalForm [name=src]').remove(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+d.formID+'"] #wtmt_paypalForm [name=a1]').remove(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+d.formID+'"] #wtmt_paypalForm [name=t1]').remove(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+d.formID+'"] #wtmt_paypalForm [name=p1]').remove(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+d.formID+'"] #wtmt_paypalForm').append('<input type="hidden" name="amount" value="'+r+'"/>'))):(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+d.formID+'"] #wtmt_paypalForm [name=a1]').remove(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+d.formID+'"] #wtmt_paypalForm [name=t1]').remove(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+d.formID+'"] #wtmt_paypalForm [name=p1]').remove(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+d.formID+'"] #wtmt_paypalForm [name=amount]').val(a)),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+d.formID+'"] #wtmt_paypalForm [name="return"]').val(lfb_getRedirectionURL(n)),""!=(i=lfb_getRedirectionURL(n))&&"#"!=i&&" "!=i&&(""!=d.urlVariables&&-1<i.indexOf("?")&&d.urlVariables.replace("?","&"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+n+'"] #wtmt_paypalForm input[name="return"]').val(i+d.urlVariables)),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+d.formID+'"] #wtmt_paypalForm [name=a3]').val(a),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+d.formID+'"] #wtmt_paypalForm [name=custom]').val(t),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+d.formID+'"] #wtmt_paypalForm [name=item_number]').val(t),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+d.formID+'"] #wtmt_paypalForm [name=item_name]').val(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+d.formID+'"] #wtmt_paypalForm [name=item_name]').val()+" - "+t),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+d.formID+'"] #wtmt_paypalForm [type="submit"]').trigger("click")),u&&0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+d.formID+'"] #wtmt_paypalForm').length&&(0<d.price||0<d.priceSingle)&&void 0===d.stripePaid||0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+d.formID+'"] #lfb_stripeForm').length&&0<d.price||d.save_to_cart||d.save_to_cart_edd||s||wpe_finalStep(n),d.save_to_cart_edd&&(o=new Array,p=lfb_lastSteps.slice(),"final"!=d.step&&-1==jQuery.inArray(parseInt(d.step),p)?p.push(parseInt(d.step)):"final"==d.step&&-1==jQuery.inArray("final",p)&&p.push("final"),jQuery.each(p,function(){$panel=jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+n+'"] #mainPanel .genSlide[data-stepid="'+this+'"]'),$panel.find('div.selectable.checked:not(.lfb_disabled),a.lfb_button.checked:not(.lfb_disabled),input[type=checkbox]:checked:not(.lfb_disabled),[data-type="slider"]:not(.lfb_disabled)').each(function(){var t=1;0<parseInt(jQuery(this).data("resqt"))&&(t=parseInt(jQuery(this).data("resqt"))),jQuery(this).is('[data-type="slider"]')&&(t=parseInt(jQuery(this).slider("value")),isNaN(parseInt(jQuery(this).find(".tooltip-inner").html()))||(t=parseInt(jQuery(this).find(".tooltip-inner").html()))),0<parseInt(jQuery(this).data("prodid"))&&o.push({quantity:t,product_id:parseInt(jQuery(this).data("prodid")),variation:parseInt(jQuery(this).data("eddvar"))})})}),jQuery.ajax({url:d.ajaxurl,type:"post",data:{action:"lfb_cartdd_save",products:o},success:function(){wpe_finalStep(n)}})),d.save_to_cart&&(o=new Array,p=lfb_lastSteps.slice(),"final"!=d.step&&-1==jQuery.inArray(parseInt(d.step),p)?p.push(parseInt(d.step)):"final"==d.step&&-1==jQuery.inArray("final",p)&&p.push("final"),jQuery.each(p,function(){$panel=jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+n+'"] #mainPanel .genSlide[data-stepid="'+this+'"]'),$panel.find('div.selectable.checked:not(.lfb_disabled),a.lfb_button.checked:not(.lfb_disabled),input[type=checkbox]:checked:not(.lfb_disabled),[data-type="slider"]:not(.lfb_disabled),select[data-itemid]:not(.lfb_disabled)').each(function(){var t=1;0<parseInt(jQuery(this).data("resqt"))&&(t=parseInt(jQuery(this).data("resqt"))),jQuery(this).is('[data-type="slider"]')&&(t=parseInt(jQuery(this).slider("value"))),0<parseInt(jQuery(this).data("prodid"))&&o.push({quantity:t,title:jQuery(this).attr("data-originaltitle"),product_id:parseInt(jQuery(this).data("prodid")),variation:parseInt(jQuery(this).attr("data-woovar")),price:parseFloat(jQuery(this).data("resprice")/t)})})}),jQuery.ajax({url:d.ajaxurl,type:"post",data:{action:"lfb_cart_save",formID:n,ref:t,emptyWooCart:d.emptyWooCart,products:o},success:function(){wpe_finalStep(n)}}))}})}function lfb_checkLastStepFields(t){var e=wpe_getForm(t),a=!0;return jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e.formID+'"] #finalSlide input[type=text],#estimation_popup.wpe_bootstraped[data-form="'+e.formID+'"] #finalSlide input[type=email], #estimation_popup.wpe_bootstraped[data-form="'+e.formID+'"] #finalSlide textarea').each(function(){0==jQuery(this).closest("#wtmt_paypalForm").length&&(jQuery(this).is(".lfb_disabled")||(jQuery(this).attr("data-required")&&"true"==jQuery(this).attr("data-required")&&jQuery(this).val().length<1&&(a=!1,jQuery(this).closest(".form-group").addClass("has-error"),jQuery(this).is("#lfb_captchaField")||(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e.formID+'"]').is(".wpe_fullscreen")||jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e.formID+'"]').is(".wpe_popup")?jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e.formID+'"]').animate({scrollTop:jQuery(this).parent().offset().top-(80+parseInt(e.scrollTopMargin))},2*e.animationsSpeed):"1"==e.scrollTopPage?jQuery("body,html").animate({scrollTop:0},2*e.animationsSpeed):jQuery("body,html").animate({scrollTop:jQuery(this).parent().offset().top-(80+parseInt(e.scrollTopMargin))},2*e.animationsSpeed))),jQuery(this).is(".emailField")&&!wpe_checkEmail(jQuery(this).val())&&(a=!1,jQuery(this).closest(".form-group").addClass("has-error"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e.formID+'"]').is(".wpe_fullscreen")||jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e.formID+'"]').is(".wpe_popup")?jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e.formID+'"]').animate({scrollTop:jQuery(this).parent().offset().top-(80+parseInt(e.scrollTopMargin))},2*e.animationsSpeed):"1"==e.scrollTopPage?jQuery("body,html").animate({scrollTop:0},2*e.animationsSpeed):jQuery("body,html").animate({scrollTop:jQuery(this).parent().offset().top-(80+parseInt(e.scrollTopMargin))},2*e.animationsSpeed))))}),a}function wpe_order(t){var e=wpe_getForm(t),a=!0,r="",i=new Array;jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e.formID+'"] #finalSlide .form-group').removeClass("has-error"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e.formID+'"] #finalSlide').find('.lfb_item input:not([type="checkbox"])[data-itemid],.lfb_item textarea[data-itemid],.lfb_item select[data-itemid]').each(function(){var t;0==jQuery(this).closest("#wtmt_paypalForm").length&&(jQuery(this).is(".lfb_disabled")||jQuery(this).is("#lfb_couponField")||jQuery(this).is("#lfb_captchaField")||(t=":",jQuery(this).closest(".lfb_item").find("label").html().lastIndexOf(":")==jQuery(this).closest(".lfb_item").find("label").html().length-1&&(t=""),jQuery("body").is(".rtl")?r+='<p><b><span class="lfb_value">'+jQuery(this).val()+"</span></b>"+t+" "+jQuery(this).closest(".lfb_item").find("label").html()+"</p>":r+="<p>"+jQuery(this).closest(".lfb_item").find("label").html()+" "+t+' <b><span class="lfb_value">'+jQuery(this).val()+"</span></b></p>"))}),a=lfb_checkStepItemsValid("final",t),1==e.legalNoticeEnable&&(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e.formID+'"] #lfb_legalCheckbox').is(":checked")||(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e.formID+'"] #lfb_legalCheckbox').closest(".form-group").addClass("has-error"),a=!1)),1==a&&lfb_checkUserEmail(e)&&lfb_checkCaptcha(e,function(){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e.formID+'"] #finalSlide').find("#wpe_btnOrder,.linkPrevious").fadeOut(250),wpe_uploadFiles(t,r,"",i)})}function wpe_previousStep(a){var r=wpe_getForm(a),t=navigator.userAgent.toLowerCase(),e=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"]  #mainPanel').offset().top-100;jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"]').is(".wpe_fullscreen")||jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"]').is(".wpe_popup")?((e=0)<r.intro_enabled&&(e=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] #startInfos').height()+100),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"]').animate({scrollTop:e},250)):(0<jQuery("header").length&&wpe_isAnyParentFixed(jQuery("header"))&&(e-=jQuery("header").height()),e-=48+parseInt(r.scrollTopMargin),"1"==r.scrollTopPage?jQuery("body,html").animate({scrollTop:0},2*r.animationsSpeed):jQuery("body,html").animate({scrollTop:e},250)),t.match(/(iPad|iPhone|iPod)/i)&&(jQuery("#estimation_popup :not(.ui-slider-handle) > .tooltip").remove(),jQuery("body > .tooltip").remove(),jQuery('#estimation_popup[data-form="'+r.formID+'"] > .tooltip').remove()),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] .errorMsg').hide(),jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide[data-stepid="'+r.step+'"]').find("a.lfb_button.checked:not(.prechecked)").each(function(){wpe_itemClick(jQuery(this),!1,a)}),jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide[data-stepid="'+r.step+'"]').find("div.selectable.checked:not(.prechecked)").each(function(){wpe_itemClick(jQuery(this),!1,a)}),jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide[data-stepid="'+r.step+'"]').find('input[data-toggle="switch"]:checked:not(.prechecked)').each(function(){jQuery(this).trigger("click.auto")});var i=!1,o=0,p=0;jQuery.each(lfb_lastSteps,function(t){var e=this;parseInt(e)==parseInt(r.step)&&(i=!0),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide[data-stepid="'+e+'"] .lfb_executed').removeClass("lfb_executed"),i||(0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide[data-stepid="'+e+'"] .lfb_item:not(.lfb-hidden)').length||0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide[data-stepid="'+e+'"] .lfb_distanceError').length)&&!jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide[data-stepid="'+e+'"]').is(".lfb_disabled")&&(o=e,p=t)}),lfb_lastSteps=jQuery.grep(lfb_lastSteps,function(t,e){if(e<=p)return t}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide.lfb_activeStep').hide(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide[data-stepid="'+o+'"] .genContent').css("opacity",0),wpe_changeStep(o,a)}function lfb_returnToStep(t,e){var a,r=wpe_getForm(e);t!=r.step&&(navigator.userAgent.toLowerCase().match(/(iPad|iPhone|iPod)/i)&&(jQuery("#estimation_popup :not(.ui-slider-handle) > .tooltip").remove(),jQuery("body > .tooltip").remove(),jQuery('#estimation_popup[data-form="'+r.formID+'"] > .tooltip').remove()),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] .errorMsg').hide(),jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+e+'"] #mainPanel .genSlide[data-stepid="'+r.step+'"]').find("a.lfb_button.checked:not(.prechecked)").each(function(){wpe_itemClick(jQuery(this),!1,e)}),jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+e+'"] #mainPanel .genSlide[data-stepid="'+r.step+'"]').find("div.selectable.checked:not(.prechecked)").each(function(){wpe_itemClick(jQuery(this),!1,e)}),jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+e+'"] #mainPanel .genSlide[data-stepid="'+r.step+'"]').find('input[data-toggle="switch"]:checked:not(.prechecked)').each(function(){jQuery(this).trigger("click.auto")}),a=lfb_lastSteps.indexOf(t),lfb_lastSteps=jQuery.grep(lfb_lastSteps,function(t,e){if(e<=a)return t}),wpe_changeStep(t,e),setTimeout(function(){wpe_updateSummary(e,!0)},350),setTimeout(function(){wpe_updateStep(e)},2e3))}function wpe_uploadFiles(s,n,t,d){var e,a,r=!0,l=wpe_getForm(s);l.useRazorpay&&!l.razorpayReady?(r=!1,e=l.price,a=0,jQuery('#estimation_popup.wpe_bootstraped[data-form="'+l.formID+'"]').is('[data-isSubs="true"]')&&(a=l.price,(e=0)<l.priceSingle&&(e=l.priceSingle)),jQuery.ajax({url:l.ajaxurl,type:"post",data:{action:"lfb_makeRazorPayment",formID:s,singleCost:e,subCost:a,ref:l.current_ref,email:t},success:function(t){var e,a,r,i,o,p;-1==t.trim().indexOf("error")?(e=t.trim(),i=r="",o=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+s+'"] .emailField').val(),0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+s+'"] [data-fieldtype="firstName"]').length&&(r=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+s+'"] [data-fieldtype="firstName"]').val()),0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+s+'"] [data-fieldtype="lastName"]').length&&(i=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+s+'"] [data-fieldtype="lastName"]').val()),a=r+" "+i,p={key:l.razorpay_publishKey,name:l.title,description:"",image:l.razorpay_logoImg,handler:function(t){l.razorpayReady=!0,wpe_uploadFiles(s,n,o,d)},prefill:{name:a,email:o},theme:{color:l.colorA}},0==e.indexOf("sub_")?p.subscription_id=e:p.order_id=e,new Razorpay(p).open()):alert(t)}})):jQuery('#estimation_popup.wpe_bootstraped[data-form="'+l.formID+'"]').is('[data-emaillaststep="1"]')||(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+s+'"]').is(".wpe_fullscreen")?(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+s+'"]').css("overflow-y","hidden"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+s+'"]').animate({scrollTop:0},2*l.animationsSpeed)):"1"==l.scrollTopPage?jQuery("body,html").animate({scrollTop:0},2*l.animationsSpeed):jQuery("body,html").animate({scrollTop:jQuery('#estimation_popup.wpe_bootstraped[data-form="'+s+'"]').offset().top-(80+parseInt(l.scrollTopMargin))},2*l.animationsSpeed),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+s+'"] .lfb_btnFloatingSummary').fadeOut(l.animationsSpeed),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+s+'"] #lfb_floatingSummary').fadeOut(l.animationsSpeed),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+s+'"] #lfb_loader').fadeIn(2*l.animationsSpeed),setTimeout(function(){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+s+'"] #mainPanel').fadeOut(2*l.animationsSpeed),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+s+'"] #startInfos').fadeOut(2*l.animationsSpeed),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+s+'"] #genPrice').fadeOut(2*l.animationsSpeed),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+s+'"] #lfb_stepper').fadeOut(2*l.animationsSpeed),jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+s+'"] #mainPanel .genSlide').fadeOut(2*l.animationsSpeed),jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+s+'"] #mainPanel .btn-next').fadeOut(l.animationsSpeed),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+s+'"] #mainPanel .lfb_btnNextContainer').fadeOut(l.animationsSpeed),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+s+'"] #finalText').css({opacity:0,display:"block"}),setTimeout(function(){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+s+'"]').is(".wpe_fullscreen")?jQuery('#estimation_popup.wpe_bootstraped[data-form="'+s+'"]').animate({scrollTop:0},2*l.animationsSpeed):"1"==l.scrollTopPage?jQuery("body,html").animate({scrollTop:0},2*l.animationsSpeed):jQuery("body,html").animate({scrollTop:jQuery('#estimation_popup.wpe_bootstraped[data-form="'+s+'"]').offset().top-(80+parseInt(l.scrollTopMargin))},2*l.animationsSpeed),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+s+'"] #finalText').animate({opacity:1},2*l.animationsSpeed)},4*l.animationsSpeed+50)},2*l.animationsSpeed+50)),r&&wpe_orderSend(s,n,t,d)}function wpe_isAnyParentFixed(t,e){e=e||!1;try{0<t.parent().length&&"fixed"==t.parent().css("position")&&(e=!0)}catch(t){}return!e&&0<t.parent().length&&(e=wpe_isAnyParentFixed(t.parent(),e)),e}function wpe_is_touch_device(){return"ontouchstart"in window||0<navigator.MaxTouchPoints||0<navigator.msMaxTouchPoints}function lfb_toggleFloatingSummary(t){(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"] #lfb_floatingSummary').is(".lfb_open")?lfb_closeFloatingSummary:lfb_showFloatingSummary)(t)}function lfb_closeFloatingSummary(t){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"] #lfb_floatingSummary').removeClass("lfb_open"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"] #lfb_floatingSummary').stop().slideUp()}function lfb_showFloatingSummary(t){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"] #lfb_floatingSummary').addClass("lfb_open"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"] #lfb_floatingSummary').stop().slideDown()}function wpe_updateFloatingSummary(t){var e;0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"] #lfb_floatingSummary').length&&(0==(e=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"] #lfb_summary').clone()).find("tbody").children(":not(.lfb_static)").length&&jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"] #lfb_floatingSummary').is('[data-numberstep="1"]')?(lfb_closeFloatingSummary(t),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"] .lfb_btnFloatingSummary:not(.disabled)').addClass("disabled")):(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"] .lfb_btnFloatingSummary').removeClass("disabled"),e.find("h4").remove(),e.attr("id","lfb_floatingSummaryContent"),e.removeClass("lfb-hidden"),e.find(".lfb_valueTd,.lfb_valueTh").addClass("lfb-hidden"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"] #lfb_floatingSummary').is('[data-hideprices="1"]')&&(e.find(".lfb_priceTd,.lfb_priceTh").addClass("lfb-hidden"),e.find("#lfb_summaryDiscountTr,#sfb_summaryTotalTr").addClass("lfb-hidden")),e.find(".sfb_summaryStep").attr("colspan",e.find("thead th:not(.lfb-hidden)").length),e.find("tr.lfb_noPriceRow").remove(),e.find("#lfb_summaryDiscountTr>th:eq(0),#sfb_summaryTotalTr>th:eq(0)").attr("colspan",e.find("thead th:not(.lfb-hidden)").length-1),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"] #lfb_floatingSummary #lfb_floatingSummaryInner').html(e),e.find(".sfb_summaryStep").click(function(){var t=jQuery(this).closest("#estimation_popup").attr("data-form"),e=wpe_getForm(t),a=parseInt(jQuery(this).attr("data-step"));void 0!==e.canGoprevious&&!e.canGoprevious||lfb_returnToStep(a,t)}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"] #lfb_floatingSummary').is('[data-numberstep="1"]')&&e.find(".sfb_summaryStep").each(function(t){var e=t+1;jQuery(this).find("strong").html(e+". "+jQuery(this).find("strong").html())})))}function wpe_updateSummary(u,t){var e,m,f,c,a,r,i,o,p,s,n,d,l,_=wpe_getForm(u);(0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+u+'"] #lfb_summary').length||0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+u+'"] #lfb_floatingSummary').length)&&(e=wpe_getFormContent(u,t?!1:!0)[2],f=!(m=-1),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+u+'"] #lfb_summary table tbody tr:not(.lfb_static)').remove(),c="",1==_.summary_hidePrices&&(c="lfb-hidden lfb_hidePrice"),jQuery.each(e,function(){var t,e,a,r,i,o,p,s,n,d,l=this;null!=l.label&&""!=l.label&&"undefined"!=l.label&&0==jQuery('#estimation_popup.wpe_bootstraped[data-form="'+u+'"] #lfb_summary table tbody tr[data-item="'+l.itemid+'"]').length&&(isNaN(l.stepid)&&(l.stepid="final"),"final"==l.stepid&&"1"==_.summary_hideFinalStep||(l.stepid==m||jQuery('#estimation_popup.wpe_bootstraped[data-form="'+u+'"]').is('[data-sumhidesteps="1"]')||(t=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+u+'"] .genSlide[data-stepid="'+l.stepid+'"]').attr("data-title"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+u+'"] #lfb_summary table tbody #lfb_summaryDiscountTr').before('<tr><th colspan="4" class="sfb_summaryStep" data-step="'+l.stepid+'">'+t+"</th>")),m=l.stepid,isNaN(l.quantity)&&(l.quantity=1),e="",isNaN(l.price)&&(e="lfb_noPriceRow",l.price=0),a=l.value,void 0===l.value?a="":e+=" lfb_infoRow",""!=a&&l.showInSummary&&(f=!0),r=l.price,i=wpe_formatPrice(l.quantity,u),""!=a&&0==r&&1==i?r=i="":(o=!1,parseFloat(r)<0&&(o=!0,r*=-1),r="left"==_.currencyPosition?_.currency+""+wpe_formatPrice(parseFloat(r).toFixed(2),u):wpe_formatPrice(parseFloat(r).toFixed(2),u)+""+_.currency,o&&(r="- "+r)),l.isFile,p="",1==_.summary_hideQt&&(p="lfb-hidden"),1==_.summary_hideZero&&0==l.price&&(r=""),1==_.summary_hideZeroQt&&0==l.quantity&&(i=""),s="",l.showInSummary||(s="lfb-hidden"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+u+'"] [data-itemid="'+l.itemid+'"]').is('[data-hideqtsum="true"]')&&(i=""),0<_.priceSingle&&!l.isSinglePrice&&(""!=r||0<r)&&(r+=" "+_.subscriptionText),_.price<=0?jQuery('#estimation_popup.wpe_bootstraped[data-form="'+u+'"] #lfb_summary .lfb_subTxt').addClass("lfb-hidden"):jQuery('#estimation_popup.wpe_bootstraped[data-form="'+u+'"] #lfb_summary .lfb_subTxt').removeClass("lfb-hidden"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+u+'"] [data-itemid="'+l.itemid+'"]').is('[data-hidepricesum="true"]')&&(r=""),n="",1==_.summary_showDescriptions&&(0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+u+'"] .lfb_itemContainer_'+l.itemid+" .itemDes").length&&""!=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+u+'"] .lfb_itemContainer_'+l.itemid+" .itemDes").html()?n='<br/><span style="font-size:12px;">'+jQuery('#estimation_popup.wpe_bootstraped[data-form="'+u+'"] .lfb_itemContainer_'+l.itemid+" .itemDes").html()+"</span>":0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+u+'"] .lfb_itemContainer_'+l.itemid+" .lfb_imageButtonDescription").length&&(n='<br/><span style="font-size:12px;">'+jQuery('#estimation_popup.wpe_bootstraped[data-form="'+u+'"] .lfb_itemContainer_'+l.itemid+" .lfb_imageButtonDescription").html()+"</span>")),d=!0,jQuery('#estimation_popup.wpe_bootstraped[data-form="'+u+'"] [data-itemid="'+l.itemid+'"]').is('[data-hidezeropricesum="true"]')&&0==l.price&&(d=!1),d&&(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+u+'"] .lfb_itemContainer_'+l.itemid).is('[data-itemtype="filefield"]')?jQuery('#estimation_popup.wpe_bootstraped[data-form="'+u+'"] #lfb_summary table tbody #lfb_summaryDiscountTr').before('<tr data-item="'+l.itemid+'" data-itemstep="'+l.stepid+'" class="'+e+" "+s+'"><td>'+l.label+n+'</td><td class="lfb_valueTd ">'+a+'</td><td class="lfb_quantityTd '+p+'">'+i+'</td><td class="lfb_priceTd '+c+'">'+r+"</td></tr>"):jQuery('#estimation_popup.wpe_bootstraped[data-form="'+u+'"] #lfb_summary table tbody #lfb_summaryDiscountTr').before('<tr data-item="'+l.itemid+'" data-itemstep="'+l.stepid+'" class="'+e+" "+s+'"><td>'+l.label+n+'</td><td class="lfb_valueTd "><span class="lfb_value">'+a+'</span></td><td class="lfb_quantityTd '+p+'">'+i+'</td><td class="lfb_priceTd '+c+'">'+r+"</td></tr>"))))}),0<_.reductionResult&&(a=parseFloat(_.reductionResult).toFixed(2)+_.currency,"left"==_.currencyPosition&&(a=_.currency+parseFloat(_.reductionResult).toFixed(2)),a="-"+a,jQuery('#estimation_popup.wpe_bootstraped[data-form="'+u+'"] #lfb_summary #lfb_summaryDiscount>span').html(a),_.discountCodeDisplayed||(r=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+u+'"] #lfb_summary #lfb_summaryDiscountTr th[colspan]').html(),0==jQuery('#estimation_popup.wpe_bootstraped[data-form="'+u+'"] #lfb_summary #lfb_summaryDiscountTr th[colspan] i').length&&(":"==r.substr(r.length-1,1)?jQuery('#estimation_popup.wpe_bootstraped[data-form="'+u+'"] #lfb_summary #lfb_summaryDiscountTr th[colspan]').html(r.substr(0,r.length-1)+" <i>("+_.discountCode+")</i> :"):jQuery('#estimation_popup.wpe_bootstraped[data-form="'+u+'"] #lfb_summary #lfb_summaryDiscountTr th[colspan]').html(r+" <i>("+_.discountCode+")</i>"))),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+u+'"] #lfb_summary #lfb_summaryDiscountTr').slideDown(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+u+'"] #lfb_floatingSummary #lfb_summaryDiscountTr').slideDown()),(!_.price||_.price<0)&&(_.price=0),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+u+'"] #lfb_summary table tr th.sfb_summaryStep').each(function(){0==jQuery('#estimation_popup.wpe_bootstraped[data-form="'+u+'"] #lfb_summary table tr[data-itemstep="'+jQuery(this).attr("data-step")+'"]:not(.lfb-hidden)').length&&jQuery(this).parent().addClass("lfb-hidden")}),i=_.currency+""+wpe_formatPrice(parseFloat(_.price).toFixed(2),u),_.currency,wpe_formatPrice(parseFloat(_.priceSingle).toFixed(2),u),"left"!=_.currencyPosition&&(i=wpe_formatPrice(parseFloat(_.price).toFixed(2),u)+""+_.currency,wpe_formatPrice(parseFloat(_.priceSingle).toFixed(2),u),_.currency),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+u+'"] #lfb_summary table #lfb_summaryTotal>span:eq(0)').html(i),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+_.formID+'"]').is("[data-totalrange]")&&0<parseFloat(_.price)&&(o=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+_.formID+'"]').attr("data-rangelabelbetween"),p=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+_.formID+'"]').attr("data-rangelabeland"),d=parseFloat(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+_.formID+'"]').attr("data-totalrange")),s=parseFloat(_.price)-d/2,n=parseFloat(_.price)+d/2,jQuery('#estimation_popup.wpe_bootstraped[data-form="'+_.formID+'"]').is('[data-rangemode="percent"]')&&(s=parseFloat(_.price)-parseFloat(_.price)*d/100,n=parseFloat(_.price)+parseFloat(_.price)*d/100),s<0&&(s=0),n<0&&(n=0),formatedPrice=o+" <strong>"+_.currency+wpe_formatPrice(s,u)+"</strong> "+p+" <strong>"+_.currency+wpe_formatPrice(n,u)+"</strong>","left"!=_.currencyPosition&&(d=parseInt(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+_.formID+'"]').attr("data-totalrange")),formatedPrice=o+" <strong>"+wpe_formatPrice(s,u)+_.currency+"</strong> "+p+" <strong>"+wpe_formatPrice(n,u)+_.currency+"</strong>"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+u+'"] #lfb_summary table #lfb_summaryTotal>span:eq(0)').html(formatedPrice)),l=4,1==_.summary_hideQt&&--l,1==_.summary_hidePrices&&--l,f?(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+u+'"] #lfb_summary table thead th:eq(1)').show().removeClass("lfb-hidden"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+u+'"] #lfb_summary table tbody tr:eq(1)').show(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+u+'"] #lfb_summary table tbody td.lfb_valueTd').show()):(--l,jQuery('#estimation_popup.wpe_bootstraped[data-form="'+u+'"] #lfb_summary table td.lfb_valueTd').hide(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+u+'"] #lfb_summary table thead th:eq(1)').hide().addClass("lfb-hidden")),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+u+'"] #lfb_summary table tbody tr#sfb_summaryTotalTr th[colspan]').attr("colspan",l-1),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+u+'"] #lfb_summary table tbody tr#lfb_summaryDiscountTr th[colspan]').attr("colspan",l-1),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+u+'"] #lfb_summary table tbody tr th.sfb_summaryStep').attr("colspan",l)),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+u+'"]').is('[data-sumstepsclick="1"]')&&jQuery('#estimation_popup.wpe_bootstraped[data-form="'+u+'"] #lfb_summary .sfb_summaryStep:not([data-step="final"])').each(function(){jQuery(this).css("cursor","pointer"),jQuery(this).click(function(){var t=jQuery(this).closest("#estimation_popup").attr("data-form"),e=wpe_getForm(t),a=parseInt(jQuery(this).attr("data-step"));void 0!==e.canGoprevious&&!e.canGoprevious||lfb_returnToStep(a,t)})}),setTimeout(function(){wpe_updateFloatingSummary(u)},300),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+u+'"]').trigger("summaryUpdated")}function wpe_changeStep(e,a){var t,r=wpe_getForm(a);jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel').css("max-height",jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel').height()),jQuery("#estimation_popup :not(.ui-slider-handle) > .tooltip").remove(),jQuery("body > .tooltip").remove(),jQuery('#estimation_popup[data-form="'+r.formID+'"] > .tooltip').remove(),jQuery('#estimation_popup[data-form="'+r.formID+'"] .datetimepicker ').hide(),(0<r.intro_enabled||0<r.step)&&(t=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"]  #mainPanel').offset().top-100,jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"]').is(".wpe_fullscreen")||jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"]').is(".wpe_popup")?((t=0)<r.intro_enabled&&(t=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] #startInfos').height()+100),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"]').animate({scrollTop:t},250)):(0<jQuery("header").length&&wpe_isAnyParentFixed(jQuery("header"))&&(t-=jQuery("header").height()),t-=48+parseInt(r.scrollTopMargin),"1"==r.scrollTopPage?jQuery("body,html").animate({scrollTop:0},2*r.animationsSpeed):jQuery("body,html").animate({scrollTop:t},250))),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] .quantityBtns').removeClass("open"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] .quantityBtns').fadeOut(r.animationsSpeed/4),jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide').fadeOut(2*r.animationsSpeed),jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .btn-next').fadeOut(r.animationsSpeed/2),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .lfb_btnNextContainer').fadeOut(r.animationsSpeed/2),jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .lfb_linkPreviousCt').fadeOut(r.animationsSpeed/2),jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .lfb_distanceError').fadeOut(r.animationsSpeed/2);var i=!0;0==jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #lfb_btnPayStripe').length&&0==jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #wtmt_paypalForm').length&&0==jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #lfb_razorPayCt').length&&(i=!1),"final"==e?(wpe_updateSummary(a),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] [data-activatePaypal="true"]:not(:checked):not(.checked)').each(function(){var t=jQuery(this).closest(".genSlide").attr("data-stepid");"final"!=t&&(t=parseInt(t)),-1==jQuery.inArray(t,lfb_lastSteps)||(i=!1)}),0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"]').find('[data-dontactivatepaypal="true"].checked,[data-dontactivatepaypal="true"]:checked').length&&(i=!1),i?(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #lfb_paymentMethodBtns').show(),0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #lfb_paymentMethodBtns').length?(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #lfb_razorPayCt').hide(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #lfb_btnPayStripe').hide(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #lfb_btnPayStripe').closest(".lfb_btnNextContainer").hide(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #wtmt_paypalForm').hide()):(0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #lfb_btnPayStripe').length&&"none"!=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #lfb_btnPayStripe').css("display")&&(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #lfb_btnPayStripe').closest(".lfb_btnNextContainer").show(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #wpe_btnOrder').closest(".lfb_btnNextContainer").hide()),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #lfb_razorPayCt').show(),0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #wtmt_paypalForm').length&&(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #wtmt_paypalForm').show(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #wpe_btnOrder').closest(".lfb_btnNextContainer").hide(),setTimeout(function(){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #wtmt_paypalForm .lfb_btnNextContainer').fadeIn()},2*r.animationsSpeed)))):(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #lfb_paymentMethodBtns').hide(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #lfb_razorPayCt').hide(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #lfb_btnPayStripe').hide(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #wtmt_paypalForm').hide(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #lfb_btnPayStripe').closest(".lfb_btnNextContainer").hide(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #wpe_btnOrder').closest(".lfb_btnNextContainer").show()),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"]').is('[data-emaillaststep="1"]')&&!r.emailSent&&setTimeout(function(){wpe_updatePrice(a),wpe_order(a)},1e3)):wpe_updateFloatingSummary();var o=jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide[data-stepid="'+e+'"]').find(".stepTitle"),p=jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide[data-stepid="'+e+'"]').find("p.lfb_stepDescription"),s=jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide[data-stepid="'+e+'"]').find(".genContent"),n=jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide[data-stepid="'+e+'"]').find(".lfb_totalBottomContainer");if(s.find(".genContentSlide").removeClass("active"),s.find(".genContentSlide").eq(0).addClass("active"),s.animate({opacity:0},r.animationsSpeed),p.animate({opacity:0},r.animationsSpeed),o.removeClass("positioned"),o.css({"-webkit-transition":"none",transition:"none"}),n.animate({opacity:0},r.animationsSpeed),"undefined"!=typeof ga)try{ga("set","page",location.pathname+"#"+encodeURIComponent(o.html()).replace(/%20/g,"+")),ga("send","pageview")}catch(t){}jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide[data-stepid="'+e+'"]').css("opacity",0).show(),jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide[data-stepid="'+e+'"]').hide().css("opacity",1);var d,l=4.5*r.animationsSpeed;jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide[data-stepid="'+e+'"]').is('[data-start="1"]')?(wpe_initPanelResize(a),l=2.5*r.animationsSpeed,jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide[data-stepid="'+e+'"]').fadeIn(2*r.animationsSpeed)):jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide[data-stepid="'+e+'"]').delay(2*r.animationsSpeed).fadeIn(2*r.animationsSpeed),0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] #finalSlide .estimation_project').length&&(d=wpe_getFormContent(a)[3],jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] #finalSlide .estimation_project textarea').val(d),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] #finalSlide .estimation_total:not(.gfield_price) input').val(r.price),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] #finalSlide .estimation_total.gfield_price .ginput_product_price').html(r.price),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] #finalSlide .estimation_total.gfield_price input[id^="ginput_base_price"]').val(r.price)),setTimeout(function(){o.css({"-webkit-transition":"all 0.3s ease-out",transition:"all 0.3s ease-out"}).addClass("positioned"),s.css({paddingTop:p.height()+o.height()+70}),s.delay(2*r.animationsSpeed).animate({opacity:1},r.animationsSpeed),p.delay(r.animationsSpeed).animate({opacity:1,top:o.height()+60},r.animationsSpeed),n.delay(2*r.animationsSpeed).animate({opacity:1},r.animationsSpeed),setTimeout(function(){var t=jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide[data-stepid="'+e+'"] .stepTitle').height();heightP=jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide[data-stepid="'+e+'"] .genContent').outerHeight()+parseInt(jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel').css("padding-bottom"))+102+t,"final"==e&&(heightP-=80),jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel').animate({minHeight:heightP}),jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel').css("max-height","none")},2*r.animationsSpeed),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide[data-stepid="'+e+'"] .btn-next').is(".lfb_disabledBtn")?jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide[data-stepid="'+e+'"] .btn-next').hide():(jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide[data-stepid="'+e+'"] .btn-next').css("display","inline-block").hide(),setTimeout(function(){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide[data-stepid="'+e+'"] .btn-next').is(".lfb_disabledBtn")||(jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide[data-stepid="'+e+'"] .btn-next').fadeIn(500),setTimeout(function(){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide[data-stepid="'+e+'"] .btn-next').is(".lfb_disabledBtn")&&jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide[data-stepid="'+e+'"] .btn-next').hide()},550))},2*r.animationsSpeed)),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"]  #mainPanel .genSlide[data-stepid="'+e+'"] .datetimepicker').hide(),"final"==e?(i?0==jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #lfb_paymentMethodBtns').length&&0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #lfb_razorPayCt').length&&jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide[data-stepid="'+e+'"] .genContentSlide > .lfb_btnNextContainer').hide():(jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide[data-stepid="'+e+'"] .lfb_btnNextContainer').fadeIn(500),jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide[data-stepid="'+e+'"] .lfb_btnNextContainerStripe').hide(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #lfb_paymentMethodBtns').hide(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #lfb_stripeForm  .lfb_stripeContainer').hide(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #lfb_stripeForm .lfb_btnNextContainer').hide()),1==r.useSignature&&(jQuery('#estimation_popup[data-form="'+r.formID+'"] #lfb_signature canvas').attr("width",jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #lfb_signature').width()),jQuery('#estimation_popup[data-form="'+r.formID+'"] #lfb_signature canvas').css("width",jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #lfb_signature').width()),r.signature.signature("clear"))):jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide[data-stepid="'+e+'"] .lfb_btnNextContainer').fadeIn(500),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"]').is('[data-previousstepbtn="true"]')&&"final"==e?setTimeout(function(){var t=!1;jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] .genSlide[data-stepid="'+e+'"] ').find(".btn-next,#btnOrderPaypal,#lfb_btnPayStripe,#wpe_btnOrder,#btnOrderRazorpay").each(function(){"none"!=jQuery(this).css("display")&&"none"!=jQuery(this).closest(".lfb_btnNextContainer").css("display")&&(t=!0)}),t?jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] .genSlide[data-stepid="'+e+'"] ').find(".linkPrevious").css({marginTop:-15}):jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] .genSlide[data-stepid="'+e+'"] ').find(".linkPrevious").css({marginTop:24}),0<lfb_lastSteps.length&&(jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"][data-previousstepbtn="true"] #mainPanel .genSlide[data-stepid="'+e+'"] .lfb_linkPreviousCt').delay(3*r.animationsSpeed).fadeIn(500),jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"]:not([data-previousstepbtn="true"]) #mainPanel .genSlide[data-stepid="'+e+'"] .lfb_linkPreviousCt').delay(3*r.animationsSpeed).css({opacity:0,display:"inline-block"}).animate({opacity:1},600))},1e3):0<lfb_lastSteps.length&&(jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"][data-previousstepbtn="true"] #mainPanel .genSlide[data-stepid="'+e+'"] .lfb_linkPreviousCt').delay(3*r.animationsSpeed).fadeIn(500),jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"]:not([data-previousstepbtn="true"]) #mainPanel .genSlide[data-stepid="'+e+'"] .lfb_linkPreviousCt').delay(3*r.animationsSpeed).css({opacity:0,display:"inline-block"}).animate({opacity:1},600)),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide[data-stepid="'+e+'"] .lfb_distanceError').delay(3*r.animationsSpeed).fadeIn(500),0!=r.disableTipMobile&&wpe_is_touch_device()||(navigator.userAgent.toLowerCase().match(/(iPad|iPhone|iPod)/i)?s.delay(750).find('[data-toggle="tooltip"]').b_tooltip({html:!0,container:'#estimation_popup[data-form="'+a+'"]',trigger:"manual"}).on("show.bs.tooltip",function(){jQuery(this).find(".tooltip-inner").css({maxWidth:jQuery(window).width()})}):s.delay(750).find('[data-toggle="tooltip"]').b_tooltip({html:!0,container:'#estimation_popup[data-form="'+a+'"]'}).on("show.bs.b_tooltip",function(t,e){jQuery('#estimation_popup[data-form="'+a+'"] .tooltip-inner').css({maxWidth:jQuery(window).width()+"px"})}),s.on("enter",function(){"hover"==this.options.trigger&&document.documentElement})),setTimeout(function(){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide.lfb_activeStep').removeClass("lfb_activeStep"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide[data-stepid="'+e+'"]').addClass("lfb_activeStep"),s.find(".wpe_itemQtField").each(function(){jQuery(this).parent().next().is(".itemDes")&&jQuery(this).css({marginTop:20+jQuery(this).parent().next().outerHeight()})}),r.step=e,setTimeout(function(){wpe_updateStep(a),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide[data-stepid="'+e+'"]').find('[data-usedistance="true"]').each(function(){lfb_removeDistanceError(jQuery(this).attr("data-itemid"),a)},100),jQuery("#estimation_popup :not(.ui-slider-handle) > .tooltip").remove(),jQuery("body > .tooltip").remove(),jQuery('#estimation_popup[data-form="'+a+'"] > .tooltip').remove(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"]').trigger("stepChanged"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"]').attr("data-currentstep",e)},2*r.animationsSpeed+550),wpe_updatePrice(a),r.backFomFinal&&(r.backFomFinal=!1)},300)},l),jQuery("#estimation_popup :not(.ui-slider-handle) > .tooltip").remove(),jQuery("body > .tooltip").remove(),jQuery('#estimation_popup[data-form="'+a+'"] > .tooltip').remove(),wpe_updatePrice(a)}function wpe_findPotentialsSteps(i,o){var t=wpe_getForm(o),p=new Array,s=new Array,n=new Array,d=0;return jQuery.each(t.links,function(){var t,e,a,r=this;r.originID==i&&(a=!(e=!1),a=r.conditions&&"[]"!=r.conditions?(r.conditionsO=JSON.parse(r.conditions),e=(t=lfb_checkConditions(r.conditionsO,o,i)).error,t.errorOR):(n.push(r.destinationID),!1),("OR"==r.operator&&!a||"OR"!=r.operator&&!e)&&(r.conditionsO=JSON.parse(r.conditions),s.push({stepID:parseInt(r.destinationID),nbConditions:r.conditionsO.length}),r.conditionsO.length>d&&(d=r.conditionsO.length),p.push(parseInt(r.destinationID))))}),0==i&&p.push(parseInt(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o+'"]  #mainPanel .genSlide[data-start="1"]').attr("data-stepid"))),0==p.length?p.push("final"):0<n.length&&n.length<p.length&&(jQuery.each(n,function(){var e=this;p=jQuery.grep(p,function(t){return t!=e})}),0<d&&jQuery.each(p,function(e){jQuery.each(s,function(t){t.stepID==e&&t.nbConditions<d&&(p=jQuery.grep(p,function(t){return t!=e}))})})),p}function lfb_checkConditions(t,h,g){var j=!1,Q=!0;return jQuery.each(t,function(){var t,e=this;if("_"!=e.interaction.substr(0,1)&&"v_"!=e.interaction.substr(0,2)){0==(t=e.interaction.substr(0,e.interaction.indexOf("_")))&&(t="final");var a=e.interaction.substr(e.interaction.indexOf("_")+1,e.interaction.length);if(0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+h+'"] #mainPanel .genSlide[data-stepid="'+t+'"] .genContent [data-itemid="'+a+'"]').length){var r,i,o,p,s=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+h+'"] #mainPanel .genSlide[data-stepid="'+t+'"] .genContent [data-itemid="'+a+'"]');if(s.is(".lfb_disabled")||s.closest(".genSlide").is(".lfb_disabled"))"unclicked"!=e.action?j=!0:Q=!1;else switch(e.value&&-1<e.value.indexOf("_")?"_"!=e.value.substr(0,1)?(d=e.value.substr(0,e.value.indexOf("_")),l=e.value.substr(e.value.indexOf("-")+1,e.value.length),0==d&&(d="final"),m=e.value.substr(e.value.indexOf("_")+1,e.value.indexOf("-")-(e.value.indexOf("_")+1)),"v"==d?e.value=parseFloat(lfb_getVariableByID(form,m).value):"stepqt"==l?e.value=wpe_getStepQuantities(t,h,a):0<(u=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+h+'"] #mainPanel .genSlide[data-stepid="'+d+'"] .genContent [data-itemid="'+m+'"]')).length&&(""==l?void 0!==u.data("resprice")?e.value=parseFloat(u.data("resprice")):u.is("[data-resqt]")&&(e.value=parseFloat(u.attr("data-resqt"))):"quantity"==l?u.is(".lfb_disabled")?e.value=0:u.is('input[type="number"]')?e.value=u.val():0<u.find(".wpe_qtfield").length?e.value=parseInt(u.find(".wpe_qtfield").val()):e.value=parseInt(u.find(".icon_quantity").html()):"value"==l&&(u.is(".lfb_disabled")?e.value="":(e.value=u.val(),u.is(".lfb_datepicker")&&(e.value=moment.utc(u.datetimepicker("getDate")).format("YYYY-MM-DD")),e.value=e.value.replace(/\`/g,"'"))))):"_total"==e.value||"_total-"==e.value?e.value=form.price:"_total_qt"==e.value&&(e.value=wpe_getTotalQuantities(h,g,a)):e.value&&(e.value=e.value.replace(/\`/g,"'")),e.action){case"clicked":s.closest(".itemBloc").is(".lfb_disabled")?j=!0:s.is('[type="checkbox"]')?(s.is(":checked")||(j=!0),s.is(":checked")&&(Q=!1)):(s.is(".checked")||s.is(":checked")||(j=!0),(s.is(".checked")||s.is(":checked"))&&(Q=!1));break;case"unclicked":s.closest(".itemBloc").is(".lfb_disabled")?j=Q=!1:((s.is(':not([type="checkbox"]).checked')||s.is(":checked"))&&(j=!0),s.is(':not([type="checkbox"]).checked')||s.is(":checked")||(Q=!1));break;case"filled":s.is(".lfb_dropzone")?0==s.find(".dz-preview[data-file].dz-success.dz-complete").length?j=!0:Q=!1:0==s.val().length?j=!0:Q=!1;break;case"equal":s.is(".lfb_datepicker")?s.is('[data-datetype="date"]')?(moment.utc(s.datetimepicker("getDate")).format("YYYY-MM-DD")!=e.value&&(j=!0),moment.utc(s.datetimepicker("getDate")).format("YYYY-MM-DD")==e.value&&(Q=!1)):s.is('[data-datetype="time"]')?(moment(s.datetimepicker("getDate")).format("HH:mm")!=e.value&&(j=!0),moment(s.datetimepicker("getDate")).format("HH:mm")==e.value&&(Q=!1)):(moment.utc(s.datetimepicker("getDate")).isSame(moment.utc(e.value).format("YYYY-MM-DD HH:mm"))||(j=!0),moment.utc(s.datetimepicker("getDate")).isSame(moment.utc(e.value).format("YYYY-MM-DD HH:mm"))&&(Q=!1)):s.val()!=e.value?j=!0:Q=!1;break;case"different":s.val()==e.value?j=!0:Q=!1;break;case"PriceSuperior":var n=parseFloat(s.data("resprice"));(s.is(".lfb_button:not(.checked)")||s.is(".selectable:not(.checked)")||s.is("input[type=checkbox]:not(:checked)")||n<=e.value)&&(j=!0),(s.is(".checked")||s.is(":checked"))&&n>e.value&&(Q=!1);break;case"PriceInferior":n=parseFloat(s.data("resprice"));(s.is(".lfb_button:not(.checked)")||s.is(".selectable:not(.checked)")||s.is("input[type=checkbox]:not(:checked)")||n>=e.value)&&(j=!0),(s.is(".checked")||s.is(":checked"))&&n<e.value&&(Q=!1);break;case"PriceEqual":n=parseFloat(s.data("resprice"));(s.is(".lfb_button:not(.checked)")||s.is(".selectable:not(.checked)")||s.is("input[type=checkbox]:not(:checked)")||n!=e.value)&&(j=!0),(s.is(".checked")||s.is(":checked"))&&n==e.value&&(Q=!1);break;case"PriceDifferent":n=parseFloat(s.data("resprice"));(s.is(".lfb_button:not(.checked)")||s.is(".selectable:not(.checked)")||s.is("input[type=checkbox]:not(:checked)")||n==e.value)&&(j=!0),(s.is(".checked")||s.is(":checked"))&&n!=e.value&&(Q=!1);break;case"QtSuperior":(s.is(".selectable:not(.checked)")||0<s.find(".icon_quantity").length&&parseInt(s.find(".icon_quantity").html())<=e.value||0<s.find(".wpe_qtfield").length&&parseInt(s.find(".wpe_qtfield").val())<=e.value||s.is('[data-type="slider"]')&&s.is(".ui-slider")&&parseInt(s.slider("value"))<=e.value)&&(j=!0),s.is(".selectable")?(s.is(".selectable.checked")&&parseInt(s.find(".icon_quantity").html())>e.value||parseInt(s.find(".wpe_qtfield").val())>e.value)&&(Q=!1):s.is('[data-type="slider"]')&&s.is(".ui-slider")&&parseInt(s.slider("value"))>e.value&&(Q=!1),s.is("input")&&(parseInt(s.val())<=e.value&&(j=!0),parseInt(s.val())>e.value&&(Q=!1));break;case"QtInferior":(s.is(".selectable:not(.checked)")||0<s.find(".icon_quantity").length&&parseInt(s.find(".icon_quantity").html())>=e.value||0<s.find(".wpe_qtfield").length&&parseInt(s.find(".wpe_qtfield").val())>=e.value||s.is('[data-type="slider"]')&&s.is(".ui-slider")&&parseInt(s.slider("value"))>=e.value)&&(j=!0),s.is(".selectable")?(s.is(".selectable.checked")&&parseInt(s.find(".icon_quantity").html())<e.value||parseInt(s.find(".wpe_qtfield").val())<e.value)&&(Q=!1):s.is('[data-type="slider"]')&&s.is(".ui-slider")&&parseInt(s.slider("value"))<e.value&&(Q=!1),s.is("input")&&(parseInt(s.val())>=e.value&&(j=!0),parseInt(s.val())<e.value&&(Q=!1));break;case"QtEqual":(s.is(".selectable:not(.checked)")||0<s.find(".icon_quantity").length&&parseInt(s.find(".icon_quantity").html())!=e.value||0<s.find(".wpe_qtfield").length&&parseInt(s.find(".wpe_qtfield").val())!=e.value||s.is('[data-type="slider"]')&&s.is(".ui-slider")&&parseInt(s.slider("value"))!=e.value)&&(j=!0),s.is(".selectable")?(s.is(".selectable.checked")&&parseInt(s.find(".icon_quantity").html())==e.value||parseInt(s.find(".wpe_qtfield").val())==e.value)&&(Q=!1):s.is('[data-type="slider"]')&&s.is(".ui-slider")&&parseInt(s.slider("value"))==e.value&&(Q=!1),s.is("input")&&(parseInt(s.val())!=e.value&&(j=!0),parseInt(s.val())==e.value&&(Q=!1));break;case"QtDifferent":(s.is(".selectable:not(.checked)")||0<s.find(".icon_quantity").length&&parseInt(s.find(".icon_quantity").html())==e.value||0<s.find(".wpe_qtfield").length&&parseInt(s.find(".wpe_qtfield").val())==e.value||s.is('[data-type="slider"]')&&s.is(".ui-slider")&&parseInt(s.slider("value"))==e.value)&&(j=!0),s.is(".selectable")?(s.is(".selectable.checked")&&parseInt(s.find(".icon_quantity").html())!=e.value||parseInt(s.find(".wpe_qtfield").val())!=e.value)&&(Q=!1):s.is('[data-type="slider"]')&&s.is(".ui-slider")&&parseInt(s.slider("value"))!=e.value&&(Q=!1),s.is("input")&&(parseInt(s.val())==e.value&&(j=!0),parseInt(s.val())!=e.value&&(Q=!1));break;case"superior":s.is(".lfb_datepicker")?s.is('[data-datetype="date"]')?(moment(s.datetimepicker("getDate")).format("YYYY-MM-DD 00:00")<=moment(e.value).format("YYYY-MM-DD 00:00")&&(j=!0),moment(s.datetimepicker("getDate")).format("YYYY-MM-DD 00:00")>moment(e.value).format("YYYY-MM-DD 00:00")&&(Q=!1)):s.is('[data-datetype="time"]')?(moment(s.datetimepicker("getDate")).format("HH:mm")<=e.value&&(j=!0),moment.utc(s.datetimepicker("getDate")).format("HH:mm")>e.value&&(Q=!1)):(moment.utc(s.datetimepicker("getDate")).isSameOrBefore(moment.utc(e.value).format("YYYY-MM-DD HH:mm"))&&(j=!0),moment.utc(s.datetimepicker("getDate")).isAfter(moment.utc(e.value).format("YYYY-MM-DD HH:mm"))&&(Q=!1)):s.is(".lfb_timepicker")?(r=parseInt(e.value.substr(0,e.value.indexOf(":"))),i=parseInt(e.value.substr(e.value.indexOf(":")+1,2)),0<e.value.indexOf("PM")&&12!=r&&(r+=12),o=parseInt(s.val().substr(0,s.val().indexOf(":"))),p=parseInt(s.val().substr(s.val().indexOf(":")+1,2)),0<s.val().indexOf("PM")&&12!=o&&(o+=12),(o<r||o==r&&p<=i)&&(j=!0),(r<o||o==r&&i<p)&&(Q=!1)):s.is('input[type="number"]')?(parseFloat(s.val())<=parseFloat(e.value)&&(j=!0),parseFloat(s.val())>parseFloat(e.value)&&(Q=!1)):s.is('[data-itemtype="rate"]')&&(parseFloat(s.find(".lfb_rate").rate("getValue"))<=parseFloat(e.value)&&(j=!0),parseFloat(s.find(".lfb_rate").rate("getValue"))>parseFloat(e.value)&&(Q=!1));break;case"inferior":s.is(".lfb_datepicker")?s.is('[data-datetype="date"]')?(moment.utc(s.datetimepicker("getDate")).format("YYYY-MM-DD")>=e.value&&(j=!0),moment.utc(s.datetimepicker("getDate")).format("YYYY-MM-DD")<e.value&&(Q=!1)):s.is('[data-datetype="time"]')?(moment.utc(s.datetimepicker("getDate")).format("HH:mm")>=e.value&&(j=!0),moment.utc(s.datetimepicker("getDate")).format("HH:mm")<e.value&&(Q=!1)):(moment.utc(s.datetimepicker("getDate")).isSameOrAfter(moment.utc(e.value).getTime())&&(j=!0),moment.utc(s.datetimepicker("getDate")).isBefore(moment.utc(e.value).getTime())&&(Q=!1)):s.is(".lfb_timepicker")?(r=parseInt(e.value.substr(0,e.value.indexOf(":"))),i=parseInt(e.value.substr(e.value.indexOf(":")+1,2)),0<e.value.indexOf("PM")&&12!=r&&(r+=12),o=parseInt(s.val().substr(0,s.val().indexOf(":"))),p=parseInt(s.val().substr(s.val().indexOf(":")+1,2)),0<s.val().indexOf("PM")&&12!=o&&(o+=12),(r<o||o==r&&i<=p)&&(j=!0),(o<r||o==r&&p<i)&&(Q=!1)):s.is('input[type="number"]')?(parseFloat(s.val())>=parseFloat(e.value)&&(j=!0),parseFloat(s.val())<parseFloat(e.value)&&(Q=!1)):s.is('[data-itemtype="rate"]')&&(parseFloat(s.find(".lfb_rate").rate("getValue"))>=parseFloat(e.value)&&(j=!0),parseFloat(s.find(".lfb_rate").rate("getValue"))<parseFloat(e.value)&&(Q=!1));break;case"equal":s.is(".lfb_datepicker")?s.is('[data-datetype="date"]')?(moment.utc(s.datetimepicker("getDate")).format("YYYY-MM-DD")!=e.value&&(j=!0),moment.utc(s.datetimepicker("getDate")).format("YYYY-MM-DD")==e.value&&(Q=!1)):s.is('[data-datetype="time"]')?(moment.utc(s.datetimepicker("getDate")).format("HH:mm")!=e.value&&(j=!0),moment.utc(s.datetimepicker("getDate")).format("HH:mm")==e.value&&(Q=!1)):(moment.utc(s.datetimepicker("getDate")).isSame(moment.utc(e.value).format("YYYY-MM-DD HH:mm"))||(j=!0),moment.utc(s.datetimepicker("getDate")).isSame(moment.utc(e.value).format("YYYY-MM-DD HH:mm"))&&(Q=!1)):s.is(".lfb_timepicker")?(r=parseInt(e.value.substr(0,e.value.indexOf(":"))),i=parseInt(e.value.substr(e.value.indexOf(":")+1,2)),0<e.value.indexOf("PM")&&12!=r&&(r+=12),o=parseInt(s.val().substr(0,s.val().indexOf(":"))),p=parseInt(s.val().substr(s.val().indexOf(":")+1,2)),0<s.val().indexOf("PM")&&12!=o&&(o+=12),o!=r&&(j=!0),o==r&&(Q=!1)):s.is('input[type="number"]')?(parseFloat(s.val())!=parseFloat(e.value)&&(j=!0),parseFloat(s.val())==parseFloat(e.value)&&(Q=!1)):s.is('[data-itemtype="rate"]')&&(parseFloat(s.find(".lfb_rate").rate("getValue"))!=parseFloat(e.value)&&(j=!0),parseFloat(s.find(".lfb_rate").rate("getValue"))==parseFloat(e.value)&&(Q=!1));break;case"different":s.is(".lfb_datepicker")?s.is('[data-datetype="date"]')?(moment.utc(s.datetimepicker("getDate")).format("YYYY-MM-DD")==e.value&&(j=!0),moment.utc(s.datetimepicker("getDate")).format("YYYY-MM-DD")!=e.value&&(Q=!1)):s.is('[data-datetype="time"]')?(moment.utc(s.datetimepicker("getDate")).format("HH:mm")==e.value&&(j=!0),moment.utc(s.datetimepicker("getDate")).format("HH:mm")!=e.value&&(Q=!1)):(moment.utc(s.datetimepicker("getDate")).isSame(moment.utc(e.value).format("YYYY-MM-DD HH:mm"))&&(j=!0),moment.utc(s.datetimepicker("getDate")).isSame(moment.utc(e.value).format("YYYY-MM-DD HH:mm"))||(Q=!1)):s.is(".lfb_timepicker")?(r=parseInt(e.value.substr(0,e.value.indexOf(":"))),i=parseInt(e.value.substr(e.value.indexOf(":")+1,2)),0<e.value.indexOf("PM")&&12!=r&&(r+=12),o=parseInt(s.val().substr(0,s.val().indexOf(":"))),p=parseInt(s.val().substr(s.val().indexOf(":")+1,2)),0<s.val().indexOf("PM")&&12!=o&&(o+=12),o==r&&(j=!0),o!=r&&(Q=!1)):s.is('input[type="number"]')?(parseFloat(s.val())==parseFloat(e.value)&&(j=!0),parseFloat(s.val())!=parseFloat(e.value)&&(Q=!1)):s.is('[data-itemtype="rate"]')&&(parseFloat(s.find(".lfb_rate").rate("getValue"))==parseFloat(e.value)&&(j=!0),parseFloat(s.find(".lfb_rate").rate("getValue"))!=parseFloat(e.value)&&(Q=!1))}}}else{if("v_"==e.interaction.substr(0,2)){var d,l,u,m=e.interaction.substr(e.interaction.indexOf("_")+1,e.interaction.length-(e.interaction.indexOf("_")+1)),f=parseFloat(lfb_getVariableByID(form,m).value);switch(e.value&&-1<e.value.indexOf("_")?"_"!=e.value.substr(0,1)?(d=e.value.substr(0,e.value.indexOf("_")),l=e.value.substr(e.value.indexOf("-")+1,e.value.length),0==d&&(d="final"),m=e.value.substr(e.value.indexOf("_")+1,e.value.indexOf("-")-(e.value.indexOf("_")+1)),"v"==d?e.value=parseFloat(lfb_getVariableByID(form,m).value):"stepqt"==l?e.value=wpe_getStepQuantities(t,h,a):0<(u=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+h+'"] #mainPanel .genSlide[data-stepid="'+d+'"] .genContent [data-itemid="'+m+'"]')).length&&(""==l?void 0!==u.data("resprice")?e.value=parseFloat(u.data("resprice")):u.is("[data-resqt]")&&(e.value=parseFloat(u.attr("data-resqt"))):"quantity"==l?u.is(".lfb_disabled")?e.value=0:u.is('input[type="number"]')?e.value=u.val():0<u.find(".wpe_qtfield").length?e.value=parseInt(u.find(".wpe_qtfield").val()):e.value=parseInt(u.find(".icon_quantity").html()):"value"==l&&(u.is(".lfb_disabled")?e.value="":(e.value=u.val(),u.is(".lfb_datepicker")&&(e.value=moment.utc(u.datetimepicker("getDate")).format("YYYY-MM-DD")),e.value=e.value.replace(/\`/g,"'"))))):"_total"==e.value||"_total-"==e.value?e.value=form.price:"_total_qt"==e.value&&(e.value=wpe_getTotalQuantities(h,g,a)):e.value&&(e.value=e.value.replace(/\`/g,"'")),e.action){case"superior":f<=e.value&&(j=!0),f>e.value&&(Q=!1);break;case"inferior":f>=e.value&&(j=!0),f<e.value&&(Q=!1);break;case"equal":f!=e.value&&(j=!0),f==e.value&&(Q=!1);break;case"different":f==e.value&&(j=!0),f!=e.value&&(Q=!1)}}else if(e.interaction&&6<e.interaction.length&&"_step-"==e.interaction.substr(0,6)){0==(t=e.interaction.substr(6,e.interaction.length))&&(t="final");var c=wpe_getStepQuantities(h,t,a);switch(e.action){case"superior":c<=e.value&&(j=!0),c>e.value&&(Q=!1);break;case"inferior":c>=e.value&&(j=!0),c<e.value&&(Q=!1);break;case"equal":c!=e.value&&(j=!0),c==e.value&&(Q=!1);break;case"different":c==e.value&&(j=!0),c!=e.value&&(Q=!1)}}if("_total"==e.interaction)switch(e.action){case"superior":parseFloat(form.price)<=parseFloat(e.value)&&(j=!0),parseFloat(form.price)>parseFloat(e.value)&&(Q=!1);break;case"inferior":parseFloat(form.price)>=parseFloat(e.value)&&(j=!0),parseFloat(form.price)<parseFloat(e.value)&&(Q=!1);break;case"equal":parseFloat(form.price)!=parseFloat(e.value)&&(j=!0),parseFloat(form.price)==parseFloat(e.value)&&(Q=!1);break;case"different":parseFloat(form.price)==e.value&&(j=!0),parseFloat(form.price)!=e.value&&(Q=!1)}else if("_total_qt"==e.interaction){c=wpe_getTotalQuantities(h,g);switch(e.action){case"superior":c<=e.value&&(j=!0),c>e.value&&(Q=!1);break;case"inferior":c>=e.value&&(j=!0),c<e.value&&(Q=!1);break;case"equal":c!=e.value&&(j=!0),c==e.value&&(Q=!1);break;case"different":c==e.value&&(j=!0),c!=e.value&&(Q=!1)}}else if(2<e.interaction.length&&"v_"==e.interaction.substr(0,2)){var _=0,y=e.interaction.substr(2,e.interaction.length),b=lfb_getVariableByID(form,y);switch(b&&(_=b.value),e.action){case"superior":_<=e.value&&(j=!0),_>e.value&&(Q=!1);break;case"inferior":_>=e.value&&(j=!0),_<e.value&&(Q=!1);break;case"equal":_!=e.value&&(j=!0),_==e.value&&(Q=!1);break;case"different":_==e.value&&(j=!0),_!=e.value&&(Q=!1)}}}}),0==t.length&&(Q=!1),{error:j,errorOR:Q}}function lfb_scrollToItem(t,e,a){var r;"final"==e&&(r=wpe_getForm(a),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"]').is(".wpe_fullscreen")||jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"]').is(".wpe_popup")?jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"]').animate({scrollTop:t.parent().offset().top-(80+parseInt(r.scrollTopMargin))},2*r.animationsSpeed):"1"==r.scrollTopPage?jQuery("body,html").animate({scrollTop:0},2*r.animationsSpeed):jQuery("body,html").animate({scrollTop:t.parent().offset().top-(80+parseInt(r.scrollTopMargin))},2*r.animationsSpeed))}function lfb_checkStepItemsValid(r,i){var o=!0,p=!1,t=wpe_getForm(i);return jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+i+'"] #mainPanel .genSlide[data-stepid="'+r+'"]').find(".has-error").removeClass("has-error"),jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+i+'"] #mainPanel .genSlide[data-stepid="'+r+'"]').find(".icon_select.lfb_error").removeClass("lfb_error"),jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+i+'"] #mainPanel .genSlide[data-stepid="'+r+'"]').find("input[type=text]:not(.lfb_disabled),input[type=password]:not(.lfb_disabled)").each(function(){var t,e,a;0==jQuery(this).closest(".itemBloc.lfb_disabled").length&&0==jQuery(this).closest("#lfb_stripeForm").length&&0==jQuery(this).closest("#wtmt_paypalForm").length&&(jQuery(this).is('[data-required="true"]')&&jQuery(this).val().length<1&&(o=!1,jQuery(this).closest(".form-group").addClass("has-error"),p||lfb_scrollToItem(jQuery(this),r,i),p=!0),jQuery(this).is('[data-validation="phone"]')&&0<jQuery(this).val().length&&(jQuery(this).val().length<5||0==/^(?:(?:\(?(?:00|\+)([1-4]\d\d|[1-9]\d?)\)?)?[\-\.\ \\\/]?)?((?:\(?\d{1,}\)?[\-\.\ \\\/]?){0,})(?:[\-\.\ \\\/]?(?:#|ext\.?|extension|x)[\-\.\ \\\/]?(\d+))?$/i.test(jQuery(this).val()))||jQuery(this).is('[data-validation="email"]')&&0<jQuery(this).val().length&&!wpe_checkEmail(jQuery(this).val())||jQuery(this).is('[data-validation="fill"]')&&0==jQuery(this).val().length?(o=!1,jQuery(this).closest(".form-group").addClass("has-error"),p||lfb_scrollToItem(jQuery(this),r,i),p=!0):jQuery(this).is('[data-validation="custom"]')&&0<jQuery(this).val().length&&(t=!1,0<parseInt(jQuery(this).attr("data-validmin"))&&jQuery(this).val().length<parseInt(jQuery(this).attr("data-validmin"))&&(t=!0),0<parseInt(jQuery(this).attr("data-validmax"))&&jQuery(this).val().length>parseInt(jQuery(this).attr("data-validmax"))&&(t=!0),jQuery(this).is("[data-validcar]")&&""!=jQuery(this).attr("data-validcar")&&(e=jQuery(this),-1<jQuery(this).attr("data-validcar").indexOf(",")?(a=jQuery(this).attr("data-validcar").split(","),jQuery.each(a,function(){-1==e.val().indexOf(this)&&(t=!0)})):-1==e.val().indexOf(jQuery(this).attr("data-validcar"))&&(t=!0)),t&&(o=!1,jQuery(this).closest(".form-group").addClass("has-error"),p||lfb_scrollToItem(jQuery(this),r,i),p=!0)))}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] #mainPanel .genSlide[data-stepid="'+r+'"]').find("input[type=text][minlength]:not(.lfb_disabled)").each(function(){jQuery(this).val().length<jQuery(this).attr("minlength")&&(o=!1,jQuery(this).closest(".form-group").addClass("has-error"),p||lfb_scrollToItem(jQuery(this),r,i))}),jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+i+'"] #mainPanel .genSlide[data-stepid="'+r+'"]').find('select[data-required="true"]:not(.lfb_disabled)').each(function(){jQuery(this).is('[data-firstvaluedisabled="true"]')&&(!jQuery(this).is(".lfb_selectpicker")&&0==jQuery(this).find("option:selected").index()||jQuery(this).is(".lfb_selectpicker")&&jQuery(this).val()==jQuery(this).find("option").first().attr("value"))&&(o=!1,jQuery(this).closest(".form-group").addClass("has-error"),p||lfb_scrollToItem(jQuery(this),r,i))}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] #mainPanel .genSlide[data-stepid="'+r+'"]').find("input[type=text][minlength]:not(.lfb_disabled)").each(function(){jQuery(this).val().length<jQuery(this).attr("minlength")&&(o=!1,jQuery(this).closest(".form-group").addClass("has-error"),p||lfb_scrollToItem(jQuery(this),r,i))}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] #mainPanel .genSlide[data-stepid="'+r+'"]').find('input[type=number][data-required="true"]:not(.lfb_disabled)').each(function(){""!=jQuery(this).val()&&0!=jQuery(this).val()||(o=!1,jQuery(this).closest(".form-group").addClass("has-error"),p||lfb_scrollToItem(jQuery(this),r,i))}),jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+i+'"] #mainPanel .genSlide[data-stepid="'+r+'"]').find(".lfb_dropzone:not(.lfb_disabled)").each(function(){(jQuery(this).is('[data-required="true"]')&&0==jQuery(this).find(".dz-preview[data-file].dz-success.dz-complete").length||jQuery(this).find(".dz-preview[data-file].dz-complete").length>parseInt(jQuery(this).attr("data-maxfiles")))&&(o=!1,jQuery(this).parent().addClass("has-error"),p||lfb_scrollToItem(jQuery(this),r,i))}),jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+i+'"] #mainPanel .genSlide[data-stepid="'+r+'"]').find('textarea[data-required="true"]:not(.lfb_disabled)').each(function(){0==jQuery(this).closest("#lfb_stripeForm").length&&0==jQuery(this).closest("#wtmt_paypalForm").length&&jQuery(this).val().length<1&&(o=!1,jQuery(this).closest(".form-group").addClass("has-error"),p||lfb_scrollToItem(jQuery(this),r,i))}),jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+i+'"] #mainPanel .genSlide[data-stepid="'+r+'"]').find('input[type=checkbox][data-required="true"]:not(.lfb_disabled)').each(function(){jQuery(this).is(":checked")||jQuery(this).is("[data-group]")&&(""==jQuery(this).attr("data-group")||0!=jQuery(' #estimation_popup[data-form="'+i+'"] #mainPanel .genSlide[data-stepid="'+r+'"] [data-group="'+jQuery(this).attr("data-group")+'"]:checked').length)||(o=!1,jQuery(this).closest(".form-group,p,.itemBloc").addClass("has-error"),p||lfb_scrollToItem(jQuery(this),r,i))}),jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+i+'"] #mainPanel .genSlide[data-stepid="'+r+'"]').find('.selectable[data-required="true"]:not(.lfb_disabled)').each(function(){jQuery(this).is(".checked")||jQuery(this).is("[data-group]")&&(""==jQuery(this).attr("data-group")||0!=jQuery(' #estimation_popup[data-form="'+i+'"] #mainPanel .genSlide[data-stepid="'+r+'"] [data-group="'+jQuery(this).attr("data-group")+'"].checked').length)||(o=!1,jQuery(this).find(".icon_select").addClass("lfb_error"),p||lfb_scrollToItem(jQuery(this),r,i))}),jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+i+'"] #mainPanel .genSlide[data-stepid="'+r+'"]').find('.lfb_button[data-required="true"]:not(.lfb_disabled)').each(function(){jQuery(this).is(".checked")||jQuery(this).is("[data-group]")&&(""==jQuery(this).attr("data-group")||0!=jQuery(' #estimation_popup[data-form="'+i+'"] #mainPanel .genSlide[data-stepid="'+r+'"] [data-group="'+jQuery(this).attr("data-group")+'"].checked').length)||(o=!1,jQuery(this).find(".icon_select").addClass("lfb_error"),p||lfb_scrollToItem(jQuery(this),r,i))}),"final"==r&&1==t.useSignature&&0==JSON.parse(t.signature.signature("toJSON")).lines.length&&(o=!1,jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] #lfb_signature').addClass("has-error"),p||lfb_scrollToItem(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] #lfb_signature'),r,i),p=!0),o}function wpe_nextStep(t){var e=wpe_getForm(t);jQuery("#lfb_bootstraped :not(.ui-slider-handle) > .tooltip").remove(),jQuery('#estimation_popup[data-form="'+e.formID+'"] > .tooltip').remove(),navigator.userAgent.toLowerCase().match(/(iPad|iPhone|iPod)/i)&&setTimeout(function(){jQuery("#lfb_bootstraped :not(.ui-slider-handle) > .tooltip").remove()},500),lfb_updateShowSteps(t),jQuery(".errorMsg").hide();var a,r,i=!0,o=!0,p=wpe_findPotentialsSteps(e.step,t);0<e.step&&(1==jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+t+'"] #mainPanel .genSlide[data-stepid="'+e.step+'"]').data("required")&&(i=!1,(0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"] #mainPanel .genSlide[data-stepid="'+e.step+'"]').find('select:not(.lfb_disabled):not([data-firstvaluedisabled="true"])').length||0<jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+t+'"] #mainPanel .genSlide[data-stepid="'+e.step+'"]').find("div.selectable.checked:not(.lfb_disabled)").length||0<jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+t+'"] #mainPanel .genSlide[data-stepid="'+e.step+'"]').find("a.lfb_button.checked:not(.lfb_disabled)").length||0<jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+t+'"] #mainPanel .genSlide[data-stepid="'+e.step+'"]').find('input[data-toggle="switch"]:checked:not(.lfb_disabled)').length||0<jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+t+'"] #mainPanel .genSlide[data-stepid="'+e.step+'"]').find("input[type=text][data-title].checked:not(.lfb_disabled)").length||0<jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+t+'"] #mainPanel .genSlide[data-stepid="'+e.step+'"]').find('[data-itemtype="rate"][data-title].checked:not(.lfb_disabled)').length||0<jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+t+'"] #mainPanel .genSlide[data-stepid="'+e.step+'"]').find("input[type=number][data-itemid].checked:not(.lfb_disabled)").length||0<jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+t+'"] #mainPanel .genSlide[data-stepid="'+e.step+'"]').find("input[type=file].checked:not(.lfb_disabled)").length||0<jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+t+'"] #mainPanel .genSlide[data-stepid="'+e.step+'"]').find(".lfb_colorPreview:not(.lfb_disabled)").length||0<jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+t+'"] #mainPanel .genSlide[data-stepid="'+e.step+'"]').find(".dz-preview[data-file].dz-success.dz-complete").length)&&(i=!0),i||jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"] #mainPanel .genSlide[data-stepid="'+e.step+'"]').find('select:not(.lfb_disabled)[data-firstvaluedisabled="true"]').each(function(){(!jQuery(this).is(".lfb_selectpicker")&&0<jQuery(this).find("option:selected").index()||jQuery(this).is(".lfb_selectpicker")&&1<jQuery(this).find("option:selected").index())&&(i=!0)})),o=lfb_checkStepItemsValid(e.step,t)),i&&o&&lfb_checkUserEmail(e)?(lfb_lastStepID=e.step,parseFloat(lfb_lastStepID)!=parseInt(lfb_lastStepID)||isNaN(lfb_lastStepID)||-1==jQuery.inArray(parseInt(e.step),lfb_lastSteps)&&lfb_lastSteps.push(parseInt(e.step)),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"] #mainPanel .genSlide[data-stepid="'+lfb_lastStepID+'"] .stepTitle').html(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"]').is(".wpe_fullscreen")&&!jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"]').is(".wpe_popup")&&history.pushState({id:lfb_lastStepID},"",""),"final"!=(a=p[0])&&-1==(a=wpe_getNextEnabledStep(t,p))&&(a="final"),1==e.sendContactASAP&&0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"] #mainPanel .genSlide[data-stepid="'+e.step+'"] [data-fieldtype="email"]').length&&wpe_checkEmail(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"] #mainPanel .genSlide[data-stepid="'+e.step+'"] [data-fieldtype="email"]').val())&&(e.contactSent=1,r=wpe_getContactInformations(t),jQuery.ajax({url:e.ajaxurl,type:"post",data:{action:"lfb_sendCt",formID:t,email:r.email,lastName:r.lastName,firstName:r.firstName,phone:r.phone,country:r.country,zip:r.zip,state:r.state,city:r.city,address:r.address},success:function(t){}})),wpe_changeStep(a,t)):i||(jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+t+'"] .errorMsg').slideDown(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"]').trigger("stepError"))}function wpe_getNextEnabledStep(t,e){var a=-1,r=e[0];return"final"!=r&&(a=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"]').is(".lfb_visualEditing")||!jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"]  #mainPanel .genSlide[data-stepid="'+r+'"]').is(".lfb_disabled")&&(0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"] #mainPanel .genSlide[data-stepid="'+r+'"] .lfb_item:not(.lfb-hidden)').length||0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"] #mainPanel .genSlide[data-stepid="'+r+'"] .lfb_distanceError').length)?r:(lfb_lastSteps.push(parseInt(r)),wpe_updatePrice(t),wpe_getNextEnabledStep(t,wpe_findPotentialsSteps(parseInt(r),t)))),a}function wpe_openGenerator(t){var e=wpe_getForm(t);jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"]  #startInfos > p').slideDown(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"] .lfb_btnFloatingSummary').css({display:"inline-block"}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"] .lfb_btnSaveForm').css({display:"inline-block"}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e.formID+'"] #btnStart').parent().fadeOut(e.animationsSpeed,function(){"2"!=e.showSteps&&jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"]').find(".genPrice,#lfb_stepper").fadeIn(e.animationsSpeed),e.autoStart||jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+e.formID+'"] #mainPanel').fadeIn(e.animationsSpeed+e.animationsSpeed/2,function(){wpe_nextStep(t)})})}function wpe_initListeners(i){var o=wpe_getForm(i);jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] #mainPanel .genSlide div.selectable .img,  #estimation_popup.wpe_bootstraped[data-form="'+i+'"] #mainPanel .genSlide div.selectable .icon_select').click(function(){tld_selectionMode||wpe_itemClick(jQuery(this).parent(),!0,i)}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] #mainPanel .genSlide a.lfb_button').click(function(){tld_selectionMode||wpe_itemClick(jQuery(this),!0,i)}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] #mainPanel .genSlide [data-callnextstep="1"]').click(function(){!tld_selectionMode&&jQuery(this).is(".checked")&&wpe_nextStep(i)}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] #mainPanel input[type=checkbox][data-price]').change(function(){jQuery(this).is('[data-usedistance="true"]')&&lfb_removeDistanceError(jQuery(this).attr("data-itemid"),i),wpe_updatePrice(i,jQuery(this).attr("data-itemid"))}),jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+i+'"] #mainPanel input[type=checkbox][data-group]').change(function(t){var e=jQuery(this);e.is(":checked")&&(jQuery(this).closest(".genSlide").find('div.selectable.checked[data-group="'+e.data("group")+'"]').each(function(){wpe_itemClick(jQuery(this),!1,i)}),jQuery(this).closest(".genSlide").find('input[type=checkbox][data-group="'+e.data("group")+'"]:checked').each(function(){jQuery(this).is(e)||jQuery(this).trigger("click.auto")}),jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+i+'"]').is('[data-autoclick="1"]')&&0==e.closest(".genSlide").find("[data-itemid]").not('[data-group="'+e.data("group")+'"]').length&&wpe_nextStep(wpe_getForm(i).formID))}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] #mainPanel .genSlide select[data-itemid]').change(function(){var t=jQuery(this).val(),e=0;jQuery(this).find("option").each(function(){jQuery(this).attr("value")==t&&(e=jQuery(this).attr("data-price"))}),jQuery(this).attr("data-price",e),jQuery(this).data("price",e),wpe_updatePrice(i)}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] #mainPanel .genSlide select[data-itemid]').trigger("change"),jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"] #mainPanel input[type=checkbox][data-price]').change(function(){}),jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"] #mainPanel .genSlide input.wpe_qtfield').change(function(){wpe_updatePrice(i,jQuery(this).attr("data-itemid"))}),jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"] #mainPanel .genSlide').find("input[type=text][data-title],textarea[data-title],input[type=file][data-title],input[type=number][data-title]").change(function(){0<jQuery(this).val().length?(jQuery(this).addClass("checked"),jQuery(this).addClass("lfb_changed")):jQuery(this).removeClass("checked")}),jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"] #mainPanel .genSlide div.selectable .icon_quantity').click(function(){tld_selectionMode||(jQuery(".quantityBtns").not(jQuery(this).parent().find(".quantityBtns")).removeClass("open"),jQuery(".quantityBtns").not(jQuery(this).parent().find(".quantityBtns")).fadeOut(250),!jQuery(this).parent().find(".quantityBtns").is(".open")&&jQuery(this).parent().is(".checked")?(0<jQuery(this).parent().find(".quantityBtns .tooltip-inner").length&&jQuery(this).parent().find(".quantityBtns .tooltip-inner").html(parseInt(jQuery(this).parent().find(".icon_quantity").html())),jQuery(this).parent().find(".quantityBtns").addClass("open"),jQuery(this).parent().find(".quantityBtns").fadeIn(250)):(jQuery(this).parent().find(".quantityBtns").removeClass("open"),jQuery(this).parent().find(".quantityBtns").fadeOut(250)))}),jQuery("#wpe_orderMessageCheck").change(function(){jQuery(this).is(":checked")?jQuery("#wpe_orderMessage").slideDown(250):jQuery("#wpe_orderMessage").slideUp(250)}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"] #wpe_btnOrder').click(function(){tld_selectionMode||wpe_order(i)}),jQuery("#gform_wrapper_"+o.gravityFormID+" form").submit(function(t){var e,a,r=jQuery(this);jQuery(this).is(".submit")?jQuery(this).removeClass("submit"):(t.preventDefault(),jQuery(this).addClass("submit"),o.save_to_cart?(e=new Array,a=lfb_lastSteps.slice(),"final"!=o.step&&-1==jQuery.inArray(parseInt(o.step),a)?a.push(parseInt(o.step)):"final"==o.step&&-1==jQuery.inArray("final",a)&&a.push("final"),jQuery.each(a,function(){$panel=jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+i+'"] #mainPanel .genSlide[data-stepid="'+this+'"]'),$panel.find('div.selectable.checked:not(.lfb_disabled),a.lfb_button.checked:not(.lfb_disabled),input[type=checkbox]:checked:not(.lfb_disabled),[data-type="slider"]:not(.lfb_disabled)').each(function(){var t=1;0<parseInt(jQuery(this).data("resqt"))&&(t=parseInt(jQuery(this).data("resqt"))),jQuery(this).is('[data-type="slider"]')&&(t=parseInt(jQuery(this).slider("value")),isNaN(parseInt(jQuery(this).find(".tooltip-inner").html()))||(t=parseInt(jQuery(this).find(".tooltip-inner").html()))),0<parseInt(jQuery(this).data("prodid"))&&e.push({quantity:t,product_id:parseInt(jQuery(this).data("prodid")),variation:parseInt(jQuery(this).attr("data-woovar"))})})}),jQuery.ajax({url:o.ajaxurl,type:"post",data:{action:"lfb_cart_save",ref:o.current_ref,emptyWooCart:o.emptyWooCart,products:e},success:function(){o.timer_gFormSubmit=setInterval(function(){wpe_check_gform_response(o.formID)},300),setTimeout(function(){r.submit()},700)}})):(o.timer_gFormSubmit=setInterval(function(){wpe_check_gform_response(o.formID)},300),setTimeout(function(){r.submit()},700)))})}function wpe_checkItems(t){var r=wpe_getForm(t);jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #mainPanel .genSlide div.selectable img[data-tint="true"]').each(function(){jQuery(this).css("opacity",0),jQuery(this).show();var t=jQuery('<canvas class="img"></canvas>');t.css({width:jQuery(this).get(0).width,height:jQuery(this).get(0).height}),jQuery(this).hide(),jQuery(this).after(t);var e=t.get(0).getContext("2d"),a=new Image;a.onload=function(){e.fillStyle=r.colorA,e.fillRect(0,0,t.get(0).width,t.get(0).height),e.fill(),e.globalCompositeOperation="destination-in",e.drawImage(a,0,0,t.get(0).width,t.get(0).height)},jQuery(this).is("[data-lazy-src]")?a.src=jQuery(this).attr("data-lazy-src"):a.src=jQuery(this).attr("src")}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #mainPanel .genSlide div.selectable img[data-tint="false"]').each(function(){jQuery(this).is("[data-src]")&&jQuery(this).attr("src",jQuery(this).attr("data-src"))}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #mainPanel .genSlide div.selectable.checked , #estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #mainPanel .genSlide  input[type=checkbox]:checked').hover(function(){jQuery(this).addClass("lfb_hover")},function(){jQuery(this).removeClass("lfb_hover")})}function lfb_getDistanceCalc(t,o,p,e,a,s){var r;google.maps.UnitSystem.METRIC;return"route"==wpe_getForm(o).distancesMode?(lfb_gmapService=new google.maps.DistanceMatrixService).getDistanceMatrix({origins:[e],destinations:[a],travelMode:google.maps.TravelMode.DRIVING,unitSystem:google.maps.UnitSystem.METRIC,avoidHighways:!1,avoidTolls:!1},function(t,e){var a,r=!1;e==google.maps.DistanceMatrixStatus.OK?(a=0,t.rows[0].elements[0].distance?(a=t.rows[0].elements[0].distance.value,a/=1e3,"miles"==s?a*=.62:"mins"==s?a=Math.round(parseInt(t.rows[0].elements[0].duration.value)/60):"hours"==s&&(a=Math.round(parseInt(t.rows[0].elements[0].duration.value)/60/60))):r=!0,jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o+'"] [data-itemid="'+p+'"]'),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o+'"] [data-itemid="'+p+'"]').attr("data-distance",a),wpe_updateSummary(o),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o+'"] #lfb_summary table tr[data-itemstep="'+p+'"] td:eq(2)').html(a),wpe_updatePrice(o),lfb_removeDistanceError(p,o)):r=!0,r&&lfb_showDistanceError(p,o)}):(r=new google.maps.Geocoder).geocode({address:e},function(t,e){var i;void 0!==t[0]?(i=t[0].geometry.location,r.geocode({address:a},function(t,e){var a,r;void 0!==t[0]?(a=t[0].geometry.location,r=google.maps.geometry.spherical.computeDistanceBetween(i,a),r/=1e3,"miles"==s&&(r*=.62),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o+'"] [data-itemid="'+p+'"]'),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o+'"] [data-itemid="'+p+'"]').attr("data-distance",r),wpe_updateSummary(o),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o+'"] #lfb_summary table tr[data-itemstep="'+p+'"] td:eq(2)').html(r),wpe_updatePrice(o),lfb_removeDistanceError(p,o)):lfb_showDistanceError(p,o)})):lfb_showDistanceError(p,o)}),0}function lfb_executeCalculation(calculation,formID,targetID){calculation=calculation.replace(/\\/g,"");var form=wpe_getForm(formID),price=0,i=0,elementsToReplace=new Array,itemData=lfb_getItemData(form,targetID),_stepID=itemData.stepid;for(calculation=calculation.replace(/\[variable\]/g,"[price]"),calculation=calculation.replace(/\[quantity\]/g,"[price]"),calculation=calculation.replace(/\[value\]/g,"[price]");-1!=(i=calculation.indexOf("variable-",i+1));){var variableID=calculation.substr(i+9,calculation.indexOf("]",i)-(i+9)),value=0,variable=lfb_getVariableByID(form,variableID);variable&&(value=variable.value),elementsToReplace.push({oldValue:calculation.substr(i-1,calculation.indexOf("]",i)+1-(i-1)),newValue:value})}for(;-1!=(i=calculation.indexOf("item-",i+1));){var itemID=calculation.substr(i+5,calculation.indexOf("_",i)-(i+5)),action=calculation.substr(calculation.indexOf("_",i)+1,calculation.indexOf("]",i)-1-calculation.indexOf("_",i)),value=0,calItemData=lfb_getItemData(form,itemID),value,$item;"isChecked"==action&&(value=calItemData?"1==1":"1==0"),"isUnchecked"==action&&(value=calItemData?"1==0":"1==1"),"isFilled"==action&&(value="filefield"==calItemData.type?0<calItemData.files.length?"1==1":"1==0":(value=0,void 0===calItemData.value?void 0!==calItemData.quantity&&(value=calItemData.quantity):value=calItemData.value,0<value.length?"1==1":"1==0")),"price"==action&&(value=0,"total"==itemID?value=form.price:(value=0,void 0!==calItemData.price&&(value=calItemData.price))),"quantity"==action&&(value=0,void 0!==calItemData.quantity&&(value=calItemData.quantity)),"value"==action&&(value=0,"numberfield"==calItemData.type?(void 0!==calItemData.quantity?value=calItemData.quantity:void 0!==calItemData.value&&(value=calItemData.value),isNaN(value)&&(value=0)):value="'"+calItemData.value+"'"),"date"==action&&($item=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+itemID+'"]'),value=$item.is(".lfb_datepicker")&&null!=$item.datetimepicker("getDate")?"'"+moment($item.datetimepicker("getDate")).format("YYYY-MM-DD")+"'":"null"),elementsToReplace.push({oldValue:calculation.substr(i-1,calculation.indexOf("]",i)+1-(i-1)),newValue:value})}for(;-1!=(i=calculation.indexOf("step-",i+1));){var stepID=calculation.substr(i+5,calculation.indexOf("_",i)-(i+5)),action=calculation.substr(calculation.indexOf("_",i)+1,calculation.indexOf("]",i)-1-calculation.indexOf("_",i));"quantity"==action&&(value=wpe_getStepQuantities(formID,stepID,targetID)),elementsToReplace.push({oldValue:calculation.substr(i-1,calculation.indexOf("]",i)+1-(i-1)),newValue:value})}var todayDate=new Date,month=todayDate.getMonth()+1;month<10&&(month="0"+month);var today=todayDate.getFullYear().toString()+month.toString()+todayDate.getDate().toString(),charsToStart;if(calculation=calculation.replace(/\[currentDate\]/g,today),-1<calculation.indexOf("dateDifference-"))for(;-1!=(i=calculation.indexOf("dateDifference-",i+1));){var startDateAdPosEnd=calculation.indexOf("_",i+15)+1,startDate=calculation.substr(i+15,calculation.indexOf("_",i)-(i+15)),endDate=calculation.substr(startDateAdPosEnd,calculation.indexOf("]",startDateAdPosEnd)-startDateAdPosEnd),$item,startDate,$item,endDate;startDate="currentDate"!=startDate&&0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+startDate+'"]').length&&0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+startDate+'"]').val().length?($item=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+startDate+'"]'),$item.datetimepicker("getDate")):todayDate,endDate="currentDate"!=endDate&&0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+endDate+'"]').length&&0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+endDate+'"]').val().length?($item=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+endDate+'"]'),$item.datetimepicker("getDate")):todayDate,startDate.setMinutes(0),startDate.setHours(0),endDate.setMinutes(0),endDate.setHours(0);var timeDiff=Math.abs(endDate.getTime()-startDate.getTime()),result=Math.round(timeDiff/864e5);result<0&&(result=0),elementsToReplace.push({oldValue:calculation.substr(i-1,calculation.indexOf("]",i)+1-(i-1)),newValue:result})}if(-1<calculation.indexOf("distance_")){var $target=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+targetID+'"]');for($target.attr("data-usedistance","true");-1!=(i=calculation.indexOf("distance_",i+1));){var distanceType="km",departAdPosEnd=calculation.indexOf("-",i+9)+1,departAdress=calculation.substr(i+9,calculation.indexOf("-",i)-(i+9)),departCityPosEnd=calculation.indexOf("-",departAdPosEnd)+1,departCity=calculation.substr(departAdPosEnd,calculation.indexOf("-",departAdPosEnd)-departAdPosEnd),departZipPosEnd=calculation.indexOf("-",departCityPosEnd)+1,departZip=calculation.substr(departCityPosEnd,calculation.indexOf("-",departCityPosEnd)-departCityPosEnd),departCountryPosEnd=calculation.indexOf("_",departZipPosEnd)+1,departCountry=calculation.substr(departZipPosEnd,calculation.indexOf("_",departZipPosEnd)-departZipPosEnd),arrivalAdPosEnd=calculation.indexOf("-",departCountryPosEnd)+1,arrivalAdress=calculation.substr(departCountryPosEnd,calculation.indexOf("-",departCountryPosEnd)-departCountryPosEnd),arrivalCityPosEnd=calculation.indexOf("-",arrivalAdPosEnd)+1,arrivalCity=calculation.substr(arrivalAdPosEnd,calculation.indexOf("-",arrivalAdPosEnd)-arrivalAdPosEnd),arrivalZipPosEnd=calculation.indexOf("-",arrivalCityPosEnd)+1,arrivalZip=calculation.substr(arrivalCityPosEnd,calculation.indexOf("-",arrivalCityPosEnd)-arrivalCityPosEnd),arrivalCountryPosEnd=calculation.indexOf("_",arrivalZipPosEnd)+1,arrivalCountry=calculation.substr(arrivalZipPosEnd,calculation.indexOf("_",arrivalZipPosEnd)-arrivalZipPosEnd),$item,departAdress,$item,departCity,$item,departZip,$item,departCountry,$item,arrivalAdress,$item,arrivalCity,$item,arrivalZip,$item,arrivalCountry,distanceType=calculation.substr(arrivalCountryPosEnd,calculation.indexOf("]",arrivalCountryPosEnd)-arrivalCountryPosEnd);""!=departAdress&&(departAdress=0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+departAdress+'"]').length?($item=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+departAdress+'"]'),$item.val()):0),""!=departCity&&(departCity=0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+departCity+'"]').length?($item=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+departCity+'"]'),$item.val()):0),""!=departZip&&(departZip=0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+departZip+'"]').length?($item=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+departZip+'"]'),$item.val()):0),""!=departCountry&&(departCountry=0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+departCountry+'"]').length?($item=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+departCountry+'"]'),$item.val()):0),""!=arrivalAdress&&(arrivalAdress=0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+arrivalAdress+'"]').length?($item=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+arrivalAdress+'"]'),$item.val()):0),""!=arrivalCity&&(arrivalCity=0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+arrivalCity+'"]').length?($item=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+arrivalCity+'"]'),$item.val()):0),""!=arrivalZip&&(arrivalZip=0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+arrivalZip+'"]').length?($item=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+arrivalZip+'"]'),$item.val()):0),""!=arrivalCountry&&(arrivalCountry=0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+arrivalCountry+'"]').length?($item=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+arrivalCountry+'"]'),$item.val()):0),0<$target.closest(".genSlide").find(".lfb_distanceError").length&&lfb_removeDistanceError(targetID,formID);var distanceCode=calculation.substr(i-1,calculation.indexOf("]",i)+1-(i-1)),distance=0,depart,arrival;""!=$target.attr("data-distance")&&(distance=parseFloat($target.attr("data-distance"))),""==departAdress&&""==departCity&&""==departCountry&&""==arrivalAdress&&""==arrivalCity&&""==arrivalCountry&&""==departZip&&""==arrivalZip?lfb_showDistanceError(targetID,formID):""==form.gmap_key?(lfb_showDistanceError(targetID,formID),console.log("invalid gmap api key")):(depart=departAdress+" "+departZip+" "+departCity+" "+departCountry,arrival=arrivalAdress+" "+arrivalZip+" "+arrivalCity+" "+arrivalCountry,$target.attr("data-departure")==depart&&arrival==$target.attr("data-arrival")||($target.attr("data-departure",depart),$target.attr("data-arrival",arrival),lfb_getDistanceCalc(distanceCode,formID,targetID,depart,arrival,distanceType))),elementsToReplace.push({oldValue:calculation.substr(i-1,calculation.indexOf("]",i)+1-(i-1)),newValue:distance})}}if(jQuery.each(elementsToReplace,function(){calculation=calculation.replace(this.oldValue,this.newValue)}),calculation=calculation.replace(/\[total_single\]/g,form.priceSingle),calculation=calculation.replace(/\[total_default\]/g,form.price),calculation=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"]').is("[data-isSubs]")&&(itemData&&itemData.isSinglePrice||jQuery('[data-itemid="'+targetID+'"]').is('[data-singleprice="true"]'))?calculation.replace(/\[total\]/g,form.priceSingle):calculation.replace(/\[total\]/g,form.price),-1<calculation.indexOf("[total_quantity]")&&(calculation=calculation.replace(/\[total_quantity\]/g,wpe_getTotalQuantities(formID,_stepID,targetID))),-1==calculation.indexOf("[price]")){for(i=0;-1!=(i=calculation.indexOf("{",i+1));){var charsToEnd=calculation.substr(i+1,calculation.indexOf("}",i+1)-(i+1));/\S/.test(charsToEnd)&&(calculation=calculation.substr(0,i+1)+" price ="+calculation.substr(i+1,calculation.length),i+=8)}calculation.indexOf("if")<0?calculation="price = "+calculation:(charsToStart=calculation.substr(0,calculation.indexOf("if")),/\S/.test(charsToStart)&&(calculation="price = "+calculation)),calculation=lfb_removeDoubleSpaces(calculation),calculation=calculation.replace(/price =\n if/g,"\nif"),calculation=calculation.replace(/price = if/g,"if"),calculation=calculation.replace(/price = \nif/g,"\nif"),calculation=calculation.replace(/price = \n if/g,"\n if")}else calculation=calculation.replace(/\[price\]/g,"price"),calculation=calculation.replace(/\[quantity\]/g,"price"),calculation=calculation.replace(/\[variable\]/g,"price"),calculation=lfb_removeDoubleSpaces(calculation);if("price ="!=calculation.trim())try{eval(calculation)}catch(t){console.log("wrong calculation : "+calculation)}return parseFloat(price)}function lfb_parseDate(t){var e,a=t;return"string"==typeof t&&(e=t.match(/(\d+)/g),a=new Date(e[0],e[1]-1,e[2])),a}function lfb_removeDoubleSpaces(t){return-1<(t=(t=t.replace(/\t/g,"")).replace(/  /g," ")).indexOf("  ")&&lfb_removeDoubleSpaces(t),t}function lfb_removeDistanceError(t,e){var a,r=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] #mainPanel .genSlide [data-itemid="'+t+'"]');0==r.closest(".genSlide").find('[data-itemid][data-usedistance="true"]:not([data-distance]):not([type="checkbox"]).checked,[data-itemid][data-usedistance="true"]:not([data-distance]):checked,[data-itemid][data-usedistance="true"]:not([data-distance])[data-type="slider"]').length&&0==r.closest(".genSlide").find('[data-itemid][data-usedistance="true"][data-distance="0"]:not([type="checkbox"]).checked,[data-itemid][data-usedistance="true"][data-distance="0"]:checked,[data-itemid][data-usedistance="true"][data-distance="0"][data-type="slider"]').length&&(r.closest(".genSlide").find(".btn-next").fadeIn(),r.closest(".genSlide").find(".lfb_btnNextContainer").fadeIn(),r.closest(".genSlide").find(".btn-next").removeClass("lfb_disabledBtn"),(a=r.closest(".genSlide").find(".lfb_distanceError")).fadeOut(),setTimeout(function(){a.remove()},300))}function lfb_showDistanceError(t,e){var a=wpe_getForm(e),r=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] #mainPanel .genSlide [data-itemid="'+t+'"]');r.closest(".genSlide").find(".btn-next").addClass("lfb_disabledBtn"),r.closest(".genSlide").find(".btn-next").hide(),0==r.closest(".genSlide").find(".lfb_distanceError").length&&r.closest(".genSlide").find(".lfb_btnNextContainer").before('<div class="lfb_distanceError alert alert-danger"><p>'+a.txtDistanceError+"</p></div>");var i=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] [data-itemid="'+t+'"]').closest(".genSlide").attr("data-stepid");"final"!=a.step||a.backFomFinal||(a.backFomFinal=!0,wpe_changeStep(i,e)),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"]').trigger("lfb_distanceError")}function wpe_updateLabelItem(t,e){form=wpe_getForm(e),t.is(".dropzone")||(t.closest(".itemBloc").find("label").each(function(){-1<jQuery(this).html().indexOf(":")&&0==jQuery(this).closest(".switch").length&&jQuery(this).html(t.attr("data-original-label"))}),0<t.parent().children(".lfb_imgTitle").length&&t.is("[data-original-title]")&&t.parent().children(".lfb_imgTitle").html(t.attr("data-original-title")))}function wpe_updatePrice(d,l){var u=!1;form=wpe_getForm(d),wpe_updatePlannedSteps(d),wpe_updateStep(d),lfb_updateShowItems(d),form.lastPrice=form.price,form.price=form.initialPrice,form.priceSingle=0;for(var t=lfb_lastSteps.slice(),m=0,f=0,e=0;e<form.variables.length;e++)form.variables[e].value=form.variables[e].defaultValue;"final"!=form.step&&-1==jQuery.inArray(parseInt(form.step),t)?t.push(parseInt(form.step)):"final"==form.step&&-1==jQuery.inArray("final",t)&&t.push("final");for(e=0;e<t.length;e++){var c=t[e];"final"!=c&&0==parseInt(c)||jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] #mainPanel .genSlide[data-stepid="'+c+'"]').is(".lfb_disabled")||($panel=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] #mainPanel .genSlide[data-stepid="'+c+'"]'),$panel.find("[data-itemid]").each(function(){if(jQuery(this).is("div.selectable.checked")||jQuery(this).is('div[data-type="slider"]')||jQuery(this).is("a.lfb_button.checked")||jQuery(this).is("input[type=checkbox]:checked")||jQuery(this).is("select[data-itemid][data-price]")||jQuery(this).is('input[type=number][data-valueasqt="1"]')){if(!jQuery(this).is(".lfb_disabled")&&0==jQuery(this).closest(".itemBloc.lfb_disabled").length&&!jQuery(this).is(".lfb_disabled"))if(jQuery(this).is('[data-singleprice="true"]')&&(u=!0),jQuery(this).is("[data-usecalculation]")||jQuery(this).data("price",jQuery(this).attr("data-price")),jQuery(this).is("[data-usecalculation]")&&(c!=form.step&&jQuery(this).is(".lfb_executed")?jQuery(this).attr("data-price",jQuery(this).data("price")):jQuery(this).data("price",lfb_executeCalculation(jQuery(this).attr("data-calculation"),d,jQuery(this).attr("data-itemid")))),0<jQuery(this).find(".icon_quantity").length||0<jQuery(this).find(".wpe_qtfield").length||jQuery(this).is('[data-type="slider"]')||jQuery(this).is('input[type=number][data-valueasqt="1"]')){var a="",t=0,e=99999999999999;if(0<jQuery(this).find(".icon_quantity").length?(a=jQuery(this).find(".icon_quantity").html(),t=parseFloat(jQuery(this).find(".quantityBtns").attr("data-min")),e=parseFloat(jQuery(this).find(".quantityBtns").attr("data-max"))):0<jQuery(this).find(".wpe_qtfield").length?(a=jQuery(this).find(".wpe_qtfield").val(),t=jQuery(this).find(".wpe_qtfield").attr("min"),e=jQuery(this).find(".wpe_qtfield").attr("max")):jQuery(this).is('[data-type="slider"]')?(a=parseFloat(jQuery(this).slider("value")),t=jQuery(this).attr("data-min"),e=jQuery(this).attr("data-max")):jQuery(this).is('input[type=number][data-valueasqt="1"]')&&(a=parseFloat(jQuery(this).val()),t=jQuery(this).attr("min"),e=jQuery(this).is("[max]")?jQuery(this).attr("max"):1e17),!jQuery(this).is("[data-usecalculationqt]")||jQuery(this).is(".lfb_changed")||void 0!==l&&jQuery(this).attr("data-itemid")==l||(a=lfb_executeCalculation(jQuery(this).attr("data-calculationqt"),d,jQuery(this).attr("data-itemid")),isNaN(a)&&(a=0),e<a&&(a=e),a<t&&(a=t),0<jQuery(this).find(".icon_quantity").length?(jQuery(this).find(".icon_quantity").html(a),0<jQuery(this).find(".wpe_sliderQt").length&&jQuery(this).find(".wpe_sliderQt").slider("value",parseFloat(a)),jQuery(this).find(".quantityBtns").addClass("lfb-hidden")):0<jQuery(this).find(".wpe_qtfield").length?jQuery(this).find(".wpe_qtfield").val(a):jQuery(this).is('[data-type="slider"]')?jQuery(this).slider("value",parseFloat(a)):jQuery(this).is('input[type="number"]')&&jQuery(this).val(a)),jQuery(this).is("[data-distanceqt]")&&(lfb_executeCalculation(jQuery(this).attr("data-distanceqt"),d,jQuery(this).attr("data-itemid")),jQuery(this).is("[data-distance]")&&(a=parseFloat(jQuery(this).attr("data-distance")).toFixed(2)),a<t?a=t:e<a&&(a=e),0<jQuery(this).find(".wpe_qtfield").length?jQuery(this).find(".wpe_qtfield").val(a):0<jQuery(this).find(".wpe_sliderQt").length?(jQuery(this).find(".wpe_sliderQt").slider("value",a),jQuery(this).find(".icon_quantity").html(a)):0<jQuery(this).find(".quantityBtns").length?jQuery(this).find(".icon_quantity").html(a):jQuery(this).is('[data-type="slider"]')&&jQuery(this).slider("value",a),jQuery(this).is("[data-usecalculation]")&&jQuery(this).data("price",lfb_executeCalculation(jQuery(this).attr("data-calculation"),d,jQuery(this).attr("data-itemid")))),jQuery(this).attr("data-resqt",a),jQuery(this).is("[data-price]"))if("-"==jQuery(this).data("operation"))jQuery(this).data("resprice",0-parseFloat(jQuery(this).data("price"))*parseFloat(a)),jQuery(this).is('[data-singleprice="true"]')?form.priceSingle-=parseFloat(jQuery(this).data("price"))*parseFloat(a):form.price-=parseFloat(jQuery(this).data("price"))*parseFloat(a);else if("x"==jQuery(this).data("operation"))for(var r=0;r<parseFloat(a);r++)0==r?(form.price,jQuery(this).data("resprice",form.price)):jQuery(this).is('[data-singleprice="true"]')?(jQuery(this).is('[data-addtototal!="no"]')&&(form.priceSingle+=f*parseFloat(jQuery(this).data("price"))/100),jQuery(this).data("resprice",f*parseFloat(jQuery(this).data("price"))/100)):(jQuery(this).is('[data-addtototal!="no"]')&&(form.price+=m*parseFloat(jQuery(this).data("price"))/100),jQuery(this).data("resprice",form.price*parseFloat(jQuery(this).data("price"))/100));else if("/"==jQuery(this).data("operation"))for(r=0;r<parseFloat(a);r++)jQuery(this).data("resprice",0-form.price*parseFloat(jQuery(this).data("price"))/100),jQuery(this).is('[data-singleprice="true"]')?jQuery(this).is('[data-addtototal!="no"]')&&(form.priceSingle=form.price-form.price*parseFloat(jQuery(this).data("price"))/100):jQuery(this).is('[data-addtototal!="no"]')&&(form.price=form.price-form.price*parseFloat(jQuery(this).data("price"))/100);else{var i,o,p,s,n=-2;jQuery(this).data("reduc")&&0<jQuery(this).data("reducqt").length&&(i=(i=jQuery(this).data("reducqt")).split("*"),o=new Array,p=0,jQuery.each(i,function(t){var e=i[t].split("|");o.push(e[1]),parseFloat(e[0])<=parseFloat(a)&&(n=t),(parseFloat(e[0])<p||0==p)&&(p=parseFloat(e[0]))})),0<=n?(s=parseFloat(o[n])*parseFloat(a),"0"==jQuery(this).attr("data-price")&&(s=parseFloat(o[n])*(parseFloat(a)-p)),jQuery(this).data("resprice",s),jQuery(this).is('[data-singleprice="true"]')?jQuery(this).is('[data-addtototal!="no"]')&&(form.priceSingle+=parseFloat(s)):jQuery(this).is('[data-addtototal!="no"]')&&(form.price+=parseFloat(s)),"left"==form.currencyPosition?jQuery(this).is('[data-showprice="1"]')?("+"==jQuery(this).data("operation")?(jQuery(this).attr("title",jQuery(this).data("originaltitle")+" : <strong>"+form.currency+wpe_formatPrice(o[n],d)+"</strong>"),jQuery(this).attr("data-original-label",jQuery(this).data("originallabel")+" : <strong>"+form.currency+wpe_formatPrice(o[n],d)+"</strong>"),jQuery(this).attr("data-original-title",jQuery(this).data("originaltitle")+" : <strong>"+form.currency+wpe_formatPrice(o[n],d)+"</strong>")):"-"==jQuery(this).data("operation")?(jQuery(this).attr("title",jQuery(this).data("originaltitle")+" : <strong>-"+form.currency+wpe_formatPrice(o[n],d)+"</strong>"),0!=form.disableTipMobile&&wpe_is_touch_device()||jQuery(this).is('[data-type="slider"]')||jQuery(this).is(".lfb_button")||""!=form.imgTitlesStyle||jQuery(this).b_tooltip("fixTitle"),jQuery(this).attr("data-original-label",jQuery(this).data("originallabel")+" : <strong>-"+form.currency+wpe_formatPrice(o[n],d)+"</strong>"),jQuery(this).attr("data-original-title",jQuery(this).data("originaltitle")+" : <strong>-"+form.currency+wpe_formatPrice(o[n],d)+"</strong>")):"x"==jQuery(this).data("operation")?(jQuery(this).attr("title",jQuery(this).data("originaltitle")+" : <strong>+"+wpe_formatPrice(o[n],d)+"%</strong>"),0!=form.disableTipMobile&&wpe_is_touch_device()||jQuery(this).is('[data-type="slider"]')||jQuery(this).is(".lfb_button")||""!=form.imgTitlesStyle||jQuery(this).b_tooltip("fixTitle"),jQuery(this).attr("data-original-label",jQuery(this).data("originallabel")+" : <strong>+"+form.currency+wpe_formatPrice(o[n],d)+"</strong>"),jQuery(this).attr("data-original-title",jQuery(this).data("originaltitle")+" : <strong>+"+wpe_formatPrice(o[n],d)+"%</strong>")):(jQuery(this).attr("title",jQuery(this).data("originaltitle")+" : <strong>-"+wpe_formatPrice(o[n],d)+"%</strong>"),0!=form.disableTipMobile&&wpe_is_touch_device()||jQuery(this).is('[data-type="slider"]')||jQuery(this).is(".lfb_button")||""!=form.imgTitlesStyle||jQuery(this).b_tooltip("fixTitle"),jQuery(this).attr("data-original-label",jQuery(this).data("originallabel")+" : <strong>-"+form.currency+wpe_formatPrice(o[n],d)+"</strong>"),jQuery(this).attr("data-original-title",jQuery(this).data("originaltitle")+" : <strong>-"+wpe_formatPrice(o[n],d)+"%</strong>")),0!=form.disableTipMobile&&wpe_is_touch_device()||jQuery(this).is('[data-type="slider"]')||jQuery(this).is(".lfb_button")||""!=form.imgTitlesStyle||jQuery(this).b_tooltip("fixTitle"),wpe_updateLabelItem(jQuery(this),d)):(jQuery(this).attr("data-original-label",jQuery(this).data("originallabel")),jQuery(this).is("[data-tooltiptext]")?jQuery(this).attr("data-original-title",jQuery(this).attr("data-tooltiptext")):jQuery(this).attr("data-original-title",jQuery(this).data("originaltitle"))):jQuery(this).is('[data-showprice="1"]')?("+"==jQuery(this).attr("data-operation")?(jQuery(this).attr("title",jQuery(this).data("originaltitle")+" : <strong>"+wpe_formatPrice(o[n],d)+form.currency+"</strong>"),jQuery(this).attr("data-original-label",jQuery(this).data("originallabel")+" : <strong>"+wpe_formatPrice(o[n],d)+form.currency+"</strong>"),jQuery(this).attr("data-original-title",jQuery(this).data("originaltitle")+" : <strong>"+wpe_formatPrice(o[n],d)+form.currency+"</strong>")):"-"==jQuery(this).attr("data-operation")?(jQuery(this).attr("title",jQuery(this).data("originaltitle")+" : <strong>-"+ +wpe_formatPrice(o[n],d)+"</span>"),jQuery(this).attr("data-original-label",jQuery(this).data("originallabel")+" : <strong>-"+wpe_formatPrice(o[n],d)+form.currency+"</strong>"),jQuery(this).attr("data-original-title",jQuery(this).data("originaltitle")+" : <strong>-"+wpe_formatPrice(o[n],d)+form.currency+"</strong>")):"x"==jQuery(this).attr("data-operation")?(jQuery(this).attr("data-original-label",jQuery(this).data("originallabel")+" : <strong>+"+wpe_formatPrice(o[n],d)+form.currency+"</strong>"),jQuery(this).attr("title",jQuery(this).data("originaltitle")+" : <strong>+"+wpe_formatPrice(o[n],d)+"%</strong>"),0!=form.disableTipMobile&&wpe_is_touch_device()||jQuery(this).is('[data-type="slider"]')||jQuery(this).is(".lfb_button")||""!=form.imgTitlesStyle||jQuery(this).b_tooltip("fixTitle"),jQuery(this).attr("data-original-label",jQuery(this).data("originallabel")+" : <strong>+"+wpe_formatPrice(o[n],d)+form.currency+"</strong>"),jQuery(this).attr("data-original-title",jQuery(this).data("originaltitle")+" : <strong>+"+wpe_formatPrice(o[n],d)+"%</strong>")):(jQuery(this).attr("data-original-label",jQuery(this).data("originallabel")+" : <strong>-"+wpe_formatPrice(o[n],d)+form.currency+"</strong>"),jQuery(this).attr("title",jQuery(this).data("originaltitle")+" : <strong>--"+wpe_formatPrice(o[n],d)+"%</strong>"),0!=form.disableTipMobile&&wpe_is_touch_device()||jQuery(this).is('[data-type="slider"]')||jQuery(this).is(".lfb_button")||""!=form.imgTitlesStyle||jQuery(this).b_tooltip("fixTitle"),jQuery(this).attr("data-original-title",jQuery(this).data("originaltitle")+" : <strong>-"+wpe_formatPrice(o[n],d)+"%</strong>")),0!=form.disableTipMobile&&wpe_is_touch_device()||jQuery(this).is('[data-type="slider"]')||jQuery(this).is(".lfb_button")||""!=form.imgTitlesStyle||jQuery(this).b_tooltip("fixTitle"),wpe_updateLabelItem(jQuery(this),d)):(jQuery(this).attr("data-original-label",jQuery(this).data("originallabel")),jQuery(this).is("[data-tooltiptext]")?jQuery(this).attr("data-original-title",jQuery(this).attr("data-tooltiptext")):jQuery(this).attr("data-original-title",jQuery(this).data("originaltitle")))):(jQuery(this).data("resprice",parseFloat(jQuery(this).data("price"))*parseFloat(a)),form.price=parseFloat(form.price),form.priceSingle=parseFloat(form.priceSingle),jQuery(this).is('[data-singleprice="true"]')?jQuery(this).is('[data-addtototal!="no"]')&&(form.priceSingle+=parseFloat(jQuery(this).data("price"))*parseFloat(a)):jQuery(this).is('[data-addtototal!="no"]')&&(form.price+=parseFloat(jQuery(this).data("price"))*parseFloat(a)),wpe_updateItemTitleNoReduc(jQuery(this),form)),jQuery(this).find(".quantityBtns").is(".open")&&""==form.imgTitlesStyle&&(0!=form.disableTipMobile&&wpe_is_touch_device()||jQuery(this).b_tooltip("show"))}else jQuery(this).data("resprice","0")}else jQuery(this).data("resqt","0"),jQuery(this).data("price")?("-"==jQuery(this).data("operation")?(jQuery(this).data("resprice",0-parseFloat(jQuery(this).data("price"))),jQuery(this).is('[data-singleprice="true"]')?jQuery(this).is('[data-addtototal!="no"]')&&(form.priceSingle-=parseFloat(jQuery(this).data("price"))):jQuery(this).is('[data-addtototal!="no"]')&&(form.price-=parseFloat(jQuery(this).data("price")))):"x"==jQuery(this).data("operation")?jQuery(this).is('[data-singleprice="true"]')?(jQuery(this).data("resprice",form.priceSingle*parseFloat(jQuery(this).data("price"))/100),jQuery(this).is('[data-addtototal!="no"]')&&(form.priceSingle=form.priceSingle+form.priceSingle*parseFloat(jQuery(this).data("price"))/100)):(jQuery(this).data("resprice",form.price*parseFloat(jQuery(this).data("price"))/100),jQuery(this).is('[data-addtototal!="no"]')&&(form.price=form.price+form.price*parseFloat(jQuery(this).data("price"))/100)):"/"==jQuery(this).attr("data-operation")?jQuery(this).is('[data-singleprice="true"]')?(jQuery(this).data("resprice",0-form.priceSingle*parseFloat(jQuery(this).data("price"))/100),jQuery(this).is('[data-addtototal!="no"]')&&(form.priceSingle=form.priceSingle-form.priceSingle*parseFloat(jQuery(this).data("price"))/100)):(jQuery(this).data("resprice",0-form.price*parseFloat(jQuery(this).data("price"))/100),jQuery(this).is('[data-addtototal!="no"]')&&(form.price=form.price-form.price*parseFloat(jQuery(this).data("price"))/100)):(jQuery(this).data("resprice",jQuery(this).data("price")),jQuery(this).is('[data-singleprice="true"]')?jQuery(this).is('[data-addtototal!="no"]')&&(form.priceSingle+=parseFloat(jQuery(this).data("price"))):jQuery(this).is('[data-addtototal!="no"]')&&(form.price=parseFloat(form.price)+parseFloat(jQuery(this).data("price")))),wpe_updateItemTitleNoReduc(jQuery(this),form)):jQuery(this).data("resprice","0");jQuery(this).is("[data-usecalculationvar]")&&!jQuery(this).is('[data-usecalculationvar="0"]')&&lfb_updateVariable(form,jQuery(this).attr("data-usecalculationvar"),jQuery(this).attr("data-calculationvar"),jQuery(this).attr("data-itemid"))}jQuery('#estimation_popup.wpe_bootstraped[data-form="'+d+'"]').trigger("priceUpdated",[jQuery(this).attr("data-itemid")]),lfb_updateItemData(form,jQuery(this).attr("data-itemid"))})),m=form.price,f=form.priceSingle}0<form.reduction&&(form.reductionType&&"%"==form.reductionType?0<form.priceSingle?form.reductionResult=form.priceSingle*form.reduction/100:form.reductionResult=form.price*form.reduction/100:form.reductionResult=form.reduction,form.reductionResult=parseFloat(form.reductionResult),0==form.priceSingle?form.price-=form.reductionResult:form.priceSingle-=form.reductionResult),(!form.price||form.price<0)&&(form.price=0),u&&form.priceSingle&&!(form.priceSingle<0)||(form.priceSingle=0);var a=/^\d+(\.\d{2})?$/;a.test(form.price)||(form.price=parseFloat(form.price).toFixed(2));try{a.test(form.priceSingle)||(form.priceSingle=parseFloat(form.priceSingle).toFixed(2))}catch(t){}var r,i,o=form.currency+""+wpe_formatPrice(parseFloat(form.priceSingle),d),p=form.currency+""+wpe_formatPrice(parseFloat(form.price),d),s=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"]').attr("data-rangelabelbetween"),n=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"]').attr("data-rangelabeland");jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"]').is("[data-totalrange]")&&0<parseFloat(form.price)?(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price').is(".lfb_notNull")||jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price').addClass("lfb_notNull"),b=parseInt(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"]').attr("data-totalrange")),_=parseFloat(form.price)-b/2,y=parseFloat(form.price)+b/2,jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"]').is('[data-rangemode="percent"]')&&(_=parseFloat(form.price)-parseFloat(form.price)*b/100,y=parseFloat(form.price)+parseFloat(form.price)*b/100),_<0&&(_=0),p=s+"<br/><strong>"+form.currency+wpe_formatPrice(_,d)+"</strong><br/>"+n+"<br/><strong>"+form.currency+wpe_formatPrice(y,d)+"</strong>"):jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price').removeClass("lfb_notNull"),"left"!=form.currencyPosition&&(p=wpe_formatPrice(form.price,d)+""+form.currency,o=wpe_formatPrice(form.priceSingle,d)+""+form.currency,jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"]').is("[data-totalrange]")&&0<parseFloat(form.price)?(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price').is(".lfb_notNull")||jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price').addClass("lfb_notNull"),b=parseInt(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"]').attr("data-totalrange")),_=parseFloat(form.price)-b/2,y=parseFloat(form.price)+b/2,jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"]').is('[data-rangemode="percent"]')&&(_=parseFloat(form.price)-parseFloat(form.price)*b/100,y=parseFloat(form.price)+parseFloat(form.price)*b/100),_<0&&(_=0),p=s+"<br/><strong>"+wpe_formatPrice(_,d)+form.currency+"</strong><br/>"+n+"<br/><strong>"+wpe_formatPrice(y,d)+form.currency+"</strong>"):jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price').removeClass("lfb_notNull")),1==form.showTotalBottom&&(!(u&&0<form.priceSingle)||form.price<0?(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .lfb_totalBottom').removeClass("lfb_priceSingle"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .lfb_totalBottom>span.lfb_subPrice').remove(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .lfb_totalBottom>br').remove()):(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .lfb_totalBottom').addClass("lfb_priceSingle"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .lfb_totalBottom').each(function(){0==jQuery(this).find(".lfb_subPrice").length&&jQuery(this).find(">span:eq(0)").after('<br/><span class="lfb_subPrice">+ '+p+"</span>")})),u&&0<form.priceSingle?form.price<=0?(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .lfb_totalBottom> span:first-child').html(o),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .lfb_totalBottom> span.lfb_subPrice').hide(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .lfb_totalBottom> span:eq(2)').hide(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .lfb_totalBottom .lfb_subTxtBottom').hide()):(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .lfb_totalBottom> span.lfb_subPrice').show(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .lfb_totalBottom> span:eq(2)').show(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .lfb_totalBottom> span:first-child').html(o),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .lfb_totalBottom> span.lfb_subPrice').html("+ "+p),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .lfb_totalBottom .lfb_subTxtBottom').show()):(form.price<=0?jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .lfb_totalBottom .lfb_subTxtBottom').hide():jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .lfb_totalBottom .lfb_subTxtBottom').show(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .lfb_totalBottom> span:first-child').html(p))),0==form.showSteps&&(!(u&&0<form.priceSingle)||form.price<0?(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price').removeClass("lfb_priceSingle"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price>span.lfb_subPrice').remove()):(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price').addClass("lfb_priceSingle"),0==jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price> span.lfb_subPrice').length&&jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price>span:eq(0)').after('<span class="lfb_subPrice">+ '+p+"</span>")),u&&0<form.priceSingle?form.price<=0?(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price> span:first-child').css("top","6px"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price> span:first-child').html(o),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price> span.lfb_subPrice').hide(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price> span:eq(2)').hide()):(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price> span:first-child').css("top","-5px"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price> span.lfb_subPrice').show(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price> span:eq(2)').show(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price> span:first-child').html(o),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price> span.lfb_subPrice').html("+ "+p)):(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"]').is('[data-isSubs="true"]')?jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price> span:first-child').css("position","relative").css("top","6px"):jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price> span:first-child').css("position","relative").css("top","0px"),0<form.price?(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price> span:first-child').css("position","relative").css("top","0px"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price> span:eq(1)').show()):jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price> span:eq(1)').hide(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price> span:first-child').html(p)),0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price> span:first-child').length&&(8<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price> span:first-child').html().length?16<=parseInt(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price').css("font-size"))&&jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price').css("font-size","16px"):jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price').css("font-size","18px"),9<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price > span:first-child').html().length&&14<=parseInt(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price').css("font-size"))&&jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price').css("font-size","14px"),10<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price > span:first-child').html().length&&11<=parseInt(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price').css("font-size"))&&jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price').css("font-size","11px")),r=form.price,jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"]').is('[data-isSubs="true"]')&&"single"==form.progressBarPriceType&&(r=form.priceSingle),i=100*r/form.priceMax,1==form.showInitialPrice&&(i=100*(r-parseFloat(form.initialPrice))/form.priceMax),100<i&&(i=100),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar').css("width",i+"%"),jQuery("body").is(".rtl")?jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price').animate({right:i+"%"},70):jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price').animate({left:i+"%"},70));var _,y,b,h=form.currency+""+wpe_formatPrice(parseFloat(form.price).toFixed(2),d),g=form.currency+""+wpe_formatPrice(parseFloat(form.priceSingle).toFixed(2),d);"left"!=form.currencyPosition&&(h=wpe_formatPrice(parseFloat(form.price).toFixed(2),d)+""+form.currency,g=wpe_formatPrice(parseFloat(form.priceSingle).toFixed(2),d)+""+form.currency),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+d+'"] #lfb_summary table #lfb_summaryTotal>span:eq(0)').html(h),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"]').is("[data-totalrange]")&&0<parseFloat(form.price)&&(s=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"]').attr("data-rangelabelbetween"),n=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"]').attr("data-rangelabeland"),b=parseInt(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"]').attr("data-totalrange")),_=parseFloat(form.price)-b/2,y=parseFloat(form.price)+b/2,jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"]').is('[data-rangemode="percent"]')&&(_=parseFloat(form.price)-parseFloat(form.price)*b/100,y=parseFloat(form.price)+parseFloat(form.price)*b/100),_<0&&(_=0),p=s+"<br/><strong>"+form.currency+wpe_formatPrice(_,d)+"</strong><br/>"+n+"<br/><strong>"+form.currency+wpe_formatPrice(y,d)+"</strong>","left"!=form.currencyPosition&&(b=parseInt(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"]').attr("data-totalrange")),p=s+"<br/><strong>"+wpe_formatPrice(_,d)+form.currency+"</strong><br/>"+n+"<br/><strong>"+wpe_formatPrice(y,d)+form.currency+"</strong>"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+d+'"] #lfb_summary table #lfb_summaryTotal>span:eq(0)').html(p.replace(/<br\/>/g," "))),wpe_updateSummary(d),u&&0<form.priceSingle?(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] #finalPrice span:eq(0)').html(o),form.price<=0?(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] #finalPrice span:eq(1)').css("display","none"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] #finalPrice span:eq(2)').css("display","none"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+d+'"] #lfb_summary table #lfb_summaryTotal>span:eq(0)').html("<strong>"+g+"</strong>")):(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] #finalPrice span:eq(2)').css("display","inline-block"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] #finalPrice span:eq(1)').html("+"+p+form.subscriptionText),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] #finalPrice span:eq(1)').css("display","block"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+d+'"] #lfb_summary table #lfb_summaryTotal>span:eq(0)').html("<strong>"+g+"</strong> <br/>+"+h))):0==form.priceSingle&&0==form.price?(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] #finalPrice span:eq(1)').css("display","none"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] #finalPrice span:eq(2)').css("display","none"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] #finalPrice span:eq(0)').html(p),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] #finalPrice span:eq(1)').html(form.subscriptionText)):0==form.priceSingle&&0<form.price?(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] #finalPrice span:eq(0)').html(p),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] #finalPrice span:eq(1)').html(form.subscriptionText),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] #finalPrice span:eq(2)').css("display","inline-block"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] #finalPrice span:eq(1)').css("display","inline-block")):(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] #finalPrice span:eq(2)').css("display","inline-block"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] #finalPrice span:eq(1)').css("display","inline-block"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] #finalPrice span:eq(0)').html(p)),lfb_updateShowSteps(d),lfb_updateShowItems(d),lfb_updateLayerImages(d),wpe_updateStep(d),lfb_updateRichTextValues(d)}function wpe_updateItemTitleNoReduc(t,e){var a=e.formID;"left"==e.currencyPosition?t.is('[data-showprice="1"]')?("+"==t.data("operation")?(t.attr("title",t.data("originaltitle")+" : <strong>"+e.currency+wpe_formatPrice(t.data("price"),a)+"</strong>"),t.attr("data-original-label",t.data("originallabel")+" : <strong>"+e.currency+wpe_formatPrice(t.data("price"),a)+"</strong>"),t.attr("data-original-title",t.data("originaltitle")+" : <strong>"+e.currency+wpe_formatPrice(t.data("price"),a)+"</strong>")):"-"==t.data("operation")?(t.attr("data-original-label",t.data("originallabel")+" : <strong>-"+e.currency+wpe_formatPrice(t.data("price"),a)+"</strong>"),t.attr("title",t.data("originaltitle")+" : <strong>-"+e.currency+wpe_formatPrice(t.data("price"),a)+"</strong>"),0!=e.disableTipMobile&&wpe_is_touch_device()||t.is('[data-type="slider"]')||t.is(".lfb_button")||""!=e.imgTitlesStyle||t.b_tooltip("fixTitle"),t.attr("data-original-label",t.data("originallabel")+" : <strong>-"+e.currency+wpe_formatPrice(t.data("price"),a)+"</strong>"),t.attr("data-original-title",t.data("originaltitle")+" : <strong>-"+e.currency+wpe_formatPrice(t.data("price"),a)+"</strong>")):"x"==t.data("operation")?(t.attr("title",t.data("originaltitle")+" : <strong>+"+wpe_formatPrice(t.data("price"),a)+"%</strong>"),0!=e.disableTipMobile&&wpe_is_touch_device()||t.is('[data-type="slider"]')||t.is(".lfb_button")||""!=e.imgTitlesStyle||t.b_tooltip("fixTitle"),t.attr("data-original-label",t.data("originallabel")+" : <strong>+"+wpe_formatPrice(t.data("price"),a)+"%</strong>"),t.attr("data-original-title",t.data("originaltitle")+" : <strong>+"+wpe_formatPrice(t.data("price"),a)+"%</strong>")):(t.attr("title",t.data("originaltitle")+" : <strong>-"+wpe_formatPrice(t.data("price"),a)+"%</strong>"),0!=e.disableTipMobile&&wpe_is_touch_device()||t.is('[data-type="slider"]')||t.is(".lfb_button")||""!=e.imgTitlesStyle||t.b_tooltip("fixTitle"),t.attr("data-original-label",t.data("originallabel")+" : <strong>-"+wpe_formatPrice(t.data("price"),a)+"%</strong>"),t.attr("data-original-title",t.data("originaltitle")+" : <strong>-"+wpe_formatPrice(t.data("price"),a)+"%</strong>")),0!=e.disableTipMobile&&wpe_is_touch_device()||t.is('[data-type="slider"]')||t.is(".lfb_button")||""!=e.imgTitlesStyle||t.b_tooltip("fixTitle"),wpe_updateLabelItem(t,a)):t.is("[data-tooltiptext]")?t.attr("data-original-title",jQuery(this).attr("data-tooltiptext")):t.attr("data-original-title",t.data("originaltitle")):t.is('[data-showprice="1"]')?("+"==t.attr("data-operation")?(t.attr("title",t.data("originaltitle")+" : <strong>"+wpe_formatPrice(t.data("price"),a)+e.currency+"</strong>"),t.attr("data-original-title",t.data("originaltitle")+" : <strong>"+wpe_formatPrice(t.data("price"),a)+e.currency+"</strong>")):"-"==t.attr("data-operation")?(t.attr("title",t.data("originaltitle")+" : <strong>-"+ +wpe_formatPrice(t.data("price"),a)+"</strong>"),0!=e.disableTipMobile&&wpe_is_touch_device()||t.is('[data-type="slider"]')||t.is(".lfb_button")||""!=e.imgTitlesStyle||t.b_tooltip("fixTitle"),t.attr("data-original-title",t.data("originaltitle")+" : <strong>-"+wpe_formatPrice(t.data("price"),a)+e.currency+"</strong>")):"x"==t.attr("data-operation")?(t.attr("title",t.data("originaltitle")+" : <strong>+"+wpe_formatPrice(t.data("price"),a)+"%</strong>"),0!=e.disableTipMobile&&wpe_is_touch_device()||t.is('[data-type="slider"]')||t.is(".lfb_button")||""!=e.imgTitlesStyle||t.b_tooltip("fixTitle"),t.attr("data-original-title",t.data("originaltitle")+" : <strong>+"+wpe_formatPrice(t.data("price"),a)+"%</strong>")):(t.attr("title",t.data("originaltitle")+" : <strong>-"+wpe_formatPrice(t.data("price"),a)+"%</strong>"),0!=e.disableTipMobile&&wpe_is_touch_device()||t.is('[data-type="slider"]')||t.is(".lfb_button")||""!=e.imgTitlesStyle||t.b_tooltip("fixTitle"),t.attr("data-original-title",t.data("originaltitle")+" : <strong>-"+wpe_formatPrice(t.data("price"),a)+"%</strong>")),0!=e.disableTipMobile&&wpe_is_touch_device()||t.is('[data-type="slider"]')||t.is(".lfb_button")||""!=e.imgTitlesStyle||t.b_tooltip("fixTitle"),wpe_updateLabelItem(t,a)):t.is("[data-tooltiptext]")?t.attr("data-original-title",jQuery(this).attr("data-tooltiptext")):t.attr("data-original-title",t.data("originaltitle")),0<t.parent().children(".lfb_imgTitle").length&&t.is("[data-original-title]")&&t.parent().children(".lfb_imgTitle").html(t.attr("data-original-title"))}function wpe_isDecimal(t){if(""==t)return!1;var e;for(e in t)if(-1=="0123456789".indexOf(t[e]))return!1;return!0}function wpe_changeContentSlide(t,e){var a=jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+e+'"] #mainPanel .genSlide[data-stepid="'+form.step+'"]').find(".genContent").find(".genContentSlide.active").index();"left"==t?0<a?a--:a=jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+e+'"] #mainPanel .genSlide[data-stepid="'+form.step+'"]').find(".genContent").find(".genContentSlide").length:a<jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+e+'"] #mainPanel .genSlide[data-stepid="'+form.step+'"]').find(".genContent").find(".genContentSlide").length-1?a++:a=0,jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+e+'"] #mainPanel .genSlide[data-stepid="'+form.step+'"]').find(".genContent").find(".genContentSlide.active").fadeOut(500,function(){jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+e+'"] #mainPanel .genSlide[data-stepid="'+form.step+'"]').find(".genContent").find(".genContentSlide.active").removeClass("active"),jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+e+'"] #mainPanel .genSlide[data-stepid="'+form.step+'"]').find(".genContent").find(".genContentSlide").eq(a).delay(200).fadeIn(500,function(){jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+e+'"] #mainPanel .genSlide[data-stepid="'+form.step+'"]').find(".genContent").find(".genContentSlide").eq(a).delay(250).addClass("active")})})}function wpe_toggleField(t,a){var r=wpe_getForm(a);jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] #field_'+t+"_cb").is(":checked")?(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] #field_'+t).addClass("opened"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] #field_'+t).slideDown(250)):(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] #field_'+t).removeClass("opened"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] #field_'+t).slideUp(250)),setTimeout(function(){var t=jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide[data-stepid="'+r.step+'"] .stepTitle').height(),e=jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide[data-stepid='+r.step+"] .genContent").outerHeight()+parseInt(jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel').css("padding-bottom"))+102+t;"final"==r.step&&(e-=80),jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel').animate({minHeight:e})},300)}function wpe_finalStep(e){var t,a=wpe_getForm(e);a.step++,1!=a.enablePdfDownload||"null"!=typeof(t=window.open(a.homeUrl+"/index.php?EPFormsBuilder=downloadMyOrder","_blank"))&&null!=t&&(t.focus(),setTimeout(function(){t.close()},300)),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"]').trigger("formSent"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] #lfb_loader').delay(800).fadeOut(2*a.animationsSpeed),0==a.redirectionDelay&&(a.redirectionDelay=1),setTimeout(function(){var t=lfb_getRedirectionURL(e);""!=t&&"#"!=t&&" "!=t&&(""!=a.urlVariables&&-1<t.indexOf("?")&&a.urlVariables.replace("?","&"),document.location.href=t+a.urlVariables)},1e3*a.redirectionDelay)}function wpe_updateStep(i){var a,t,e,r,o,p,s,n=wpe_getForm(i);1==n.showSteps?(o=new Array,r=!1,jQuery.each(lfb_plannedSteps,function(){r||jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] #mainPanel .genSlide[data-stepid="'+this+'"]').is(".lfb_disabled")||!(0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] #mainPanel .genSlide[data-stepid="'+this+'"] .lfb_item:not(.lfb-hidden)').length||0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] #mainPanel .genSlide[data-stepid="'+this+'"] .lfb_distanceError').length)||o.push(this)}),a=0,jQuery.each(o,function(t,e){parseInt(e)==parseInt(n.step)&&(a=t)}),0==++a&&(a=1),"final"==n.step&&(a=o.length+1),(t=o.length+1)<a&&(a=t),e=100*a/t,jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] .genPrice .progress .progress-bar-price> span:first-child').html(a+"/"+t),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] .genPrice .progress .progress-bar').css("width",e+"%")):3==n.showSteps&&(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] #lfb_stepper *:not(#lfb_stepperBar)').remove(),r=!1,o=new Array,jQuery.each(lfb_plannedSteps,function(){r||jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] #mainPanel .genSlide[data-stepid="'+this+'"]').is(".lfb_disabled")||!(0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] #mainPanel .genSlide[data-stepid="'+this+'"] .lfb_item:not(.lfb-hidden)').length||0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] #mainPanel .genSlide[data-stepid="'+this+'"] .lfb_distanceError').length)||o.push(this)}),p=!1,s=parseInt(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] .genSlide.lfb_activeStep').attr("data-stepid")),jQuery.each(o,function(t){var e=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] #mainPanel .genSlide[data-stepid="'+this+'"] .stepTitle').html(),a=jQuery('<a href="javascript:"  class="lfb_stepperPoint" data-stepid="'+this+'" title="'+e+'"></a>');jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] #lfb_stepper').append(a),a.b_tooltip({html:!0,container:'#estimation_popup[data-form="'+i+'"]',placement:"bottom"}),p?a.addClass("lfb_disabledPoint"):parseInt(this)==s?(a.addClass("lfb_currentPoint"),p=!0):a.on("click",function(){lfb_returnToStep(parseInt(jQuery(this).attr("data-stepid")),i)});var r=100/o.length*t;100!=r&&0!=r||1!=o.length?r+=100/o.length/2:r=50,a.css({left:r+"%"}),parseInt(this)==s&&jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] #lfb_stepper #lfb_stepperBar').css({width:r+"%"})}),"final"==n.step&&jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] #lfb_stepper #lfb_stepperBar').css({width:"100%"}))}function wpe_initPanelResize(t){var e=wpe_getForm(t);jQuery(window).resize(function(){lfb_resize(e)})}function lfb_resizeAll(){jQuery(window).trigger("resize")}function lfb_resize(t){var e=jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+t.formID+'"] #mainPanel .genSlide[data-stepid="'+t.step+'"] .stepTitle').height(),a=jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+t.formID+'"] #mainPanel .genSlide[data-stepid="'+t.step+'"] .genContent').outerHeight()+parseInt(jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+t.formID+'"] #mainPanel').css("padding-bottom"))+102+e;"final"==t.step&&(a-=80),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t.formID+'"] #mainPanel').animate({minHeight:a}),1==t.useSignature&&jQuery('#estimation_popup[data-form="'+t.formID+'"] #lfb_signature canvas').attr("width",jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t.formID+'"] #lfb_signature').width())}function lfb_rgb2hex(e){if(!(-1<e.indexOf("rgb")))return e;try{function t(t){return("0"+parseInt(t).toString(16)).slice(-2)}return"#"+t((e=e.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+))?\)$/))[1])+t(e[2])+t(e[3])}catch(t){return e}}function lfb_formatPriceWithCurrency(t,e){var a=wpe_getForm(e);return t=wpe_formatPrice(t,e),"left"==a.currencyPosition?t=a.currency+t:t+=a.currency,t}function wpe_formatPrice(t,e){var a=(t=t||0).toString();-1<a.indexOf(".")&&(a=parseFloat(t).toFixed(2).toString());var r=wpe_getForm(e);"1"==r.summary_noDecimals&&(a=Math.round(a).toString());r.decimalsSeparator;var i=r.thousandsSeparator,o=a,p=r.millionSeparator,s=r.billionsSeparator,n="";return-1<a.indexOf(".")?(o=a.substr(0,a.indexOf(".")),n=a.substr(a.indexOf(".")+1,2),a=a.replace(".",r.decimalsSeparator),1==n.toString().length&&(n=n.toString()+"0"),9<o.length?a=o.substr(0,o.length-9)+s+o.substr(o.length-9,3)+p+o.substr(o.length-6,3)+i+o.substr(o.length-3,o.length)+r.decimalsSeparator+n:6<o.length?a=o.substr(0,o.length-6)+p+o.substr(o.length-6,3)+i+o.substr(o.length-3,o.length)+r.decimalsSeparator+n:3<o.length&&(a=o.substr(0,o.length-3)+i+o.substr(o.length-3,o.length)+r.decimalsSeparator+n)):9<o.length?a=o.substr(0,o.length-9)+s+o.substr(o.length-9,3)+p+o.substr(o.length-6,3)+i+o.substr(o.length-3,o.length):6<o.length?a=o.substr(0,o.length-6)+p+o.substr(o.length-6,3)+i+o.substr(o.length-3,o.length):3<o.length&&(a=o.substr(0,o.length-3)+i+o.substr(o.length-3,o.length)),a}function lfb_applyCouponCode(a){var r=wpe_getForm(a),i=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] #lfb_couponField').val();jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] #lfb_couponField').closest(".form-group").removeClass("has-error"),i.length<3?jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] #lfb_couponField').closest(".form-group").addClass("has-error"):jQuery.ajax({url:r.ajaxurl,type:"post",data:{action:"lfb_applyCouponCode",formID:a,code:i},success:function(t){var e;"0"==t||""==t?jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] #lfb_couponField').closest(".form-group").addClass("has-error"):(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] #lfb_couponContainer').slideUp(),0<(e=t).indexOf("%")&&(e=t.substr(0,t.length-1),r.reductionType="%"),r.discountCode=i,r.reduction=e,jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] #finalSlide .genContent').animate({opacity:0},r.animationsSpeed),setTimeout(function(){wpe_updatePrice(a),wpe_changeStep("final",a)},r.animationsSpeed+100))}})}function lfb_getRedirectionURL(a){var t=wpe_getForm(a),r=t.close_url;return 1==t.useRedirectionConditions&&jQuery.each(t.redirections,function(){var t=(t=this.conditions.replace(/'/g,'"')).replace(/\\"/g,'"'),e=lfb_checkConditions(t=JSON.parse(t),a,"final");error=e.error,errorOR=e.errorOR,("OR"==this.conditionsOperator&&!errorOR||"OR"!=this.conditionsOperator&&!error)&&(r=this.url)}),r}function lfb_formatQuantity(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")}function lfb_startFormIntro(t){tld_selectionMode||jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"]  #startInfos > p').slideDown()}function lfb_initRichTextValues(t){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"] .lfb_richtext[data-itemid]:not(.lfb_shortcode)').each(function(){var t=0,e=new Array;parseInt(jQuery(this).closest(".genSlide").attr("data-stepid"));if(void 0!==form.richtextsContent[jQuery(this).attr("data-itemid").toString()]){for(var a=form.richtextsContent[jQuery(this).attr("data-itemid").toString()];-1!=(t=a.indexOf("[variable-",t+1));){var r='<span class="lfb_richVariable" data-varvariableid="'+a.substr(t+10,a.indexOf("]",t)-(t+10))+'"></span>';e.push({oldValue:a.substr(t,a.indexOf("]",t)+1-t),newValue:r})}for(t=0;-1!=(t=a.indexOf("item-",t+1));){r='<span class="lfb_richVariable" data-varitemid="'+a.substr(t+5,a.indexOf("_",t)-(t+5))+'" data-action="'+a.substr(a.indexOf("_",t)+1,a.indexOf("]",t)-1-a.indexOf("_",t))+'"></span>';e.push({oldValue:a.substr(t-1,a.indexOf("]",t)+1-(t-1)),newValue:r})}if(-1<a.indexOf("dateDifference-"))for(;-1!=(t=a.indexOf("dateDifference-",t+1));){var i=a.indexOf("_",t+15)+1,r='<span class="lfb_richVariable" data-varitemid="'+a.substr(t+15,a.indexOf("_",t)-(t+15))+'" data-action="'+"dateDifference"+'" data-enddateid="'+a.substr(i,a.indexOf("]",i)-i)+'"></span>';e.push({oldValue:a.substr(t-1,a.indexOf("]",t)+1-(t-1)),newValue:r})}if(-1<a.indexOf("distance_"))for($target.attr("data-usedistance","true");-1!=(t=a.indexOf("distance_",t+1));){var o=a.indexOf("-",t+9)+1,p=a.substr(t+9,a.indexOf("-",t)-(t+9)),s=a.indexOf("-",o)+1,n=a.substr(o,a.indexOf("-",o)-o),d=a.indexOf("-",s)+1,l=a.substr(s,a.indexOf("-",s)-s),u=a.indexOf("_",d)+1,m=a.substr(d,a.indexOf("_",d)-d),f=a.indexOf("-",u)+1,c=a.substr(u,a.indexOf("-",u)-u),_=a.indexOf("-",f)+1,y=a.substr(f,a.indexOf("-",f)-f),b=a.indexOf("-",_)+1,h=a.substr(_,a.indexOf("-",_)-_),g=a.indexOf("_",b)+1,j=a.substr(b,a.indexOf("_",b)-b),r='<span class="lfb_richVariable" data-action="'+"distance"+'" data-distancetype="'+a.substr(g,a.indexOf("]",g)-g)+'" data-departadress="'+p+'" data-departcity="'+n+'" data-departzip="'+l+'" data-departcountry="'+m+'" data-arrivaladress="'+c+'" data-arrivalcity="'+y+'" data-arrivalzip="'+h+'" data-arrivalcountry="'+j+'" ></span>';e.push({oldValue:a.substr(t-1,a.indexOf("]",t)+1-(t-1)),newValue:r})}var Q=new Date,w=Q.getMonth()+1;w<10&&(w="0"+w);Q.getFullYear().toString(),w.toString(),Q.getDate().toString();var v=wpe_forms[0].dateFormat.toUpperCase();v=(v=(v=v.replace(/\\\//g,"/")).replace(/d /g,"DD ")).replace(/yyyy/g,"YYYY"),a=(a=(a=a.replace(/\[currentDate\]/g,moment(Q).format(v))).replace(/\[total\]/g,'<span class="lfb_richVariable" data-action="total"></span>')).replace(/\[total_quantity\]/g,'<span class="lfb_richVariable" data-action="total_quantity"></span>'),jQuery.each(e,function(){a=a.replace(this.oldValue,this.newValue)}),jQuery(this).html(a)}})}function lfb_updateRichTextValues(v){var I=wpe_getForm(v),D=new Date,t=D.getMonth()+1;t<10&&(t="0"+t);var S=D.getFullYear().toString()+t.toString()+D.getDate().toString();jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] .genSlide[data-stepid="'+I.step+'"] .lfb_richtext[data-itemid]:not(.lfb_shortcode) .lfb_richVariable[data-varvariableid]').each(function(){var t=jQuery(this).attr("data-varvariableid"),e=lfb_getVariableByID(I,t),a=0;e&&(a=e.value),jQuery(this).html(a)}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] .genSlide[data-stepid="'+I.step+'"] .lfb_richtext[data-itemid]:not(.lfb_shortcode) .lfb_richVariable:not([data-varvariableid])').each(function(){var t,e,a,r,i,o,p,s,n,d,l,u,m,f,c,_,y,b=parseInt(jQuery(this).closest(".genSlide").attr("data-stepid")),h=jQuery(this).closest(".lfb_richtext").attr("data-itemid"),g=jQuery(this).attr("data-varitemid"),j=jQuery(this).attr("data-action"),Q=0,w=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+g+'"]');"price"==j&&(Q=0,"total"==g?Q=I.price:(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+g+'"]').is(".checked")||jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+g+'"]').is(":checked")||jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+g+'"]').is("select")||jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+g+'"]').is('[data-type="slider"]'))&&(Q=parseFloat(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+g+'"]').data("resprice")),isNaN(Q)&&(Q=0)),Q=wpe_formatPrice(parseFloat(Q),v),"left"==I.currencyPosition?Q=I.currency+Q:Q+=I.currency),"title"!=j&&"label"!=j||(Q=!w.is(".lfb_disabled")&&(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+g+'"]').is(".checked")||jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+g+'"]').is(":checked")||jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+g+'"]').is("select")||jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+g+'"]').is('[type="text"]')||jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+g+'"]').is('[type="number"]')||jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+g+'"]').is("textarea")||jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+g+'"]').is(".lfb_colorPreview")||jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+g+'"]').is("lfb_layeredImage")||jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+g+'"]').is('[data-type="slider"]')||jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+g+'"]').is(".lfb_dropzone")||jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+g+'"]').is('[data-type="slider"]'))?w.attr("data-originallabel"):""),"quantity"==j&&(w.is("input")||jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+g+'"]').is(".checked")||jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+g+'"]').is(":checked")?(Q=w.is("input")?w.val():0<w.find(".icon_quantity").length?parseFloat(w.find(".icon_quantity").html()):w.find(".wpe_qtfield").val(),isNaN(Q)&&(Q=0)):jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+g+'"]').is('[data-type="slider"]')&&(Q=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+g+'"]').slider("value")),Q=wpe_formatPrice(parseFloat(Q),v)),"value"==j&&(Q=w.is(".lfb_disabled")?"":(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+g+'"]').is("select"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+g+'"]').val())),"date"==j&&(Q=w.is(".lfb_datepicker")&&null!=w.datetimepicker("getDate")?moment.utc(w.datetimepicker("getDate")).format("YYYY-MM-DD"):"null"),"dateDifference"==j&&(t=g,e=jQuery(this).attr("data-enddateid"),t="currentDate"!=t&&0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+t+'"]').length&&0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+t+'"]').val().length?(w=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+t+'"]')).datetimepicker("getDate"):D,e="currentDate"==e?S:0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+e+'"]').length&&0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+e+'"]').val().length?(w=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+e+'"]')).datetimepicker("getDate"):D,a=Math.abs(e.getTime()-t.getTime()),(r=Math.ceil(a/864e5))<0&&(r=0),Q=r),"distance"==j&&(o=jQuery(this).attr("data-departadress"),p=jQuery(this).attr("data-departcity"),s=jQuery(this).attr("data-departzip"),n=jQuery(this).attr("data-departcountry"),d=jQuery(this).attr("data-arrivaladress"),l=jQuery(this).attr("data-arrivalcity"),u=jQuery(this).attr("data-arrivalzip"),m=jQuery(this).attr("data-arrivalcountry"),i=jQuery(this).attr("data-distancetype"),""!=o&&(o=0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+o+'"]').length?(w=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+o+'"]')).val():0),""!=p&&(p=0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+p+'"]').length?(w=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+p+'"]')).val():0),""!=s&&(s=0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+s+'"]').length?(w=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+s+'"]')).val():0),""!=n&&(n=0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+n+'"]').length?(w=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+n+'"]')).val():0),""!=d&&(d=0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+d+'"]').length?(w=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+d+'"]')).val():0),""!=l&&(l=0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+l+'"]').length?(w=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+l+'"]')).val():0),""!=u&&(u=0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+u+'"]').length?(w=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+u+'"]')).val():0),""!=m&&(m=0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+m+'"]').length?(w=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+m+'"]')).val():0),0<$target.closest(".genSlide").find(".lfb_distanceError").length&&lfb_removeDistanceError(h,v),f=content.substr(-1,content.indexOf("]",0)+1- -1),c=0,""!=$target.attr("data-distance")&&(c=parseFloat($target.attr("data-distance"))),""==o&&""==p&&""==n&&""==d&&""==l&&""==m&&""==s&&""==u?lfb_showDistanceError(h,v):""==I.gmap_key?(lfb_showDistanceError(h,v),console.log("invalid gmap api key")):(_=o+" "+s+" "+p+" "+n,y=d+" "+u+" "+l+" "+m,$target.attr("data-departure")==_&&y==$target.attr("data-arrival")||($target.attr("data-departure",_),$target.attr("data-arrival",y),lfb_getDistanceCalc(f,v,h,_,y,i))),Q=c),"total"==j?Q=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"]  #finalPrice').html():"total_quantity"==j&&(Q=wpe_getTotalQuantities(v,b,h)),jQuery(this).html(Q)})}function lfb_saveForLater(t){var e,a=wpe_getForm(t);"0"!=a.step&&(null!==localStorage.getItem("lfb_savedFormID")&&parseInt(localStorage.getItem("lfb_savedFormID"))==t&&null!==localStorage.getItem("lfb_savedForm")?(localStorage.removeItem("lfb_savedFormID"),localStorage.removeItem("lfb_formsession"),localStorage.removeItem("lfb_savedForm"),localStorage.removeItem("lfb_savedFormPastSteps"),localStorage.removeItem("lfb_savedFormStep"),localStorage.removeItem("lfb_savedFormTime"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"] .lfb_btnSaveForm').children(".fa,.fas,.fab").attr("class","fas "+jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"] .lfb_btnSaveForm').attr("data-originalicon")),""!=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"] .lfb_btnSaveForm').attr("data-defaulttext")&&jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"] .lfb_btnSaveForm span:not(.fa):not(.fas):not(.fab)').html(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"] .lfb_btnSaveForm').attr("data-defaulttext"))):(e=wpe_getFormContent(t,!0)[2],localStorage.setItem("lfb_savedFormID",t),localStorage.setItem("lfb_formsession",jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"]').attr("data-formsession")),localStorage.setItem("lfb_savedForm",JSON.stringify(e)),localStorage.setItem("lfb_savedFormPastSteps",JSON.stringify(lfb_lastSteps)),localStorage.setItem("lfb_savedFormStep",a.step),localStorage.setItem("lfb_savedFormTime",Date.now()),0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"] .lfb_btnSaveForm').children(".fa,.fab,.fas").length&&(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"] .lfb_btnSaveForm').children(".fa,.fas,.fab").attr("class"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"] .lfb_btnSaveForm').children(".fa,.fas,.fab").attr("class","fas fa-check")),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"] .lfb_btnSaveForm').removeClass("btn-default").addClass("btn-primary"),""!=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"] .lfb_btnSaveForm').attr("data-defaulttext")&&jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"] .lfb_btnSaveForm span:not(.fa):not(.fas):not(.fab)').html(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"] .lfb_btnSaveForm').attr("data-deltext")),setTimeout(function(){0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"] .lfb_btnSaveForm').children(".fas,.fa,.fab").length&&jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"] .lfb_btnSaveForm').children(".fas,.fa,.fab").attr("class","fas fa-redo"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"] .lfb_btnSaveForm').removeClass("btn-primary").addClass("btn-default")},1500)))}function lfb_getStoredSelectionItemID(t,e){var a=!1;return jQuery.each(t,function(){this.itemid==e&&(a=this)}),a}function lfb_loadStoredForm(i){var o,t,e,p=wpe_getForm(i),a=new Date(parseInt(p.lastS));0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] .lfb_btnSaveForm').length&&(null!==localStorage.getItem("lfb_savedFormID")&&parseInt(localStorage.getItem("lfb_savedFormID"))==i&&null!==localStorage.getItem("lfb_savedForm")?a<new Date(parseInt(localStorage.getItem("lfb_savedFormTime")))?(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] .lfb_btnSaveForm').children(".fas,.fa,.fab").attr("class","fas fa-redo"),""!=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] .lfb_btnSaveForm').attr("data-defaulttext")&&jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] .lfb_btnSaveForm span:not(.fas):not(.fa):not(.fab)').html(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] .lfb_btnSaveForm').attr("data-deltext")),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"]').attr("data-formsession",localStorage.getItem("lfb_formsession")),o=JSON.parse(localStorage.getItem("lfb_savedForm")),t=JSON.parse(localStorage.getItem("lfb_savedFormPastSteps")),e=localStorage.getItem("lfb_savedFormStep"),-1==jQuery.inArray(e,t)&&t.push(e),0<t.length&&(p.autoStart=!0,jQuery.each(t,function(){var t=this.toString();jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] [data-stepid="'+t+'"] [data-itemid]').each(function(){$item=jQuery(this);var t,e,a,r=lfb_getStoredSelectionItemID(o,parseInt($item.attr("data-itemid")));$item.is(".selectable")?0!=r?(0<$item.find(".icon_quantity").length?($item.find(".icon_quantity").html(r.quantity),0<$item.find(".wpe_sliderQt").length&&$item.find(".wpe_sliderQt").slider("value",parseInt(r.quantity))):0<$item.find(".wpe_qtfield").length?$item.find(".wpe_qtfield").val(parseInt(r.quantity)):$item.is('[data-type="slider"]')&&$item.slider("value",parseInt(r.quantity)),$item.is(".checked")||wpe_itemClick(jQuery(this),!1,i)):$item.is(".checked")&&wpe_itemClick(jQuery(this),!1,i):$item.is(".lfb_button")?0!=r?$item.is(".checked")||wpe_itemClick(jQuery(this),!1,i):$item.is(".checked")&&wpe_itemClick(jQuery(this),!1,i):$item.is('[data-toggle="switch"]')?0!=r?$item.is(":checked")||$item.trigger("click"):$item.is(".checked")&&wpe_itemClick(jQuery(this),!1,i):$item.is(".lfb_colorPreview")?0!=r&&$item.closest(".itemBloc").find(".lfb_colorpicker").val(r.value):$item.is(".lfb_datepicker")?0!=r&&$item.val(r.value):$item.is(".lfb_dropzone")?0!=r&&(t=Dropzone.forElement("#"+$item.attr("id")),e=r.value,a={name:e=(e=(e=(e=e.replace('- <span class="lfb_file">',"")).replace(" ","")).replace("</span>","")).replace("<br/>",""),size:12345,accepted:!0,kind:"image"},t.emit("addedfile",a),t.files.push(a),t.createThumbnailFromUrl(a,p.imgPreview,function(){t.emit("complete",a)},"anonymous")):$item.is('[data-type="numberfield"]')?0!=r&&($item.is('[data-valueasqt="1"]')?$item.val(r.quantity):$item.val(r.value)):$item.is("select")?0!=r&&$item.val(r.value):$item.is('[data-type="slider"]')?0!=r&&$item.slider("value",parseInt(r.quantity)):$item.is("textarea")?0!=r&&$item.val(r.value):$item.is('input[type="text"]')&&0!=r&&$item.val(r.value)}),t!=e?lfb_lastSteps.push(parseInt(t)):(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] [data-stepid="'+t+'"] .errorMsg').hide(),"1"==p.intro_enabled?(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"]  #startInfos > p').slideDown(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] .lfb_btnFloatingSummary').css({display:"inline-block"}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] .lfb_btnSaveForm').css({display:"inline-block"}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #btnStart').parent().fadeOut(p.animationsSpeed,function(){"2"!=p.showSteps&&jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"]').find(".genPrice,#lfb_stepper").fadeIn(p.animationsSpeed),jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #mainPanel').fadeIn(p.animationsSpeed+p.animationsSpeed/2,function(){wpe_changeStep(e,i)})})):wpe_changeStep(e,i))})),setTimeout(function(){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] .genSlide.lfb_activeStep').css("opacity",1)},2e3)):(localStorage.removeItem("lfb_formsession"),localStorage.removeItem("lfb_savedFormID"),localStorage.removeItem("lfb_savedForm"),localStorage.removeItem("lfb_savedFormPastSteps"),localStorage.removeItem("lfb_savedFormStep"),localStorage.removeItem("lfb_savedFormTime"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] .lfb_btnSaveForm').children(".fa").attr("class","fa "+jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] .lfb_btnSaveForm').attr("data-originalicon")),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] .lfb_btnSaveForm').children(".fab").attr("class","fab "+jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] .lfb_btnSaveForm').attr("data-originalicon")),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] .lfb_btnSaveForm').children(".fas").attr("class","fas "+jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] .lfb_btnSaveForm').attr("data-originalicon")),""!=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] .lfb_btnSaveForm').attr("data-defaulttext")&&jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] .lfb_btnSaveForm span:not(.fas):not(.fab):not(.fa)').html(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] .lfb_btnSaveForm').attr("data-defaulttext"))):(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] .lfb_btnSaveForm').children(".fa").attr("class","fa "+jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] .lfb_btnSaveForm').attr("data-originalicon")),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] .lfb_btnSaveForm').children(".fab").attr("class","fab "+jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] .lfb_btnSaveForm').attr("data-originalicon")),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] .lfb_btnSaveForm').children(".fas").attr("class","fas "+jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] .lfb_btnSaveForm').attr("data-originalicon")),""!=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] .lfb_btnSaveForm').attr("data-defaulttext")&&jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] .lfb_btnSaveForm span:not(.fas):not(.fab):not(.fa)').html(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] .lfb_btnSaveForm').attr("data-defaulttext"))))}function lfb_getCalendarByID(t){var e=!1;return jQuery.each(lfb_calendars,function(){this.id==t&&(e=this)}),e}function lfb_getDisabledHours(t,i,o,a){var p=new Array,e=lfb_getCalendarByID(t);if(0!=e){var s=jQuery('#estimation_popup .lfb_datepicker[data-calendarid="'+e.id+'"]').is('[data-disableminutes="0"]'),n=parseInt(jQuery('#estimation_popup .lfb_datepicker[data-calendarid="'+e.id+'"]').attr("data-maxevents"));!isNaN(n)&&0!=n||(n=1);var d=a;"mins"==a&&(d="minutes");var r,l=new Date(i),u=new Array;if(-1<jQuery('#estimation_popup .lfb_datepicker[data-calendarid="'+e.id+'"]').attr("data-daysweek").indexOf(",")&&(u=jQuery('#estimation_popup .lfb_datepicker[data-calendarid="'+e.id+'"]').attr("data-daysweek").split(",")),""!=l.getDay()&&(jQuery('#estimation_popup .lfb_datepicker[data-calendarid="'+e.id+'"]').attr("data-daysweek")==l.getDay()||-1<u.indexOf(l.getDay())))for(var m=0;m<24;m++)p.push(parseInt(m));else{""!=jQuery('#estimation_popup .lfb_datepicker[data-calendarid="'+e.id+'"][data-hoursdisabled]').attr("data-hoursdisabled")&&(-1<(r=jQuery('#estimation_popup .lfb_datepicker[data-calendarid="'+e.id+'"]').attr("data-hoursdisabled")).indexOf(",")?jQuery.each(r.split(","),function(){var t=parseInt(this);if(p.push(t),"hours"==a)for(var e=0;e<parseInt(o);e++)-1==jQuery.inArray(t-e,p)&&p.push(t-e);else if("mins"==a)for(e=0;e<=Math.floor(o/60);e++)-1==jQuery.inArray(t-e,p)&&p.push(t-e)}):p.push(parseInt(r)));for(var f=[],m=0;m<24;m++)f[m]=0;jQuery.each(e.events,function(){var t=moment(this.startDate);t=(t=t.subtract(parseInt(o),d)).add(5,"minute");for(var e=0;e<24;e++){var a=e;e<10&&(a="0"+e);var r=moment(i+" "+a+":00");(!s&&r.isSameOrAfter(t,"hour")||s&&r.isAfter(t,"hour"))&&r.isBefore(moment(this.endDate),"hour")&&(f[e]++,f[e]>=n&&-1==jQuery.inArray(e,p)&&p.push(parseInt(e)))}})}}return p}function lfb_getDisabledMinutes(t,i,o,p,e){var s=new Array,a=lfb_getCalendarByID(t);if(0!=a){var n=parseInt(jQuery('#estimation_popup .lfb_datepicker[data-calendarid="'+a.id+'"]').attr("data-maxevents"));!isNaN(n)&&0!=n||(n=1);var r=lfb_getDisabledHours(t,i,p,e),d=e;"mins"==e&&(d="minutes");var l=jQuery('#estimation_popup .lfb_datepicker[data-calendarid="'+a.id+'"]').attr("data-hoursdisabled");if(-1<l.indexOf(",")&&jQuery.each(l.split(","),function(){for(var t=parseInt(this),e=moment(new Date(i+" "+t+":00")).subtract(parseInt(p),d).add(1,"minute").format("YYYY-MM-DD HH:mm"),a=0;a<=11;a++)moment(new Date(i+" "+o+":"+5*a)).isAfter(moment(new Date(e)))&&moment(new Date(i+" "+o+":"+5*a)).isBefore(moment(new Date(moment(new Date(i+" "+t+":00")))))&&-1==jQuery.inArray(5*a,s)&&s.push(parseInt(5*a))}),-1<jQuery.inArray(parseInt(o),r))for(var u=0;u<=11;u++)-1==jQuery.inArray(5*u,s)&&s.push(parseInt(5*u));for(var m=[],u=0;u<=11;u++)m[parseInt(5*u)]=0;jQuery.each(a.events,function(){var t=moment(this.startDate);t=(t=t.subtract(parseInt(p),d)).add(5,"minute");var e=parseInt(o);e<10&&(e="0"+e);var a=moment(i+" "+e+":00");if(a.isAfter(t,"hour")&&a.isBefore(moment(this.endDate),"hour"))for(var r=0;r<=11;r++)m[parseInt(5*r)]++,m[parseInt(5*r)]>=n&&-1==jQuery.inArray(5*r,s)&&s.push(parseInt(5*r));else if(a.isSame(t,"hour"))for(r=0;r<=11;r++)t.isSame(moment(this.endDate),"hour")?5*r>=t.format("mm")&&5*r<moment(this.endDate).format("mm")&&(m[parseInt(5*r)]++,m[parseInt(5*r)]>=n&&-1==jQuery.inArray(5*r,s)&&s.push(parseInt(5*r))):5*r>=t.format("mm")&&(m[parseInt(5*r)]++,m[parseInt(5*r)]>=n&&-1==jQuery.inArray(5*r,s)&&s.push(parseInt(5*r)));else if(a.isSame(moment(this.endDate),"hour"))for(r=0;r<=11;r++)5*r<moment(this.endDate).format("mm")&&(m[parseInt(5*r)]++,m[parseInt(5*r)]>=n&&-1==jQuery.inArray(5*r,s)&&s.push(parseInt(5*r)))})}return s}function lfb_setAnimImmediate(t){wpe_getForm(t).animationsSpeed=0}function lfb_getCalendarEventsAtDate(t,a){var r=0;return jQuery.each(t.events,function(){var t=moment.utc(this.startDate),e=moment.utc(this.endDate);a.isSameOrAfter(t)&&a.isSameOrBefore(e)&&r++}),r}function lfb_getBusyDates(t,e){var a=wpe_getForm(t);jQuery.ajax({url:a.ajaxurl,type:"post",data:{action:"lfb_getBusyDates",formID:t,calendarsIDs:e},success:function(t){t=t.trim(),t=JSON.parse(t,!0),lfb_calendars=t.calendars,jQuery.each(t.calendars,function(){var s=this;jQuery('#estimation_popup .lfb_datepicker[data-calendarid="'+this.id+'"]').each(function(){_datepicker=jQuery(this);var p=new Array;jQuery.each(s.events,function(){if(1==this.fullDay){var t=moment.utc(this.startDate),e=moment.utc(this.endDate),a=t.format("YYYY-MM-DD");lfb_getCalendarEventsAtDate(s,t)>=_datepicker.attr("data-maxevents")&&p.push(a);for(var r=1;r<=e.diff(t,"days");r++){var i=t.add(r,"days");lfb_getCalendarEventsAtDate(s,i)>=_datepicker.attr("data-maxevents")&&p.push(i.format("YYYY-MM-DD"))}}else{t=moment.utc(this.startDate),_datepicker.attr("data-eventdurationtype");"mins"==_datepicker.attr("data-eventdurationtype")&&0,this.startDate=t.format("YYYY-MM-DD HH:mm");e=moment.utc(this.endDate),a=t.format("YYYY-MM-DD");if(1<=e.diff(t,"days")){var o=1;0==t.format("m")&&(o=0);for(r=o;r<=e.diff(t,"days");r++){i=t.clone().add(r,"days");p.push(i.format("YYYY-MM-DD"))}}}}),_datepicker.datetimepicker("setDatesDisabled",p)})})}})}function lfb_showWinStripePayment(o){var t=lfb_checkStepItemsValid("final",o.formID);1==o.legalNoticeEnable&&(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"] #lfb_legalCheckbox').is(":checked")||(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"] #lfb_legalCheckbox').closest(".form-group").addClass("has-error"),t=!1)),t&&lfb_checkCaptcha(o,function(){var t,a,r,e,i=!0;jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"] [data-activatePaypal="true"]:not(:checked):not(.checked)').each(function(){var t=jQuery(this).closest(".genSlide").attr("data-stepid");"final"!=t&&(t=parseInt(t)),-1==jQuery.inArray(t,lfb_lastSteps)||(i=!1)}),0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').find('[data-dontactivatepaypal="true"].checked,[data-dontactivatepaypal="true"]:checked').length&&(i=!1),!i||0==o.price&&0==o.priceSingle?wpe_order(o.formID):(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').find('#lfb_stripeModal [data-info="amount"]').html(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"] #finalPrice').html()),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').find("#lfb_stripeModal [data-panel]").hide(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').find('#lfb_stripeModal [data-panel="loading"]').show(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').find("#lfb_stripeModal .modal-footer").hide(),lfb_stripe=Stripe(o.stripePubKey),a=parseFloat(o.price),r=0,jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').is('[data-isSubs="true"]')&&(a=parseFloat(o.priceSingle),r=parseFloat(o.price)),"percent"==o.payMode?(e="<span>"+lfb_formatPriceWithCurrency(a=parseFloat(a)*(parseFloat(o.percentToPay)/100),o.formID)+"</span>",jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').find('#lfb_stripeModal [data-info="amount"]').html(e)):"fixed"==o.payMode&&(e="<span>"+lfb_formatPriceWithCurrency(a=parseFloat(o.fixedToPay),o.formID)+"</span>",jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').find('#lfb_stripeModal [data-info="amount"]').html(e)),""==o.stripeToken||void 0!==o.stripeAmountSingle&&o.stripeAmountSingle!=a||void 0!==o.stripeAmountSingle&&o.stripeAmountSub!=r?jQuery.ajax({url:o.ajaxurl,type:"post",data:{action:"lfb_getStripePaymentIntent",singleTotal:a,subTotal:r,formID:o.formID,customerInfos:wpe_getContactInformations(o.formID,!0)},success:function(t){t=JSON.parse(t),o.stripeToken=t.token,o.stripeCustomerID=t.customerID,o.stripeAmountSingle=a,o.stripeAmountSub=r;var e=lfb_stripe.elements();cardElement=e.create("card"),cardElement.mount('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"] #lfb_stripe_card-element'),cardElement.addEventListener("change",function(t){t.error?jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"] #lfb_stripe_card-error').html(t.error.message):jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"] #lfb_stripe_card-error').html("")}),o.cardElement=cardElement,jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').find("#lfb_stripeModal [data-panel]").hide(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').find('#lfb_stripeModal [data-panel="form"]').show(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').find("#lfb_stripeModal .modal-footer").slideDown()}}):(t=lfb_stripe.elements(),cardElement=t.create("card"),cardElement.mount('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"] #lfb_stripe_card-element'),cardElement.addEventListener("change",function(t){t.error?jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"] #lfb_stripe_card-error').html(t.error.message):jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"] #lfb_stripe_card-error').html("")}),o.cardElement=cardElement,a=parseFloat(o.price),r=0,jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').is('[data-isSubs="true"]')&&(a=parseFloat(o.priceSingle),r=parseFloat(o.price)),"percent"==o.payMode?(e="<span>"+lfb_formatPriceWithCurrency(a=parseFloat(a)*(parseFloat(o.percentToPay)/100),o.formID)+"</span>",jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').find('#lfb_stripeModal [data-info="amount"]').html(e)):"fixed"==o.payMode&&(e="<span>"+lfb_formatPriceWithCurrency(a=parseFloat(o.fixedToPay),o.formID)+"</span>",jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').find('#lfb_stripeModal [data-info="amount"]').html(e)),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').find("#lfb_stripeModal [data-panel]").hide(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').find('#lfb_stripeModal [data-panel="form"]').show(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').find("#lfb_stripeModal .modal-footer").slideDown()),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"] #lfb_stripeModal a[data-action="pay"]').unbind("click"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"] #lfb_stripeModal a[data-action="pay"]').click(function(){var t=!1;jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"] #lfb_stripeModal .has-error').removeClass("has-error"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"] #lfb_stripeModal [name="ownerName"]').val().length<3&&(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"] #lfb_stripeModal [name="ownerName"]').closest(".form-group").addClass("has-error"),t=!0),t||(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').find("#lfb_stripeModal [data-panel]").hide(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').find('#lfb_stripeModal [data-panel="loading"]').show(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').find("#lfb_stripeModal .modal-footer").hide(),lfb_stripe.createSource(o.cardElement).then(function(t){t.error?(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"] [data-info="error"]').html(t.error.message),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').find("#lfb_stripeModal [data-panel]").hide(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').find('#lfb_stripeModal [data-panel="fail"]').show()):(o.stripeSrc=t.source.id,0<r?jQuery.ajax({url:o.ajaxurl,type:"post",data:{action:"lfb_processStripeSubscription",formID:o.formID,stripeSrc:o.stripeSrc,customerID:o.stripeCustomerID,singleTotal:a,subTotal:r},success:function(t){1==(t=t.trim())?0<a?lfb_stripe.handleCardPayment(o.stripeToken,o.cardElement,{payment_method_data:{billing_details:{name:jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"] #lfb_stripeModal [name="ownerName"]').val()}}}).then(function(t){t.error?(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"] [data-info="error"]').html(t.error),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').find("#lfb_stripeModal [data-panel]").hide(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').find('#lfb_stripeModal [data-panel="fail"]').show()):(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').find("#lfb_stripeModal").modal("hide"),o.stripePaid=!0,wpe_order(o.formID))}):(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').find("#lfb_stripeModal").modal("hide"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').find("#lfb_stripeModal").modal("hide"),o.stripePaid=!0,wpe_order(o.formID)):-1<t.indexOf("pi_")&&lfb_stripe.handleCardPayment(t,o.cardElement,{payment_method_data:{billing_details:{name:jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"] #lfb_stripeModal [name="ownerName"]').val()}}}).then(function(t){t.error?(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"] [data-info="error"]').html(t.error),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').find("#lfb_stripeModal [data-panel]").hide(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').find('#lfb_stripeModal [data-panel="fail"]').show()):0<a?lfb_stripe.handleCardPayment(o.stripeToken,o.cardElement,{payment_method_data:{billing_details:{name:jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"] #lfb_stripeModal [name="ownerName"]').val()}}}).then(function(t){t.error?(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"] [data-info="error"]').html(t.error),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').find("#lfb_stripeModal [data-panel]").hide(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').find('#lfb_stripeModal [data-panel="fail"]').show()):(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').find("#lfb_stripeModal").modal("hide"),o.stripePaid=!0,wpe_order(o.formID))}):(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').find("#lfb_stripeModal").modal("hide"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').find("#lfb_stripeModal").modal("hide"),o.stripePaid=!0,wpe_order(o.formID))})}}):lfb_stripe.handleCardPayment(o.stripeToken,o.cardElement,{payment_method_data:{billing_details:{name:jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"] #lfb_stripeModal [name="ownerName"]').val()}}}).then(function(t){t.error?(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"] [data-info="error"]').html(t.error),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').find("#lfb_stripeModal [data-panel]").hide(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').find('#lfb_stripeModal [data-panel="fail"]').show()):(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').find("#lfb_stripeModal").modal("hide"),o.stripePaid=!0,wpe_order(o.formID))}))}))}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').find("#lfb_stripeModal").modal("show"))})}function lfb_checkCaptcha(e,a){1==e.useCaptcha&&""!=e.recaptcha3Key?grecaptcha.ready(function(){grecaptcha.execute(e.recaptcha3Key,{action:"sending_form"}).then(function(t){e.captcha=t,a(e)})}):a(e)}function lfb_updateVariable(t,e,a,r){for(var i=0;i<t.variables.length;i++)if(t.variables[i].id==e){var o=t.variables[i];o.value=lfb_executeCalculation(a,t.formID,r),"integer"==o.type?o.value=Math.round(o.value):o.value=o.value.toFixed(2);break}}function lfb_getVariableByID(t,e){for(var a=!1,r=0;r<t.variables.length;r++)if(t.variables[r].id==e){a=t.variables[r];break}return a}function lfb_checkUserEmail(a){var r,t,e=!0,i=a.formID;return 1==a.enableCustomerAccount&&void 0===a.stripePaid&&(void 0===a.verifiedEmail||!a.verifiedEmail)&&0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a.formID+'"] #mainPanel .genSlide[data-stepid="'+a.step+'"] [data-fieldtype="email"][data-required="true"]').length&&(e=!1,r=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a.formID+'"] #mainPanel .genSlide[data-stepid="'+a.step+'"] [data-fieldtype="email"][data-required="true"]').last(),void 0===a.emailProposed||a.emailProposed!=r.val()?(a.emailProposed=r.val(),jQuery.ajax({url:a.ajaxurl,type:"post",data:{action:"lfb_checkEmailCustomer",formID:a.formID,email:a.emailProposed},success:function(t){var e;1==t.trim()?(0==jQuery("#lfb_customerPasswordField").length?((e=jQuery('<div id="lfb_forgotPassCt" class="form-group has-error" style="display:none;" ></div>')).append('<div  class="input-group" ><span class="input-group-addon"><span class="fa fa-lock" ></span></span><input type="password" id="lfb_forgotPassField" class="form-control" /></div>'),e.append('<div class="lfb_forgotPassLinkCt"><a href="javascript:" id="lfb_forgotPassLink">'+a.txtCustomersDataForgotPassLink+"</a></div>"),r.closest(".form-group").after(e),jQuery("#lfb_forgotPassLink").on("click",function(){wpe_checkEmail(r.val())&&(r.attr("disabled","disabled"),jQuery.ajax({url:a.ajaxurl,type:"post",data:{action:"lfb_forgotPassManD",email:a.emailProposed},success:function(t){jQuery("#lfb_passModal").modal("show")}}))}),jQuery('#estimation_popup[data-form="'+i+'"] #mainPanel .genSlide[data-stepid="'+a.step+'"] #lfb_forgotPassCt').slideDown()):(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] #mainPanel .genSlide[data-stepid="'+a.step+'"] #lfb_forgotPassField').val(""),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] #mainPanel .genSlide[data-stepid="'+a.step+'"] #lfb_forgotPassField').closest(".form-group").addClass("has-error")),setTimeout(function(){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a.formID+'"]').is(".wpe_fullscreen")?jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a.formID+'"]').animate({scrollTop:jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a.formID+'"] .genSlide[data-stepid="'+a.step+'"] #lfb_forgotPassCt').offset().top-(120+parseInt(a.scrollTopMargin))},2*a.animationsSpeed):jQuery("body,html").animate({scrollTop:jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a.formID+'"] .genSlide[data-stepid="'+a.step+'"] #lfb_forgotPassCt').offset().top-(120+parseInt(a.scrollTopMargin))},2*a.animationsSpeed)},350)):(a.verifiedEmail=a.emailProposed,jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] #mainPanel .genSlide[data-stepid="'+a.step+'"] #lfb_forgotPassCt').removeClass("lfb_open").slideUp(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] #mainPanel .genSlide[data-stepid="'+a.step+'"] [data-fieldtype="email"][data-required="true"]').last().attr("disabled","disabled"),"final"==a.step?0==jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] #lfb_paymentMethodBtns').length&&("none"!=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] .genSlide[data-stepid="'+a.step+'"] .lfb_btnNextContainer').css("display")?jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] #wpe_btnOrder').trigger("click"):jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] #btnOrderPaypal, #estimation_popup.wpe_bootstraped[data-form="'+i+'"] #lfb_btnPayStripe,#estimation_popup.wpe_bootstraped[data-form="'+i+'"] #btnOrderRazorpay').trigger("click")):jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] #mainPanel .genSlide[data-stepid="'+a.step+'"] .btn-next').trigger("click"))}})):0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] #mainPanel .genSlide[data-stepid="'+a.step+'"] #lfb_forgotPassField').length&&(3<(t=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] #mainPanel .genSlide[data-stepid="'+a.step+'"] #lfb_forgotPassField').val()).length?jQuery.ajax({url:a.ajaxurl,type:"post",data:{action:"lfb_verificationPass",formID:i,pass:t},success:function(t){1==t.trim()?(a.verifiedEmail=a.emailProposed,jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] #mainPanel .genSlide[data-stepid="'+a.step+'"] #lfb_forgotPassCt').removeClass("lfb_open").slideUp(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] #mainPanel .genSlide[data-stepid="'+a.step+'"] [data-fieldtype="email"][data-required="true"]').last().attr("disabled","disabled"),"final"==a.step?0==jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] #lfb_paymentMethodBtns').length&&("none"!=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] .genSlide[data-stepid="'+a.step+'"] .lfb_btnNextContainer').css("display")?jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] #wpe_btnOrder').trigger("click"):jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] #btnOrderPaypal, #estimation_popup.wpe_bootstraped[data-form="'+i+'"] #lfb_btnPayStripe,#estimation_popup.wpe_bootstraped[data-form="'+i+'"] #btnOrderRazorpay').trigger("click")):jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] #mainPanel .genSlide[data-stepid="'+a.step+'"] .btn-next').trigger("click")):(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] #mainPanel .genSlide[data-stepid="'+a.step+'"] #lfb_forgotPassField').closest(".form-group").addClass("has-error"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a.formID+'"]').is(".wpe_fullscreen")?jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a.formID+'"]').animate({scrollTop:jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] #mainPanel .genSlide[data-stepid="'+a.step+'"] #lfb_forgotPassCt').offset().top-(120+parseInt(a.scrollTopMargin))},2*a.animationsSpeed):jQuery("body,html").animate({scrollTop:jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] #mainPanel .genSlide[data-stepid="'+a.step+'"] #lfb_forgotPassCt').offset().top-(120+parseInt(a.scrollTopMargin))},2*a.animationsSpeed))}}):(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] #mainPanel .genSlide[data-stepid="'+a.step+'"] #lfb_forgotPassCt').addClass("has-error"),setTimeout(function(){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a.formID+'"]').is(".wpe_fullscreen")?jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a.formID+'"]').animate({scrollTop:jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a.formID+'"] .genSlide[data-stepid="'+a.step+'"] #lfb_forgotPassCt').offset().top-(120+parseInt(a.scrollTopMargin))},2*a.animationsSpeed):jQuery("body,html").animate({scrollTop:jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a.formID+'"] .genSlide[data-stepid="'+a.step+'"] #lfb_forgotPassCt').offset().top-(120+parseInt(a.scrollTopMargin))},2*a.animationsSpeed)},350)))),e}function lfb_decodeCalculation(t){var e=new Array;e[0]=9,e[1]=3,e[2]=5,e[3]=8,e[4]=2,e[5]=6,e[6]=4,e[7]=1,e[8]=0,e[9]=7;for(var a="",r=0;r<t.length;r++)-1<e.indexOf(parseInt(t[r]))?a+=e[parseInt(t[r])]:a+=t[r];return a}function lfb_downloadAsPDF(t){var a=wpe_getForm(t),e=wpe_cloneSummary(!1,t),r=e.html();e.remove();var i=wpe_getFormContent(t),o=(i[0].replace(/<br\/>/g,"[n]"),i[1]),p=i[2],s=wpe_getContactInformations(t);email=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"] .emailField').val(),wpe_checkEmail(s.email)&&(email=s.email);var n="";jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a.formID+'"] #finalSlide').find('.lfb_item input:not([type="checkbox"])[data-itemid],.lfb_item textarea[data-itemid],.lfb_item select[data-itemid]').each(function(){var t;0==jQuery(this).closest("#wtmt_paypalForm").length&&(jQuery(this).is(".lfb_disabled")||jQuery(this).is("#lfb_couponField")||jQuery(this).is("#lfb_captchaField")||(t=":",jQuery(this).closest(".lfb_item").find("label").html().lastIndexOf(":")==jQuery(this).closest(".lfb_item").find("label").html().length-1&&(t=""),jQuery("body").is(".rtl")?n+='<p><b><span class="lfb_value">'+jQuery(this).val()+"</span></b>"+t+" "+jQuery(this).closest(".lfb_item").find("label").html()+"</p>":n+="<p>"+jQuery(this).closest(".lfb_item").find("label").html()+" "+t+' <b><span class="lfb_value">'+jQuery(this).val()+"</span></b></p>"))}),jQuery.ajax({url:a.ajaxurl,type:"post",data:{action:"lfb_downloadOrderPDF",formID:a.formID,informations:n,email:email,customerInfos:wpe_getContactInformations(a.formID,!0),summary:r,totalTxt:o,formSession:jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a.formID+'"] #lfb_formSession').val(),items:p,useRtl:jQuery("body").is(".rtl"),variables:JSON.stringify(a.variables)},success:function(t){var e=window.open(a.homeUrl+"/index.php?EPFormsBuilder=downloadMyOrder","_blank");"null"!=typeof e&&null!=e&&(e.focus(),setTimeout(function(){e.close()},300))}})}jQuery(document).ready(function(){0<jQuery("#estimation_popup").length&&(-1<document.location.href.indexOf("lfb_action=preview")&&jQuery("#estimation_popup:not(.wpe_fullscreen)").remove(),initFlatUI(),window.Dropzone.autoDiscover=!1,wpe_initForms(),jQuery.each(wpe_forms,function(){wpe_checkItems(this.formID),wpe_initListeners(this.formID)}))}),jQuery(window).on("load",function(){0<jQuery("#estimation_popup").length&&(lfb_onResize(),jQuery(window).resize(lfb_onResize),jQuery(window).on("popstate",function(t){null!==t.originalEvent.state&&(t.preventDefault(),wpe_previousStep(wpe_forms[0].formID))})),jQuery("#ajax-loading-screen").fadeOut(),jQuery("#ajax-content-wrap >.container-wrap").css({opacity:1,display:"block"}),jQuery("#estimation_popup canvas.img").each(function(){jQuery(this).parent().children("img").css("opacity",0),jQuery(this).parent().children("img").show(),jQuery(this).css({width:jQuery(this).parent().children("img").get(0).width,height:jQuery(this).parent().children("img").get(0).height}),jQuery(this).parent().children("img").hide()}),jQuery.each(wpe_forms,function(){var t,e=this;1==e.useCaptcha&&""!=e.recaptcha3Key&&0<jQuery(".grecaptcha-badge").length&&0==jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e.formID+'"] #finalSlide .grecaptcha-badge').length&&(t=jQuery(".grecaptcha-badge").clone(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e.formID+'"] #finalSlide .genContentSlide').append(t))})});